import{r as m,a as A,R as E}from"./react-libs-pUTQiAFL.js";import{_ as M,a as S,P as k}from"./pdf-libs-C57dCSyO.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function d(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(t){if(t.ep)return;t.ep=!0;const a=d(t);fetch(t.href,a)}})();var D={exports:{}},j={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I=m,$=Symbol.for("react.element"),B=Symbol.for("react.fragment"),z=Object.prototype.hasOwnProperty,H=I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,U={key:!0,ref:!0,__self:!0,__source:!0};function F(r,s,d){var l,t={},a=null,o=null;d!==void 0&&(a=""+d),s.key!==void 0&&(a=""+s.key),s.ref!==void 0&&(o=s.ref);for(l in s)z.call(s,l)&&!U.hasOwnProperty(l)&&(t[l]=s[l]);if(r&&r.defaultProps)for(l in s=r.defaultProps,s)t[l]===void 0&&(t[l]=s[l]);return{$$typeof:$,type:r,key:a,ref:o,props:t,_owner:H.current}}j.Fragment=B;j.jsx=F;j.jsxs=F;D.exports=j;var e=D.exports,_,L=A;_=L.createRoot,L.hydrateRoot;const T=()=>e.jsx("header",{className:"bg-gray-800 shadow-md",children:e.jsxs("div",{className:"container mx-auto px-4 py-4",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-white",children:[e.jsx("span",{className:"text-indigo-400",children:"PDF"})," Fusionador"]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Une y ordena tus PDFs fácilmente."})]})}),V=({onFileChange:r})=>{const[s,d]=m.useState(!1),l=m.useCallback(o=>{o.preventDefault(),o.stopPropagation(),o.type==="dragenter"||o.type==="dragover"?d(!0):o.type==="dragleave"&&d(!1)},[]),t=m.useCallback(o=>{o.preventDefault(),o.stopPropagation(),d(!1),o.dataTransfer.files&&o.dataTransfer.files.length>0&&r(o.dataTransfer.files)},[r]),a=o=>{r(o.target.files)};return e.jsxs("div",{className:`w-full h-full flex flex-col items-center justify-center p-8 border-2 border-dashed rounded-lg transition-colors duration-300 ${s?"border-indigo-500 bg-gray-700/50":"border-gray-600 hover:border-indigo-500"}`,onDragEnter:l,onDragLeave:l,onDragOver:l,onDrop:t,children:[e.jsx("input",{type:"file",id:"file-upload",multiple:!0,accept:".pdf",className:"hidden",onChange:a}),e.jsxs("label",{htmlFor:"file-upload",className:"flex flex-col items-center justify-center cursor-pointer text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-500 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-4-4V7a4 4 0 014-4h1.586a1 1 0 01.707.293l1.414 1.414a1 1 0 00.707.293h4.586a4 4 0 014 4v5a4 4 0 01-4 4H7z"})}),e.jsx("p",{className:"text-lg font-semibold text-gray-300",children:"Arrastra y suelta tus archivos PDF aquí"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"o"}),e.jsx("span",{className:"mt-2 font-semibold text-indigo-400 hover:text-indigo-300",children:"Selecciona los archivos"}),e.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"Solo se aceptan archivos .pdf"})]})]})},W=r=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:[e.jsx("path",{d:"M8.267 3.493A3.75 3.75 0 005.25 6.75v10.5c0 1.93 1.57 3.5 3.5 3.5h6.5a3.5 3.5 0 003.5-3.5V6.75a3.75 3.75 0 00-3.017-3.257"}),e.jsx("path",{fillRule:"evenodd",d:"M10.5 3A2.5 2.5 0 008 5.5V6h8v-.5A2.5 2.5 0 0013.5 3h-3zm-2.5 6.5A.5.5 0 007.5 10h.25a.75.75 0 01.75.75v.5a.75.75 0 01-.75.75H7.5a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h.25a.75.75 0 01.75.75v.5a.75.75 0 01-.75.75H7.5a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h.25a.75.75 0 01.75.75v.5a.75.75 0 01-.75.75H7.5a.5.5 0 00-.5.5v.5h1.5v-1a.5.5 0 00-.5-.5h-.25a.75.75 0 01-.75-.75v-.5a.75.75 0 01.75-.75h.25a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5h-.25a.75.75 0 01-.75-.75v-.5a.75.75 0 01.75-.75h.25a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5H8v-1zM12 9.5h4.5a.5.5 0 01.5.5v1a.5.5 0 01-.5.5H12a.5.5 0 01-.5-.5v-1a.5.5 0 01.5-.5zm0 3h4.5a.5.5 0 01.5.5v1a.5.5 0 01-.5.5H12a.5.5 0 01-.5-.5v-1a.5.5 0 01.5-.5zm0 3h4.5a.5.5 0 01.5.5v1a.5.5 0 01-.5.5H12a.5.5 0 01-.5-.5v-1a.5.5 0 01.5-.5z",clipRule:"evenodd"})]}),P=r=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...r,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.134-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.067-2.09 1.02-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),w=({className:r})=>e.jsxs("svg",{className:`animate-spin h-5 w-5 text-white ${r}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),q=({file:r,viewMode:s,onRemove:d,onDragStart:l})=>{const t=a=>{a.stopPropagation(),d(r.id)};return s==="list"?e.jsxs("div",{draggable:!0,onDragStart:l,className:"flex items-center bg-gray-700 p-3 rounded-lg cursor-grab active:cursor-grabbing",children:[e.jsx(W,{className:"w-6 h-6 text-red-400 flex-shrink-0"}),e.jsx("p",{className:"ml-3 text-sm text-gray-200 truncate flex-grow",title:r.name,children:r.name}),e.jsx("button",{onClick:t,className:"ml-3 p-1 rounded-full hover:bg-gray-600 text-gray-400 hover:text-white transition","aria-label":`Eliminar ${r.name}`,children:e.jsx(P,{className:"w-5 h-5"})})]}):e.jsxs("div",{draggable:!0,onDragStart:l,className:"relative group bg-gray-700 rounded-lg overflow-hidden shadow-lg cursor-grab active:cursor-grabbing flex flex-col",children:[e.jsx("div",{className:"aspect-w-3 aspect-h-4 bg-gray-800 flex items-center justify-center",children:r.thumbnailUrl?e.jsx("img",{src:r.thumbnailUrl,alt:`Miniatura de ${r.name}`,className:"object-cover w-full h-full"}):e.jsxs("div",{className:"flex flex-col items-center text-gray-500",children:[e.jsx(w,{}),e.jsx("span",{className:"text-xs mt-2",children:"Generando..."})]})}),e.jsx("div",{className:"p-2 bg-gray-700/50",children:e.jsx("p",{className:"text-xs text-gray-300 truncate",title:r.name,children:r.name})}),e.jsx("button",{onClick:t,className:"absolute top-2 right-2 p-1.5 bg-black/50 rounded-full text-white opacity-0 group-hover:opacity-100 hover:bg-red-500 transition-all duration-200","aria-label":`Eliminar ${r.name}`,children:e.jsx(P,{className:"w-4 h-4"})})]})},G=({files:r,viewMode:s,onRemove:d,onReorder:l,isProcessing:t})=>{const[a,o]=m.useState(null),h=m.useRef(null),v=i=>{o(i)},b=(i,n)=>{if(i.preventDefault(),a===null||a===n)return;h.current&&h.current.classList.remove("drag-over-area");const u=i.currentTarget;u.classList.add("drag-over-area"),h.current=u},y=i=>{i.currentTarget.classList.remove("drag-over-area")},f=i=>{a!==null&&(a!==i&&l(a,i),h.current&&h.current.classList.remove("drag-over-area"),o(null))},x=()=>{h.current&&h.current.classList.remove("drag-over-area"),o(null)},c=s==="grid"?"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4":"flex flex-col gap-3";return e.jsxs("div",{className:c,onDragEnd:x,children:[r.map((i,n)=>e.jsx("div",{onDragOver:u=>b(u,n),onDragLeave:y,onDrop:()=>f(n),className:`rounded-lg transition-all duration-200 ${a===n?"drag-ghost":""}`,children:e.jsx(q,{file:i,viewMode:s,onRemove:d,onDragStart:()=>v(n)})},i.id)),r.length>0&&t===0&&e.jsx("div",{className:"text-center text-gray-500 col-span-full mt-4",children:e.jsx("p",{children:"Arrastra los archivos para reordenarlos."})})]})},J=r=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...r,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),K=r=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...r,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 8.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 018.25 20.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6A2.25 2.25 0 0115.75 3.75h2.25A2.25 2.25 0 0120.25 6v2.25a2.25 2.25 0 01-2.25 2.25h-2.25A2.25 2.25 0 0113.5 8.25V6zM13.5 15.75A2.25 2.25 0 0115.75 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25h-2.25a2.25 2.25 0 01-2.25-2.25v-2.25z"})}),Y=({viewMode:r,setViewMode:s,onMerge:d,onClear:l,fileCount:t})=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Modo de Vista"}),e.jsxs("div",{className:"flex items-center bg-gray-700 rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>s("list"),className:`w-1/2 py-2 px-3 rounded-md flex items-center justify-center gap-2 text-sm font-semibold transition ${r==="list"?"bg-indigo-600 text-white":"text-gray-300 hover:bg-gray-600"}`,"aria-pressed":r==="list",children:[e.jsx(J,{className:"w-5 h-5"}),"Lista"]}),e.jsxs("button",{onClick:()=>s("grid"),className:`w-1/2 py-2 px-3 rounded-md flex items-center justify-center gap-2 text-sm font-semibold transition ${r==="grid"?"bg-indigo-600 text-white":"text-gray-300 hover:bg-gray-600"}`,"aria-pressed":r==="grid",children:[e.jsx(K,{className:"w-5 h-5"}),"Miniaturas"]})]})]}),e.jsxs("div",{className:"space-y-2 pt-4 border-t border-gray-700",children:[e.jsxs("button",{onClick:d,disabled:t<2,className:"w-full bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-indigo-500 transition-colors disabled:bg-gray-600 disabled:text-gray-400 disabled:cursor-not-allowed",children:["Unir ",t>0?`(${t})`:""," PDFs"]}),e.jsx("button",{onClick:l,disabled:t===0,className:"w-full bg-red-600/80 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-500 transition-colors disabled:bg-gray-600 disabled:text-gray-400 disabled:cursor-not-allowed",children:"Limpiar Todo"}),t<2&&e.jsx("p",{className:"text-xs text-gray-500 text-center pt-1",children:"Necesitas al menos 2 archivos para unir."})]})]});M.workerSrc="https://esm.sh/pdfjs-dist@4.0.379/build/pdf.worker.mjs";const Q=()=>{const[r,s]=m.useState([]),[d,l]=m.useState(!1),[t,a]=m.useState(0),o=m.useCallback(async x=>{try{const c=await x.arrayBuffer(),n=await(await S({data:c}).promise).getPage(1),u=n.getViewport({scale:.3}),g=document.createElement("canvas"),p=g.getContext("2d");return p?(g.height=u.height,g.width=u.width,await n.render({canvasContext:p,viewport:u}).promise,g.toDataURL()):null}catch(c){return console.error("Error generating thumbnail:",c),null}},[]),h=m.useCallback(async x=>{const c=x.filter(n=>n.type==="application/pdf");if(c.length===0)return;a(n=>n+c.length);const i=c.map(n=>({id:`${n.name}-${Date.now()}`,file:n,name:n.name,thumbnailUrl:null}));s(n=>[...n,...i]);for(const n of i)o(n.file).then(u=>{s(g=>g.map(p=>p.id===n.id?{...p,thumbnailUrl:u}:p)),a(g=>g-1)})},[o]),v=m.useCallback(x=>{s(c=>c.filter(i=>i.id!==x))},[]),b=m.useCallback((x,c)=>{s(i=>{const n=Array.from(i),[u]=n.splice(x,1);return n.splice(c,0,u),n})},[]),y=m.useCallback(()=>{s([])},[]),f=m.useCallback(async x=>{if(!(r.length<2)){l(!0);try{const c=await k.create();for(const p of r){const R=await p.file.arrayBuffer(),N=await k.load(R,{ignoreEncryption:!0});(await c.copyPages(N,N.getPageIndices())).forEach(O=>c.addPage(O))}const i=await c.save(),n=new Blob([i],{type:"application/pdf"}),u=URL.createObjectURL(n),g=document.createElement("a");g.href=u,g.download=`${x}.pdf`,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(u)}catch(c){console.error("Error merging PDFs:",c),alert("Ocurrió un error al fusionar los PDFs. Por favor, inténtalo de nuevo.")}finally{l(!1)}}},[r]);return{files:r,isLoading:d,isProcessing:t,addFiles:h,removeFile:v,reorderFiles:b,clearFiles:y,mergePdfs:f}};function X(){const{files:r,isLoading:s,isProcessing:d,addFiles:l,removeFile:t,reorderFiles:a,clearFiles:o,mergePdfs:h}=Q(),[v,b]=m.useState("grid"),[y,f]=m.useState(!1),[x,c]=m.useState(""),i=()=>{c("documento-fusionado"),f(!0)},n=async()=>{x.trim()&&(await h(x.trim()),f(!1),o())},u=g=>{g&&l(Array.from(g))};return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-200 flex flex-col",children:[e.jsx(T,{}),e.jsx("main",{className:"flex-grow container mx-auto px-4 py-8 flex flex-col",children:e.jsxs("div",{className:"flex-grow flex flex-col md:flex-row gap-8",children:[e.jsx("div",{className:"w-full md:w-1/3 lg:w-1/4 flex-shrink-0",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 sticky top-8",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-indigo-400",children:"Controles"}),e.jsx(Y,{viewMode:v,setViewMode:b,onMerge:i,onClear:o,fileCount:r.length})]})}),e.jsx("div",{className:"flex-grow bg-gray-800/50 rounded-lg p-2 md:p-6",children:r.length===0?e.jsx(V,{onFileChange:u}):e.jsx(G,{files:r,viewMode:v,onRemove:t,onReorder:a,isProcessing:d})})]})}),(s||d>0)&&e.jsxs("div",{className:"fixed bottom-6 right-6 bg-indigo-600 text-white py-2 px-4 rounded-lg shadow-lg flex items-center gap-3",children:[e.jsx(w,{}),e.jsx("span",{children:s?"Fusionando PDFs...":`Procesando ${d} archivo(s)...`})]}),y&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl p-8 w-full max-w-md m-4",children:[e.jsx("h3",{className:"text-2xl font-bold mb-4 text-indigo-400",children:"Nombre del Archivo Fusionado"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"Introduce un nombre para tu archivo combinado."}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"fileName",className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre del archivo (sin .pdf)"}),e.jsx("input",{type:"text",id:"fileName",value:x,onChange:g=>c(g.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition"})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:()=>f(!1),className:"py-2 px-4 bg-gray-600 hover:bg-gray-500 rounded-md transition font-semibold",children:"Cancelar"}),e.jsx("button",{onClick:n,disabled:!x.trim()||s,className:"py-2 px-6 bg-indigo-600 hover:bg-indigo-500 rounded-md transition font-semibold disabled:bg-indigo-800 disabled:cursor-not-allowed flex items-center",children:s?e.jsx(w,{}):"Confirmar y Descargar"})]})]})})]})}const C=document.getElementById("root");C&&_(C).render(e.jsx(E.StrictMode,{children:e.jsx(X,{})}));
