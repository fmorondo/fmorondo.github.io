(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();const nk="modulepreload",ak=function(i){return"/pdf-to-jpg/"+i},qv={},Qu=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(t.map(l=>{if(l=ak(l),l in qv)return;qv[l]=!0;const c=l.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":nk,c||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function n(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return r.then(a=>{for(const o of a||[])o.status==="rejected"&&n(o.reason);return e().catch(n)})};var ok=Object.defineProperty,V0=i=>{throw TypeError(i)},lk=(i,e,t)=>e in i?ok(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ge=(i,e,t)=>lk(i,typeof e!="symbol"?e+"":e,t),Bg=(i,e,t)=>e.has(i)||V0("Cannot "+t),u=(i,e,t)=>(Bg(i,e,"read from private field"),t?t.call(i):e.get(i)),E=(i,e,t)=>e.has(i)?V0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),x=(i,e,t,s)=>(Bg(i,e,"write to private field"),e.set(i,t),t),A=(i,e,t)=>(Bg(i,e,"access private method"),t),Mi=(i,e,t,s)=>({set _(r){x(i,e,r)},get _(){return u(i,e,s)}});(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&t(n)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();var Zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function G0(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var q0={exports:{}},wf={},K0={exports:{}},we={};/**
* @license React
* react.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Bu=Symbol.for("react.element"),uk=Symbol.for("react.portal"),ck=Symbol.for("react.fragment"),hk=Symbol.for("react.strict_mode"),dk=Symbol.for("react.profiler"),fk=Symbol.for("react.provider"),pk=Symbol.for("react.context"),mk=Symbol.for("react.forward_ref"),gk=Symbol.for("react.suspense"),vk=Symbol.for("react.memo"),bk=Symbol.for("react.lazy"),Kv=Symbol.iterator;function yk(i){return i===null||typeof i!="object"?null:(i=Kv&&i[Kv]||i["@@iterator"],typeof i=="function"?i:null)}var X0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y0=Object.assign,Q0={};function Lo(i,e,t){this.props=i,this.context=e,this.refs=Q0,this.updater=t||X0}Lo.prototype.isReactComponent={};Lo.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};Lo.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function Z0(){}Z0.prototype=Lo.prototype;function jg(i,e,t){this.props=i,this.context=e,this.refs=Q0,this.updater=t||X0}var Ug=jg.prototype=new Z0;Ug.constructor=jg;Y0(Ug,Lo.prototype);Ug.isPureReactComponent=!0;var Xv=Array.isArray,J0=Object.prototype.hasOwnProperty,Hg={current:null},ey={key:!0,ref:!0,__self:!0,__source:!0};function ty(i,e,t){var s,r={},n=null,a=null;if(e!=null)for(s in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(n=""+e.key),e)J0.call(e,s)&&!ey.hasOwnProperty(s)&&(r[s]=e[s]);var o=arguments.length-2;if(o===1)r.children=t;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];r.children=l}if(i&&i.defaultProps)for(s in o=i.defaultProps,o)r[s]===void 0&&(r[s]=o[s]);return{$$typeof:Bu,type:i,key:n,ref:a,props:r,_owner:Hg.current}}function wk(i,e){return{$$typeof:Bu,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function $g(i){return typeof i=="object"&&i!==null&&i.$$typeof===Bu}function _k(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(t){return e[t]})}var Yv=/\/+/g;function qf(i,e){return typeof i=="object"&&i!==null&&i.key!=null?_k(""+i.key):e.toString(36)}function Ec(i,e,t,s,r){var n=typeof i;(n==="undefined"||n==="boolean")&&(i=null);var a=!1;if(i===null)a=!0;else switch(n){case"string":case"number":a=!0;break;case"object":switch(i.$$typeof){case Bu:case uk:a=!0}}if(a)return a=i,r=r(a),i=s===""?"."+qf(a,0):s,Xv(r)?(t="",i!=null&&(t=i.replace(Yv,"$&/")+"/"),Ec(r,e,t,"",function(c){return c})):r!=null&&($g(r)&&(r=wk(r,t+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Yv,"$&/")+"/")+i)),e.push(r)),1;if(a=0,s=s===""?".":s+":",Xv(i))for(var o=0;o<i.length;o++){n=i[o];var l=s+qf(n,o);a+=Ec(n,e,t,l,r)}else if(l=yk(i),typeof l=="function")for(i=l.call(i),o=0;!(n=i.next()).done;)n=n.value,l=s+qf(n,o++),a+=Ec(n,e,t,l,r);else if(n==="object")throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ju(i,e,t){if(i==null)return i;var s=[],r=0;return Ec(i,s,"","",function(n){return e.call(t,n,r++)}),s}function kk(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(t){(i._status===0||i._status===-1)&&(i._status=1,i._result=t)},function(t){(i._status===0||i._status===-1)&&(i._status=2,i._result=t)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var Wt={current:null},Cc={transition:null},xk={ReactCurrentDispatcher:Wt,ReactCurrentBatchConfig:Cc,ReactCurrentOwner:Hg};function iy(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:Ju,forEach:function(i,e,t){Ju(i,function(){e.apply(this,arguments)},t)},count:function(i){var e=0;return Ju(i,function(){e++}),e},toArray:function(i){return Ju(i,function(e){return e})||[]},only:function(i){if(!$g(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};we.Component=Lo;we.Fragment=ck;we.Profiler=dk;we.PureComponent=jg;we.StrictMode=hk;we.Suspense=gk;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xk;we.act=iy;we.cloneElement=function(i,e,t){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var s=Y0({},i.props),r=i.key,n=i.ref,a=i._owner;if(e!=null){if(e.ref!==void 0&&(n=e.ref,a=Hg.current),e.key!==void 0&&(r=""+e.key),i.type&&i.type.defaultProps)var o=i.type.defaultProps;for(l in e)J0.call(e,l)&&!ey.hasOwnProperty(l)&&(s[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)s.children=t;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];s.children=o}return{$$typeof:Bu,type:i.type,key:r,ref:n,props:s,_owner:a}};we.createContext=function(i){return i={$$typeof:pk,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:fk,_context:i},i.Consumer=i};we.createElement=ty;we.createFactory=function(i){var e=ty.bind(null,i);return e.type=i,e};we.createRef=function(){return{current:null}};we.forwardRef=function(i){return{$$typeof:mk,render:i}};we.isValidElement=$g;we.lazy=function(i){return{$$typeof:bk,_payload:{_status:-1,_result:i},_init:kk}};we.memo=function(i,e){return{$$typeof:vk,type:i,compare:e===void 0?null:e}};we.startTransition=function(i){var e=Cc.transition;Cc.transition={};try{i()}finally{Cc.transition=e}};we.unstable_act=iy;we.useCallback=function(i,e){return Wt.current.useCallback(i,e)};we.useContext=function(i){return Wt.current.useContext(i)};we.useDebugValue=function(){};we.useDeferredValue=function(i){return Wt.current.useDeferredValue(i)};we.useEffect=function(i,e){return Wt.current.useEffect(i,e)};we.useId=function(){return Wt.current.useId()};we.useImperativeHandle=function(i,e,t){return Wt.current.useImperativeHandle(i,e,t)};we.useInsertionEffect=function(i,e){return Wt.current.useInsertionEffect(i,e)};we.useLayoutEffect=function(i,e){return Wt.current.useLayoutEffect(i,e)};we.useMemo=function(i,e){return Wt.current.useMemo(i,e)};we.useReducer=function(i,e,t){return Wt.current.useReducer(i,e,t)};we.useRef=function(i){return Wt.current.useRef(i)};we.useState=function(i){return Wt.current.useState(i)};we.useSyncExternalStore=function(i,e,t){return Wt.current.useSyncExternalStore(i,e,t)};we.useTransition=function(){return Wt.current.useTransition()};we.version="18.3.1";K0.exports=we;var si=K0.exports;const Sk=G0(si);/**
* @license React
* react-jsx-runtime.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Ak=si,Ek=Symbol.for("react.element"),Ck=Symbol.for("react.fragment"),Mk=Object.prototype.hasOwnProperty,Lk=Ak.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Pk={key:!0,ref:!0,__self:!0,__source:!0};function sy(i,e,t){var s,r={},n=null,a=null;t!==void 0&&(n=""+t),e.key!==void 0&&(n=""+e.key),e.ref!==void 0&&(a=e.ref);for(s in e)Mk.call(e,s)&&!Pk.hasOwnProperty(s)&&(r[s]=e[s]);if(i&&i.defaultProps)for(s in e=i.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:Ek,type:i,key:n,ref:a,props:r,_owner:Lk.current}}wf.Fragment=Ck;wf.jsx=sy;wf.jsxs=sy;q0.exports=wf;var ae=q0.exports,ry={exports:{}},ui={},ny={exports:{}},ay={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/(function(i){function e(G,H){var Q=G.length;G.push(H);e:for(;0<Q;){var z=Q-1>>>1,D=G[z];if(0<r(D,H))G[z]=H,G[Q]=D,Q=z;else break e}}function t(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var H=G[0],Q=G.pop();if(Q!==H){G[0]=Q;e:for(var z=0,D=G.length,se=D>>>1;z<se;){var ie=2*(z+1)-1,J=G[ie],ve=ie+1,fe=G[ve];if(0>r(J,Q))ve<D&&0>r(fe,J)?(G[z]=fe,G[ve]=Q,z=ve):(G[z]=J,G[ie]=Q,z=ie);else if(ve<D&&0>r(fe,Q))G[z]=fe,G[ve]=Q,z=ve;else break e}}return H}function r(G,H){var Q=G.sortIndex-H.sortIndex;return Q!==0?Q:G.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var n=performance;i.unstable_now=function(){return n.now()}}else{var a=Date,o=a.now();i.unstable_now=function(){return a.now()-o}}var l=[],c=[],h=1,d=null,f=3,p=!1,v=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(G){for(var H=t(c);H!==null;){if(H.callback===null)s(c);else if(H.startTime<=G)s(c),H.sortIndex=H.expirationTime,e(l,H);else break;H=t(c)}}function S(G){if(m=!1,w(G),!v)if(t(l)!==null)v=!0,K(C);else{var H=t(c);H!==null&&j(S,H.startTime-G)}}function C(G,H){v=!1,m&&(m=!1,g(N),N=-1),p=!0;var Q=f;try{for(w(H),d=t(l);d!==null&&(!(d.expirationTime>H)||G&&!V());){var z=d.callback;if(typeof z=="function"){d.callback=null,f=d.priorityLevel;var D=z(d.expirationTime<=H);H=i.unstable_now(),typeof D=="function"?d.callback=D:d===t(l)&&s(l),w(H)}else s(l);d=t(l)}if(d!==null)var se=!0;else{var ie=t(c);ie!==null&&j(S,ie.startTime-H),se=!1}return se}finally{d=null,f=Q,p=!1}}var I=!1,P=null,N=-1,F=5,T=-1;function V(){return!(i.unstable_now()-T<F)}function L(){if(P!==null){var G=i.unstable_now();T=G;var H=!0;try{H=P(!0,G)}finally{H?W():(I=!1,P=null)}}else I=!1}var W;if(typeof b=="function")W=function(){b(L)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,U=k.port2;k.port1.onmessage=L,W=function(){U.postMessage(null)}}else W=function(){y(L,0)};function K(G){P=G,I||(I=!0,W())}function j(G,H){N=y(function(){G(i.unstable_now())},H)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(G){G.callback=null},i.unstable_continueExecution=function(){v||p||(v=!0,K(C))},i.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<G?Math.floor(1e3/G):5},i.unstable_getCurrentPriorityLevel=function(){return f},i.unstable_getFirstCallbackNode=function(){return t(l)},i.unstable_next=function(G){switch(f){case 1:case 2:case 3:var H=3;break;default:H=f}var Q=f;f=H;try{return G()}finally{f=Q}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(G,H){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Q=f;f=G;try{return H()}finally{f=Q}},i.unstable_scheduleCallback=function(G,H,Q){var z=i.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?z+Q:z):Q=z,G){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=Q+D,G={id:h++,callback:H,priorityLevel:G,startTime:Q,expirationTime:D,sortIndex:-1},Q>z?(G.sortIndex=Q,e(c,G),t(l)===null&&G===t(c)&&(m?(g(N),N=-1):m=!0,j(S,Q-z))):(G.sortIndex=D,e(l,G),v||p||(v=!0,K(C))),G},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(G){var H=f;return function(){var Q=f;f=H;try{return G.apply(this,arguments)}finally{f=Q}}}})(ay);ny.exports=ay;var Rk=ny.exports;/**
* @license React
* react-dom.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Ik=si,li=Rk;function Z(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var oy=new Set,_u={};function Kn(i,e){_o(i,e),_o(i+"Capture",e)}function _o(i,e){for(_u[i]=e,i=0;i<e.length;i++)oy.add(e[i])}var Ys=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tp=Object.prototype.hasOwnProperty,Tk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qv={},Zv={};function Nk(i){return Tp.call(Zv,i)?!0:Tp.call(Qv,i)?!1:Tk.test(i)?Zv[i]=!0:(Qv[i]=!0,!1)}function Fk(i,e,t,s){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function Dk(i,e,t,s){if(e===null||typeof e>"u"||Fk(i,e,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Bt(i,e,t,s,r,n,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=i,this.type=e,this.sanitizeURL=n,this.removeEmptyString=a}var bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){bt[i]=new Bt(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];bt[e]=new Bt(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){bt[i]=new Bt(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){bt[i]=new Bt(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){bt[i]=new Bt(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){bt[i]=new Bt(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){bt[i]=new Bt(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){bt[i]=new Bt(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){bt[i]=new Bt(i,5,!1,i.toLowerCase(),null,!1,!1)});var Vg=/[\-:]([a-z])/g;function Gg(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(Vg,Gg);bt[e]=new Bt(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(Vg,Gg);bt[e]=new Bt(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(Vg,Gg);bt[e]=new Bt(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){bt[i]=new Bt(i,1,!1,i.toLowerCase(),null,!1,!1)});bt.xlinkHref=new Bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){bt[i]=new Bt(i,1,!1,i.toLowerCase(),null,!0,!0)});function qg(i,e,t,s){var r=bt.hasOwnProperty(e)?bt[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Dk(e,t,r,s)&&(t=null),s||r===null?Nk(e)&&(t===null?i.removeAttribute(e):i.setAttribute(e,""+t)):r.mustUseProperty?i[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,s=r.attributeNamespace,t===null?i.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,s?i.setAttributeNS(s,e,t):i.setAttribute(e,t))))}var tr=Ik.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ec=Symbol.for("react.element"),La=Symbol.for("react.portal"),Pa=Symbol.for("react.fragment"),Kg=Symbol.for("react.strict_mode"),Np=Symbol.for("react.profiler"),ly=Symbol.for("react.provider"),uy=Symbol.for("react.context"),Xg=Symbol.for("react.forward_ref"),Fp=Symbol.for("react.suspense"),Dp=Symbol.for("react.suspense_list"),Yg=Symbol.for("react.memo"),pr=Symbol.for("react.lazy"),cy=Symbol.for("react.offscreen"),Jv=Symbol.iterator;function Fo(i){return i===null||typeof i!="object"?null:(i=Jv&&i[Jv]||i["@@iterator"],typeof i=="function"?i:null)}var He=Object.assign,Kf;function Xo(i){if(Kf===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Kf=e&&e[1]||""}return`
`+Kf+i}var Xf=!1;function Yf(i,e){if(!i||Xf)return"";Xf=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var s=c}Reflect.construct(i,[],e)}else{try{e.call()}catch(c){s=c}i.call(e.prototype)}else{try{throw Error()}catch(c){s=c}i()}}catch(c){if(c&&s&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),n=s.stack.split(`
`),a=r.length-1,o=n.length-1;1<=a&&0<=o&&r[a]!==n[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==n[o]){if(a!==1||o!==1)do if(a--,o--,0>o||r[a]!==n[o]){var l=`
`+r[a].replace(" at new "," at ");return i.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",i.displayName)),l}while(1<=a&&0<=o);break}}}finally{Xf=!1,Error.prepareStackTrace=t}return(i=i?i.displayName||i.name:"")?Xo(i):""}function Ok(i){switch(i.tag){case 5:return Xo(i.type);case 16:return Xo("Lazy");case 13:return Xo("Suspense");case 19:return Xo("SuspenseList");case 0:case 2:case 15:return i=Yf(i.type,!1),i;case 11:return i=Yf(i.type.render,!1),i;case 1:return i=Yf(i.type,!0),i;default:return""}}function Op(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case Pa:return"Fragment";case La:return"Portal";case Np:return"Profiler";case Kg:return"StrictMode";case Fp:return"Suspense";case Dp:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case uy:return(i.displayName||"Context")+".Consumer";case ly:return(i._context.displayName||"Context")+".Provider";case Xg:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Yg:return e=i.displayName||null,e!==null?e:Op(i.type)||"Memo";case pr:e=i._payload,i=i._init;try{return Op(i(e))}catch{}}return null}function zk(i){var e=i.type;switch(i.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=e.render,i=i.displayName||i.name||"",e.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Op(e);case 8:return e===Kg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vr(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function hy(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Wk(i){var e=hy(i)?"checked":"value",t=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),s=""+i[e];if(!i.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,n=t.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){s=""+a,n.call(this,a)}}),Object.defineProperty(i,e,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(a){s=""+a},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function tc(i){i._valueTracker||(i._valueTracker=Wk(i))}function dy(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var t=e.getValue(),s="";return i&&(s=hy(i)?i.checked?"true":"false":i.value),i=s,i!==t?(e.setValue(i),!0):!1}function dd(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function zp(i,e){var t=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??i._wrapperState.initialChecked})}function eb(i,e){var t=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;t=Vr(e.value!=null?e.value:t),i._wrapperState={initialChecked:s,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function fy(i,e){e=e.checked,e!=null&&qg(i,"checked",e,!1)}function Wp(i,e){fy(i,e);var t=Vr(e.value),s=e.type;if(t!=null)s==="number"?(t===0&&i.value===""||i.value!=t)&&(i.value=""+t):i.value!==""+t&&(i.value=""+t);else if(s==="submit"||s==="reset"){i.removeAttribute("value");return}e.hasOwnProperty("value")?Bp(i,e.type,t):e.hasOwnProperty("defaultValue")&&Bp(i,e.type,Vr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(i.defaultChecked=!!e.defaultChecked)}function tb(i,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+i._wrapperState.initialValue,t||e===i.value||(i.value=e),i.defaultValue=e}t=i.name,t!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,t!==""&&(i.name=t)}function Bp(i,e,t){(e!=="number"||dd(i.ownerDocument)!==i)&&(t==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+t&&(i.defaultValue=""+t))}var Yo=Array.isArray;function no(i,e,t,s){if(i=i.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<i.length;t++)r=e.hasOwnProperty("$"+i[t].value),i[t].selected!==r&&(i[t].selected=r),r&&s&&(i[t].defaultSelected=!0)}else{for(t=""+Vr(t),e=null,r=0;r<i.length;r++){if(i[r].value===t){i[r].selected=!0,s&&(i[r].defaultSelected=!0);return}e!==null||i[r].disabled||(e=i[r])}e!==null&&(e.selected=!0)}}function jp(i,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function ib(i,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Z(92));if(Yo(t)){if(1<t.length)throw Error(Z(93));t=t[0]}e=t}e==null&&(e=""),t=e}i._wrapperState={initialValue:Vr(t)}}function py(i,e){var t=Vr(e.value),s=Vr(e.defaultValue);t!=null&&(t=""+t,t!==i.value&&(i.value=t),e.defaultValue==null&&i.defaultValue!==t&&(i.defaultValue=t)),s!=null&&(i.defaultValue=""+s)}function sb(i){var e=i.textContent;e===i._wrapperState.initialValue&&e!==""&&e!==null&&(i.value=e)}function my(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Up(i,e){return i==null||i==="http://www.w3.org/1999/xhtml"?my(e):i==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var ic,gy=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,s,r){MSApp.execUnsafeLocalFunction(function(){return i(e,t,s,r)})}:i}(function(i,e){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=e;else{for(ic=ic||document.createElement("div"),ic.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ic.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;e.firstChild;)i.appendChild(e.firstChild)}});function ku(i,e){if(e){var t=i.firstChild;if(t&&t===i.lastChild&&t.nodeType===3){t.nodeValue=e;return}}i.textContent=e}var ql={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bk=["Webkit","ms","Moz","O"];Object.keys(ql).forEach(function(i){Bk.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),ql[e]=ql[i]})});function vy(i,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||ql.hasOwnProperty(i)&&ql[i]?(""+e).trim():e+"px"}function by(i,e){i=i.style;for(var t in e)if(e.hasOwnProperty(t)){var s=t.indexOf("--")===0,r=vy(t,e[t],s);t==="float"&&(t="cssFloat"),s?i.setProperty(t,r):i[t]=r}}var jk=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hp(i,e){if(e){if(jk[i]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,i));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function $p(i,e){if(i.indexOf("-")===-1)return typeof e.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vp=null;function Qg(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Gp=null,ao=null,oo=null;function rb(i){if(i=Hu(i)){if(typeof Gp!="function")throw Error(Z(280));var e=i.stateNode;e&&(e=Af(e),Gp(i.stateNode,i.type,e))}}function yy(i){ao?oo?oo.push(i):oo=[i]:ao=i}function wy(){if(ao){var i=ao,e=oo;if(oo=ao=null,rb(i),e)for(i=0;i<e.length;i++)rb(e[i])}}function _y(i,e){return i(e)}function ky(){}var Qf=!1;function xy(i,e,t){if(Qf)return i(e,t);Qf=!0;try{return _y(i,e,t)}finally{Qf=!1,(ao!==null||oo!==null)&&(ky(),wy())}}function xu(i,e){var t=i.stateNode;if(t===null)return null;var s=Af(t);if(s===null)return null;t=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(i=i.type,s=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!s;break e;default:i=!1}if(i)return null;if(t&&typeof t!="function")throw Error(Z(231,e,typeof t));return t}var qp=!1;if(Ys)try{var Do={};Object.defineProperty(Do,"passive",{get:function(){qp=!0}}),window.addEventListener("test",Do,Do),window.removeEventListener("test",Do,Do)}catch{qp=!1}function Uk(i,e,t,s,r,n,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(h){this.onError(h)}}var Kl=!1,fd=null,pd=!1,Kp=null,Hk={onError:function(i){Kl=!0,fd=i}};function $k(i,e,t,s,r,n,a,o,l){Kl=!1,fd=null,Uk.apply(Hk,arguments)}function Vk(i,e,t,s,r,n,a,o,l){if($k.apply(this,arguments),Kl){if(Kl){var c=fd;Kl=!1,fd=null}else throw Error(Z(198));pd||(pd=!0,Kp=c)}}function Xn(i){var e=i,t=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,e.flags&4098&&(t=e.return),i=e.return;while(i)}return e.tag===3?t:null}function Sy(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function nb(i){if(Xn(i)!==i)throw Error(Z(188))}function Gk(i){var e=i.alternate;if(!e){if(e=Xn(i),e===null)throw Error(Z(188));return e!==i?null:i}for(var t=i,s=e;;){var r=t.return;if(r===null)break;var n=r.alternate;if(n===null){if(s=r.return,s!==null){t=s;continue}break}if(r.child===n.child){for(n=r.child;n;){if(n===t)return nb(r),i;if(n===s)return nb(r),e;n=n.sibling}throw Error(Z(188))}if(t.return!==s.return)t=r,s=n;else{for(var a=!1,o=r.child;o;){if(o===t){a=!0,t=r,s=n;break}if(o===s){a=!0,s=r,t=n;break}o=o.sibling}if(!a){for(o=n.child;o;){if(o===t){a=!0,t=n,s=r;break}if(o===s){a=!0,s=n,t=r;break}o=o.sibling}if(!a)throw Error(Z(189))}}if(t.alternate!==s)throw Error(Z(190))}if(t.tag!==3)throw Error(Z(188));return t.stateNode.current===t?i:e}function Ay(i){return i=Gk(i),i!==null?Ey(i):null}function Ey(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var e=Ey(i);if(e!==null)return e;i=i.sibling}return null}var Cy=li.unstable_scheduleCallback,ab=li.unstable_cancelCallback,qk=li.unstable_shouldYield,Kk=li.unstable_requestPaint,Xe=li.unstable_now,Xk=li.unstable_getCurrentPriorityLevel,Zg=li.unstable_ImmediatePriority,My=li.unstable_UserBlockingPriority,md=li.unstable_NormalPriority,Yk=li.unstable_LowPriority,Ly=li.unstable_IdlePriority,_f=null,vs=null;function Qk(i){if(vs&&typeof vs.onCommitFiberRoot=="function")try{vs.onCommitFiberRoot(_f,i,void 0,(i.current.flags&128)===128)}catch{}}var $i=Math.clz32?Math.clz32:ex,Zk=Math.log,Jk=Math.LN2;function ex(i){return i>>>=0,i===0?32:31-(Zk(i)/Jk|0)|0}var sc=64,rc=4194304;function Qo(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function gd(i,e){var t=i.pendingLanes;if(t===0)return 0;var s=0,r=i.suspendedLanes,n=i.pingedLanes,a=t&268435455;if(a!==0){var o=a&~r;o!==0?s=Qo(o):(n&=a,n!==0&&(s=Qo(n)))}else a=t&~r,a!==0?s=Qo(a):n!==0&&(s=Qo(n));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,n=e&-e,r>=n||r===16&&(n&4194240)!==0))return e;if(s&4&&(s|=t&16),e=i.entangledLanes,e!==0)for(i=i.entanglements,e&=s;0<e;)t=31-$i(e),r=1<<t,s|=i[t],e&=~r;return s}function tx(i,e){switch(i){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ix(i,e){for(var t=i.suspendedLanes,s=i.pingedLanes,r=i.expirationTimes,n=i.pendingLanes;0<n;){var a=31-$i(n),o=1<<a,l=r[a];l===-1?(!(o&t)||o&s)&&(r[a]=tx(o,e)):l<=e&&(i.expiredLanes|=o),n&=~o}}function Xp(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Py(){var i=sc;return sc<<=1,!(sc&4194240)&&(sc=64),i}function Zf(i){for(var e=[],t=0;31>t;t++)e.push(i);return e}function ju(i,e,t){i.pendingLanes|=e,e!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,e=31-$i(e),i[e]=t}function sx(i,e){var t=i.pendingLanes&~e;i.pendingLanes=e,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=e,i.mutableReadLanes&=e,i.entangledLanes&=e,e=i.entanglements;var s=i.eventTimes;for(i=i.expirationTimes;0<t;){var r=31-$i(t),n=1<<r;e[r]=0,s[r]=-1,i[r]=-1,t&=~n}}function Jg(i,e){var t=i.entangledLanes|=e;for(i=i.entanglements;t;){var s=31-$i(t),r=1<<s;r&e|i[s]&e&&(i[s]|=e),t&=~r}}var Ce=0;function Ry(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Iy,ev,Ty,Ny,Fy,Yp=!1,nc=[],Or=null,zr=null,Wr=null,Su=new Map,Au=new Map,wr=[],rx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ob(i,e){switch(i){case"focusin":case"focusout":Or=null;break;case"dragenter":case"dragleave":zr=null;break;case"mouseover":case"mouseout":Wr=null;break;case"pointerover":case"pointerout":Su.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Au.delete(e.pointerId)}}function Oo(i,e,t,s,r,n){return i===null||i.nativeEvent!==n?(i={blockedOn:e,domEventName:t,eventSystemFlags:s,nativeEvent:n,targetContainers:[r]},e!==null&&(e=Hu(e),e!==null&&ev(e)),i):(i.eventSystemFlags|=s,e=i.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),i)}function nx(i,e,t,s,r){switch(e){case"focusin":return Or=Oo(Or,i,e,t,s,r),!0;case"dragenter":return zr=Oo(zr,i,e,t,s,r),!0;case"mouseover":return Wr=Oo(Wr,i,e,t,s,r),!0;case"pointerover":var n=r.pointerId;return Su.set(n,Oo(Su.get(n)||null,i,e,t,s,r)),!0;case"gotpointercapture":return n=r.pointerId,Au.set(n,Oo(Au.get(n)||null,i,e,t,s,r)),!0}return!1}function Dy(i){var e=Cn(i.target);if(e!==null){var t=Xn(e);if(t!==null){if(e=t.tag,e===13){if(e=Sy(t),e!==null){i.blockedOn=e,Fy(i.priority,function(){Ty(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){i.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Mc(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var t=Qp(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(t===null){t=i.nativeEvent;var s=new t.constructor(t.type,t);Vp=s,t.target.dispatchEvent(s),Vp=null}else return e=Hu(t),e!==null&&ev(e),i.blockedOn=t,!1;e.shift()}return!0}function lb(i,e,t){Mc(i)&&t.delete(e)}function ax(){Yp=!1,Or!==null&&Mc(Or)&&(Or=null),zr!==null&&Mc(zr)&&(zr=null),Wr!==null&&Mc(Wr)&&(Wr=null),Su.forEach(lb),Au.forEach(lb)}function zo(i,e){i.blockedOn===e&&(i.blockedOn=null,Yp||(Yp=!0,li.unstable_scheduleCallback(li.unstable_NormalPriority,ax)))}function Eu(i){function e(r){return zo(r,i)}if(0<nc.length){zo(nc[0],i);for(var t=1;t<nc.length;t++){var s=nc[t];s.blockedOn===i&&(s.blockedOn=null)}}for(Or!==null&&zo(Or,i),zr!==null&&zo(zr,i),Wr!==null&&zo(Wr,i),Su.forEach(e),Au.forEach(e),t=0;t<wr.length;t++)s=wr[t],s.blockedOn===i&&(s.blockedOn=null);for(;0<wr.length&&(t=wr[0],t.blockedOn===null);)Dy(t),t.blockedOn===null&&wr.shift()}var lo=tr.ReactCurrentBatchConfig,vd=!0;function ox(i,e,t,s){var r=Ce,n=lo.transition;lo.transition=null;try{Ce=1,tv(i,e,t,s)}finally{Ce=r,lo.transition=n}}function lx(i,e,t,s){var r=Ce,n=lo.transition;lo.transition=null;try{Ce=4,tv(i,e,t,s)}finally{Ce=r,lo.transition=n}}function tv(i,e,t,s){if(vd){var r=Qp(i,e,t,s);if(r===null)lp(i,e,s,bd,t),ob(i,s);else if(nx(r,i,e,t,s))s.stopPropagation();else if(ob(i,s),e&4&&-1<rx.indexOf(i)){for(;r!==null;){var n=Hu(r);if(n!==null&&Iy(n),n=Qp(i,e,t,s),n===null&&lp(i,e,s,bd,t),n===r)break;r=n}r!==null&&s.stopPropagation()}else lp(i,e,s,null,t)}}var bd=null;function Qp(i,e,t,s){if(bd=null,i=Qg(s),i=Cn(i),i!==null)if(e=Xn(i),e===null)i=null;else if(t=e.tag,t===13){if(i=Sy(e),i!==null)return i;i=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;i=null}else e!==i&&(i=null);return bd=i,null}function Oy(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xk()){case Zg:return 1;case My:return 4;case md:case Yk:return 16;case Ly:return 536870912;default:return 16}default:return 16}}var Tr=null,iv=null,Lc=null;function zy(){if(Lc)return Lc;var i,e=iv,t=e.length,s,r="value"in Tr?Tr.value:Tr.textContent,n=r.length;for(i=0;i<t&&e[i]===r[i];i++);var a=t-i;for(s=1;s<=a&&e[t-s]===r[n-s];s++);return Lc=r.slice(i,1<s?1-s:void 0)}function Pc(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function ac(){return!0}function ub(){return!1}function ci(i){function e(t,s,r,n,a){this._reactName=t,this._targetInst=r,this.type=s,this.nativeEvent=n,this.target=a,this.currentTarget=null;for(var o in i)i.hasOwnProperty(o)&&(t=i[o],this[o]=t?t(n):n[o]);return this.isDefaultPrevented=(n.defaultPrevented!=null?n.defaultPrevented:n.returnValue===!1)?ac:ub,this.isPropagationStopped=ub,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=ac)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=ac)},persist:function(){},isPersistent:ac}),e}var Po={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sv=ci(Po),Uu=He({},Po,{view:0,detail:0}),ux=ci(Uu),Jf,ep,Wo,kf=He({},Uu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rv,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Wo&&(Wo&&i.type==="mousemove"?(Jf=i.screenX-Wo.screenX,ep=i.screenY-Wo.screenY):ep=Jf=0,Wo=i),Jf)},movementY:function(i){return"movementY"in i?i.movementY:ep}}),cb=ci(kf),cx=He({},kf,{dataTransfer:0}),hx=ci(cx),dx=He({},Uu,{relatedTarget:0}),tp=ci(dx),fx=He({},Po,{animationName:0,elapsedTime:0,pseudoElement:0}),px=ci(fx),mx=He({},Po,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),gx=ci(mx),vx=He({},Po,{data:0}),hb=ci(vx),bx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _x(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=wx[i])?!!e[i]:!1}function rv(){return _x}var kx=He({},Uu,{key:function(i){if(i.key){var e=bx[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=Pc(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?yx[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rv,charCode:function(i){return i.type==="keypress"?Pc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Pc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),xx=ci(kx),Sx=He({},kf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),db=ci(Sx),Ax=He({},Uu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rv}),Ex=ci(Ax),Cx=He({},Po,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mx=ci(Cx),Lx=He({},kf,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Px=ci(Lx),Rx=[9,13,27,32],nv=Ys&&"CompositionEvent"in window,Xl=null;Ys&&"documentMode"in document&&(Xl=document.documentMode);var Ix=Ys&&"TextEvent"in window&&!Xl,Wy=Ys&&(!nv||Xl&&8<Xl&&11>=Xl),fb=" ",pb=!1;function By(i,e){switch(i){case"keyup":return Rx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jy(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ra=!1;function Tx(i,e){switch(i){case"compositionend":return jy(e);case"keypress":return e.which!==32?null:(pb=!0,fb);case"textInput":return i=e.data,i===fb&&pb?null:i;default:return null}}function Nx(i,e){if(Ra)return i==="compositionend"||!nv&&By(i,e)?(i=zy(),Lc=iv=Tr=null,Ra=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Wy&&e.locale!=="ko"?null:e.data;default:return null}}var Fx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mb(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!Fx[i.type]:e==="textarea"}function Uy(i,e,t,s){yy(s),e=yd(e,"onChange"),0<e.length&&(t=new sv("onChange","change",null,t,s),i.push({event:t,listeners:e}))}var Yl=null,Cu=null;function Dx(i){Jy(i,0)}function xf(i){var e=Na(i);if(dy(e))return i}function Ox(i,e){if(i==="change")return e}var Hy=!1;if(Ys){var ip;if(Ys){var sp="oninput"in document;if(!sp){var gb=document.createElement("div");gb.setAttribute("oninput","return;"),sp=typeof gb.oninput=="function"}ip=sp}else ip=!1;Hy=ip&&(!document.documentMode||9<document.documentMode)}function vb(){Yl&&(Yl.detachEvent("onpropertychange",$y),Cu=Yl=null)}function $y(i){if(i.propertyName==="value"&&xf(Cu)){var e=[];Uy(e,Cu,i,Qg(i)),xy(Dx,e)}}function zx(i,e,t){i==="focusin"?(vb(),Yl=e,Cu=t,Yl.attachEvent("onpropertychange",$y)):i==="focusout"&&vb()}function Wx(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return xf(Cu)}function Bx(i,e){if(i==="click")return xf(e)}function jx(i,e){if(i==="input"||i==="change")return xf(e)}function Ux(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var Gi=typeof Object.is=="function"?Object.is:Ux;function Mu(i,e){if(Gi(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var t=Object.keys(i),s=Object.keys(e);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var r=t[s];if(!Tp.call(e,r)||!Gi(i[r],e[r]))return!1}return!0}function bb(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function yb(i,e){var t=bb(i);i=0;for(var s;t;){if(t.nodeType===3){if(s=i+t.textContent.length,i<=e&&s>=e)return{node:t,offset:e-i};i=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=bb(t)}}function Vy(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?Vy(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function Gy(){for(var i=window,e=dd();e instanceof i.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)i=e.contentWindow;else break;e=dd(i.document)}return e}function av(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}function Hx(i){var e=Gy(),t=i.focusedElem,s=i.selectionRange;if(e!==t&&t&&t.ownerDocument&&Vy(t.ownerDocument.documentElement,t)){if(s!==null&&av(t)){if(e=s.start,i=s.end,i===void 0&&(i=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(i,t.value.length);else if(i=(e=t.ownerDocument||document)&&e.defaultView||window,i.getSelection){i=i.getSelection();var r=t.textContent.length,n=Math.min(s.start,r);s=s.end===void 0?n:Math.min(s.end,r),!i.extend&&n>s&&(r=s,s=n,n=r),r=yb(t,n);var a=yb(t,s);r&&a&&(i.rangeCount!==1||i.anchorNode!==r.node||i.anchorOffset!==r.offset||i.focusNode!==a.node||i.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),i.removeAllRanges(),n>s?(i.addRange(e),i.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),i.addRange(e)))}}for(e=[],i=t;i=i.parentNode;)i.nodeType===1&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)i=e[t],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var $x=Ys&&"documentMode"in document&&11>=document.documentMode,Ia=null,Zp=null,Ql=null,Jp=!1;function wb(i,e,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Jp||Ia==null||Ia!==dd(s)||(s=Ia,"selectionStart"in s&&av(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ql&&Mu(Ql,s)||(Ql=s,s=yd(Zp,"onSelect"),0<s.length&&(e=new sv("onSelect","select",null,e,t),i.push({event:e,listeners:s}),e.target=Ia)))}function oc(i,e){var t={};return t[i.toLowerCase()]=e.toLowerCase(),t["Webkit"+i]="webkit"+e,t["Moz"+i]="moz"+e,t}var Ta={animationend:oc("Animation","AnimationEnd"),animationiteration:oc("Animation","AnimationIteration"),animationstart:oc("Animation","AnimationStart"),transitionend:oc("Transition","TransitionEnd")},rp={},qy={};Ys&&(qy=document.createElement("div").style,"AnimationEvent"in window||(delete Ta.animationend.animation,delete Ta.animationiteration.animation,delete Ta.animationstart.animation),"TransitionEvent"in window||delete Ta.transitionend.transition);function Sf(i){if(rp[i])return rp[i];if(!Ta[i])return i;var e=Ta[i],t;for(t in e)if(e.hasOwnProperty(t)&&t in qy)return rp[i]=e[t];return i}var Ky=Sf("animationend"),Xy=Sf("animationiteration"),Yy=Sf("animationstart"),Qy=Sf("transitionend"),Zy=new Map,_b="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kr(i,e){Zy.set(i,e),Kn(e,[i])}for(var np=0;np<_b.length;np++){var ap=_b[np],Vx=ap.toLowerCase(),Gx=ap[0].toUpperCase()+ap.slice(1);Kr(Vx,"on"+Gx)}Kr(Ky,"onAnimationEnd");Kr(Xy,"onAnimationIteration");Kr(Yy,"onAnimationStart");Kr("dblclick","onDoubleClick");Kr("focusin","onFocus");Kr("focusout","onBlur");Kr(Qy,"onTransitionEnd");_o("onMouseEnter",["mouseout","mouseover"]);_o("onMouseLeave",["mouseout","mouseover"]);_o("onPointerEnter",["pointerout","pointerover"]);_o("onPointerLeave",["pointerout","pointerover"]);Kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zo));function kb(i,e,t){var s=i.type||"unknown-event";i.currentTarget=t,Vk(s,e,void 0,i),i.currentTarget=null}function Jy(i,e){e=(e&4)!==0;for(var t=0;t<i.length;t++){var s=i[t],r=s.event;s=s.listeners;e:{var n=void 0;if(e)for(var a=s.length-1;0<=a;a--){var o=s[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==n&&r.isPropagationStopped())break e;kb(r,o,c),n=l}else for(a=0;a<s.length;a++){if(o=s[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==n&&r.isPropagationStopped())break e;kb(r,o,c),n=l}}}if(pd)throw i=Kp,pd=!1,Kp=null,i}function Ne(i,e){var t=e[rm];t===void 0&&(t=e[rm]=new Set);var s=i+"__bubble";t.has(s)||(ew(e,i,2,!1),t.add(s))}function op(i,e,t){var s=0;e&&(s|=4),ew(t,i,s,e)}var lc="_reactListening"+Math.random().toString(36).slice(2);function Lu(i){if(!i[lc]){i[lc]=!0,oy.forEach(function(t){t!=="selectionchange"&&(qx.has(t)||op(t,!1,i),op(t,!0,i))});var e=i.nodeType===9?i:i.ownerDocument;e===null||e[lc]||(e[lc]=!0,op("selectionchange",!1,e))}}function ew(i,e,t,s){switch(Oy(e)){case 1:var r=ox;break;case 4:r=lx;break;default:r=tv}t=r.bind(null,e,t,i),r=void 0,!qp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?i.addEventListener(e,t,{capture:!0,passive:r}):i.addEventListener(e,t,!0):r!==void 0?i.addEventListener(e,t,{passive:r}):i.addEventListener(e,t,!1)}function lp(i,e,t,s,r){var n=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var o=s.stateNode.containerInfo;if(o===r||o.nodeType===8&&o.parentNode===r)break;if(a===4)for(a=s.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;a=a.return}for(;o!==null;){if(a=Cn(o),a===null)return;if(l=a.tag,l===5||l===6){s=n=a;continue e}o=o.parentNode}}s=s.return}xy(function(){var c=n,h=Qg(t),d=[];e:{var f=Zy.get(i);if(f!==void 0){var p=sv,v=i;switch(i){case"keypress":if(Pc(t)===0)break e;case"keydown":case"keyup":p=xx;break;case"focusin":v="focus",p=tp;break;case"focusout":v="blur",p=tp;break;case"beforeblur":case"afterblur":p=tp;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=cb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=hx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Ex;break;case Ky:case Xy:case Yy:p=px;break;case Qy:p=Mx;break;case"scroll":p=ux;break;case"wheel":p=Px;break;case"copy":case"cut":case"paste":p=gx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=db}var m=(e&4)!==0,y=!m&&i==="scroll",g=m?f!==null?f+"Capture":null:f;m=[];for(var b=c,w;b!==null;){w=b;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,g!==null&&(S=xu(b,g),S!=null&&m.push(Pu(b,S,w)))),y)break;b=b.return}0<m.length&&(f=new p(f,v,null,t,h),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=i==="mouseover"||i==="pointerover",p=i==="mouseout"||i==="pointerout",f&&t!==Vp&&(v=t.relatedTarget||t.fromElement)&&(Cn(v)||v[Qs]))break e;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(v=t.relatedTarget||t.toElement,p=c,v=v?Cn(v):null,v!==null&&(y=Xn(v),v!==y||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=c),p!==v)){if(m=cb,S="onMouseLeave",g="onMouseEnter",b="mouse",(i==="pointerout"||i==="pointerover")&&(m=db,S="onPointerLeave",g="onPointerEnter",b="pointer"),y=p==null?f:Na(p),w=v==null?f:Na(v),f=new m(S,b+"leave",p,t,h),f.target=y,f.relatedTarget=w,S=null,Cn(h)===c&&(m=new m(g,b+"enter",v,t,h),m.target=w,m.relatedTarget=y,S=m),y=S,p&&v)t:{for(m=p,g=v,b=0,w=m;w;w=Jn(w))b++;for(w=0,S=g;S;S=Jn(S))w++;for(;0<b-w;)m=Jn(m),b--;for(;0<w-b;)g=Jn(g),w--;for(;b--;){if(m===g||g!==null&&m===g.alternate)break t;m=Jn(m),g=Jn(g)}m=null}else m=null;p!==null&&xb(d,f,p,m,!1),v!==null&&y!==null&&xb(d,y,v,m,!0)}}e:{if(f=c?Na(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var C=Ox;else if(mb(f))if(Hy)C=jx;else{C=Wx;var I=zx}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=Bx);if(C&&(C=C(i,c))){Uy(d,C,t,h);break e}I&&I(i,f,c),i==="focusout"&&(I=f._wrapperState)&&I.controlled&&f.type==="number"&&Bp(f,"number",f.value)}switch(I=c?Na(c):window,i){case"focusin":(mb(I)||I.contentEditable==="true")&&(Ia=I,Zp=c,Ql=null);break;case"focusout":Ql=Zp=Ia=null;break;case"mousedown":Jp=!0;break;case"contextmenu":case"mouseup":case"dragend":Jp=!1,wb(d,t,h);break;case"selectionchange":if($x)break;case"keydown":case"keyup":wb(d,t,h)}var P;if(nv)e:{switch(i){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Ra?By(i,t)&&(N="onCompositionEnd"):i==="keydown"&&t.keyCode===229&&(N="onCompositionStart");N&&(Wy&&t.locale!=="ko"&&(Ra||N!=="onCompositionStart"?N==="onCompositionEnd"&&Ra&&(P=zy()):(Tr=h,iv="value"in Tr?Tr.value:Tr.textContent,Ra=!0)),I=yd(c,N),0<I.length&&(N=new hb(N,i,null,t,h),d.push({event:N,listeners:I}),P?N.data=P:(P=jy(t),P!==null&&(N.data=P)))),(P=Ix?Tx(i,t):Nx(i,t))&&(c=yd(c,"onBeforeInput"),0<c.length&&(h=new hb("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:c}),h.data=P))}Jy(d,e)})}function Pu(i,e,t){return{instance:i,listener:e,currentTarget:t}}function yd(i,e){for(var t=e+"Capture",s=[];i!==null;){var r=i,n=r.stateNode;r.tag===5&&n!==null&&(r=n,n=xu(i,t),n!=null&&s.unshift(Pu(i,n,r)),n=xu(i,e),n!=null&&s.push(Pu(i,n,r))),i=i.return}return s}function Jn(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function xb(i,e,t,s,r){for(var n=e._reactName,a=[];t!==null&&t!==s;){var o=t,l=o.alternate,c=o.stateNode;if(l!==null&&l===s)break;o.tag===5&&c!==null&&(o=c,r?(l=xu(t,n),l!=null&&a.unshift(Pu(t,l,o))):r||(l=xu(t,n),l!=null&&a.push(Pu(t,l,o)))),t=t.return}a.length!==0&&i.push({event:e,listeners:a})}var Kx=/\r\n?/g,Xx=/\u0000|\uFFFD/g;function Sb(i){return(typeof i=="string"?i:""+i).replace(Kx,`
`).replace(Xx,"")}function uc(i,e,t){if(e=Sb(e),Sb(i)!==e&&t)throw Error(Z(425))}function wd(){}var em=null,tm=null;function im(i,e){return i==="textarea"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sm=typeof setTimeout=="function"?setTimeout:void 0,Yx=typeof clearTimeout=="function"?clearTimeout:void 0,Ab=typeof Promise=="function"?Promise:void 0,Qx=typeof queueMicrotask=="function"?queueMicrotask:typeof Ab<"u"?function(i){return Ab.resolve(null).then(i).catch(Zx)}:sm;function Zx(i){setTimeout(function(){throw i})}function up(i,e){var t=e,s=0;do{var r=t.nextSibling;if(i.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(s===0){i.removeChild(r),Eu(e);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=r}while(t);Eu(e)}function Br(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break;if(e===8){if(e=i.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return i}function Eb(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return i;e--}else t==="/$"&&e++}i=i.previousSibling}return null}var Ro=Math.random().toString(36).slice(2),ps="__reactFiber$"+Ro,Ru="__reactProps$"+Ro,Qs="__reactContainer$"+Ro,rm="__reactEvents$"+Ro,Jx="__reactListeners$"+Ro,eS="__reactHandles$"+Ro;function Cn(i){var e=i[ps];if(e)return e;for(var t=i.parentNode;t;){if(e=t[Qs]||t[ps]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(i=Eb(i);i!==null;){if(t=i[ps])return t;i=Eb(i)}return e}i=t,t=i.parentNode}return null}function Hu(i){return i=i[ps]||i[Qs],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Na(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(Z(33))}function Af(i){return i[Ru]||null}var nm=[],Fa=-1;function Xr(i){return{current:i}}function De(i){0>Fa||(i.current=nm[Fa],nm[Fa]=null,Fa--)}function Te(i,e){Fa++,nm[Fa]=i.current,i.current=e}var Gr={},It=Xr(Gr),Xt=Xr(!1),jn=Gr;function ko(i,e){var t=i.type.contextTypes;if(!t)return Gr;var s=i.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},n;for(n in t)r[n]=e[n];return s&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=e,i.__reactInternalMemoizedMaskedChildContext=r),r}function Yt(i){return i=i.childContextTypes,i!=null}function _d(){De(Xt),De(It)}function Cb(i,e,t){if(It.current!==Gr)throw Error(Z(168));Te(It,e),Te(Xt,t)}function tw(i,e,t){var s=i.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(Z(108,zk(i)||"Unknown",r));return He({},t,s)}function kd(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Gr,jn=It.current,Te(It,i),Te(Xt,Xt.current),!0}function Mb(i,e,t){var s=i.stateNode;if(!s)throw Error(Z(169));t?(i=tw(i,e,jn),s.__reactInternalMemoizedMergedChildContext=i,De(Xt),De(It),Te(It,i)):De(Xt),Te(Xt,t)}var Ws=null,Ef=!1,cp=!1;function iw(i){Ws===null?Ws=[i]:Ws.push(i)}function tS(i){Ef=!0,iw(i)}function Yr(){if(!cp&&Ws!==null){cp=!0;var i=0,e=Ce;try{var t=Ws;for(Ce=1;i<t.length;i++){var s=t[i];do s=s(!0);while(s!==null)}Ws=null,Ef=!1}catch(r){throw Ws!==null&&(Ws=Ws.slice(i+1)),Cy(Zg,Yr),r}finally{Ce=e,cp=!1}}return null}var Da=[],Oa=0,xd=null,Sd=0,Ai=[],Ei=0,Un=null,qs=1,Ks="";function Jr(i,e){Da[Oa++]=Sd,Da[Oa++]=xd,xd=i,Sd=e}function sw(i,e,t){Ai[Ei++]=qs,Ai[Ei++]=Ks,Ai[Ei++]=Un,Un=i;var s=qs;i=Ks;var r=32-$i(s)-1;s&=~(1<<r),t+=1;var n=32-$i(e)+r;if(30<n){var a=r-r%5;n=(s&(1<<a)-1).toString(32),s>>=a,r-=a,qs=1<<32-$i(e)+r|t<<r|s,Ks=n+i}else qs=1<<n|t<<r|s,Ks=i}function ov(i){i.return!==null&&(Jr(i,1),sw(i,1,0))}function lv(i){for(;i===xd;)xd=Da[--Oa],Da[Oa]=null,Sd=Da[--Oa],Da[Oa]=null;for(;i===Un;)Un=Ai[--Ei],Ai[Ei]=null,Ks=Ai[--Ei],Ai[Ei]=null,qs=Ai[--Ei],Ai[Ei]=null}var oi=null,ai=null,ze=!1,Hi=null;function rw(i,e){var t=Ci(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=i,e=i.deletions,e===null?(i.deletions=[t],i.flags|=16):e.push(t)}function Lb(i,e){switch(i.tag){case 5:var t=i.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(i.stateNode=e,oi=i,ai=Br(e.firstChild),!0):!1;case 6:return e=i.pendingProps===""||e.nodeType!==3?null:e,e!==null?(i.stateNode=e,oi=i,ai=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Un!==null?{id:qs,overflow:Ks}:null,i.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Ci(18,null,null,0),t.stateNode=e,t.return=i,i.child=t,oi=i,ai=null,!0):!1;default:return!1}}function am(i){return(i.mode&1)!==0&&(i.flags&128)===0}function om(i){if(ze){var e=ai;if(e){var t=e;if(!Lb(i,e)){if(am(i))throw Error(Z(418));e=Br(t.nextSibling);var s=oi;e&&Lb(i,e)?rw(s,t):(i.flags=i.flags&-4097|2,ze=!1,oi=i)}}else{if(am(i))throw Error(Z(418));i.flags=i.flags&-4097|2,ze=!1,oi=i}}}function Pb(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;oi=i}function cc(i){if(i!==oi)return!1;if(!ze)return Pb(i),ze=!0,!1;var e;if((e=i.tag!==3)&&!(e=i.tag!==5)&&(e=i.type,e=e!=="head"&&e!=="body"&&!im(i.type,i.memoizedProps)),e&&(e=ai)){if(am(i))throw nw(),Error(Z(418));for(;e;)rw(i,e),e=Br(e.nextSibling)}if(Pb(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Z(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="/$"){if(e===0){ai=Br(i.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}i=i.nextSibling}ai=null}}else ai=oi?Br(i.stateNode.nextSibling):null;return!0}function nw(){for(var i=ai;i;)i=Br(i.nextSibling)}function xo(){ai=oi=null,ze=!1}function uv(i){Hi===null?Hi=[i]:Hi.push(i)}var iS=tr.ReactCurrentBatchConfig;function Bo(i,e,t){if(i=t.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Z(309));var s=t.stateNode}if(!s)throw Error(Z(147,i));var r=s,n=""+i;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===n?e.ref:(e=function(a){var o=r.refs;a===null?delete o[n]:o[n]=a},e._stringRef=n,e)}if(typeof i!="string")throw Error(Z(284));if(!t._owner)throw Error(Z(290,i))}return i}function hc(i,e){throw i=Object.prototype.toString.call(e),Error(Z(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i))}function Rb(i){var e=i._init;return e(i._payload)}function aw(i){function e(g,b){if(i){var w=g.deletions;w===null?(g.deletions=[b],g.flags|=16):w.push(b)}}function t(g,b){if(!i)return null;for(;b!==null;)e(g,b),b=b.sibling;return null}function s(g,b){for(g=new Map;b!==null;)b.key!==null?g.set(b.key,b):g.set(b.index,b),b=b.sibling;return g}function r(g,b){return g=$r(g,b),g.index=0,g.sibling=null,g}function n(g,b,w){return g.index=w,i?(w=g.alternate,w!==null?(w=w.index,w<b?(g.flags|=2,b):w):(g.flags|=2,b)):(g.flags|=1048576,b)}function a(g){return i&&g.alternate===null&&(g.flags|=2),g}function o(g,b,w,S){return b===null||b.tag!==6?(b=vp(w,g.mode,S),b.return=g,b):(b=r(b,w),b.return=g,b)}function l(g,b,w,S){var C=w.type;return C===Pa?h(g,b,w.props.children,S,w.key):b!==null&&(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===pr&&Rb(C)===b.type)?(S=r(b,w.props),S.ref=Bo(g,b,w),S.return=g,S):(S=Oc(w.type,w.key,w.props,null,g.mode,S),S.ref=Bo(g,b,w),S.return=g,S)}function c(g,b,w,S){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=bp(w,g.mode,S),b.return=g,b):(b=r(b,w.children||[]),b.return=g,b)}function h(g,b,w,S,C){return b===null||b.tag!==7?(b=Bn(w,g.mode,S,C),b.return=g,b):(b=r(b,w),b.return=g,b)}function d(g,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=vp(""+b,g.mode,w),b.return=g,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ec:return w=Oc(b.type,b.key,b.props,null,g.mode,w),w.ref=Bo(g,null,b),w.return=g,w;case La:return b=bp(b,g.mode,w),b.return=g,b;case pr:var S=b._init;return d(g,S(b._payload),w)}if(Yo(b)||Fo(b))return b=Bn(b,g.mode,w,null),b.return=g,b;hc(g,b)}return null}function f(g,b,w,S){var C=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:o(g,b,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ec:return w.key===C?l(g,b,w,S):null;case La:return w.key===C?c(g,b,w,S):null;case pr:return C=w._init,f(g,b,C(w._payload),S)}if(Yo(w)||Fo(w))return C!==null?null:h(g,b,w,S,null);hc(g,w)}return null}function p(g,b,w,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(w)||null,o(b,g,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ec:return g=g.get(S.key===null?w:S.key)||null,l(b,g,S,C);case La:return g=g.get(S.key===null?w:S.key)||null,c(b,g,S,C);case pr:var I=S._init;return p(g,b,w,I(S._payload),C)}if(Yo(S)||Fo(S))return g=g.get(w)||null,h(b,g,S,C,null);hc(b,S)}return null}function v(g,b,w,S){for(var C=null,I=null,P=b,N=b=0,F=null;P!==null&&N<w.length;N++){P.index>N?(F=P,P=null):F=P.sibling;var T=f(g,P,w[N],S);if(T===null){P===null&&(P=F);break}i&&P&&T.alternate===null&&e(g,P),b=n(T,b,N),I===null?C=T:I.sibling=T,I=T,P=F}if(N===w.length)return t(g,P),ze&&Jr(g,N),C;if(P===null){for(;N<w.length;N++)P=d(g,w[N],S),P!==null&&(b=n(P,b,N),I===null?C=P:I.sibling=P,I=P);return ze&&Jr(g,N),C}for(P=s(g,P);N<w.length;N++)F=p(P,g,N,w[N],S),F!==null&&(i&&F.alternate!==null&&P.delete(F.key===null?N:F.key),b=n(F,b,N),I===null?C=F:I.sibling=F,I=F);return i&&P.forEach(function(V){return e(g,V)}),ze&&Jr(g,N),C}function m(g,b,w,S){var C=Fo(w);if(typeof C!="function")throw Error(Z(150));if(w=C.call(w),w==null)throw Error(Z(151));for(var I=C=null,P=b,N=b=0,F=null,T=w.next();P!==null&&!T.done;N++,T=w.next()){P.index>N?(F=P,P=null):F=P.sibling;var V=f(g,P,T.value,S);if(V===null){P===null&&(P=F);break}i&&P&&V.alternate===null&&e(g,P),b=n(V,b,N),I===null?C=V:I.sibling=V,I=V,P=F}if(T.done)return t(g,P),ze&&Jr(g,N),C;if(P===null){for(;!T.done;N++,T=w.next())T=d(g,T.value,S),T!==null&&(b=n(T,b,N),I===null?C=T:I.sibling=T,I=T);return ze&&Jr(g,N),C}for(P=s(g,P);!T.done;N++,T=w.next())T=p(P,g,N,T.value,S),T!==null&&(i&&T.alternate!==null&&P.delete(T.key===null?N:T.key),b=n(T,b,N),I===null?C=T:I.sibling=T,I=T);return i&&P.forEach(function(L){return e(g,L)}),ze&&Jr(g,N),C}function y(g,b,w,S){if(typeof w=="object"&&w!==null&&w.type===Pa&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case ec:e:{for(var C=w.key,I=b;I!==null;){if(I.key===C){if(C=w.type,C===Pa){if(I.tag===7){t(g,I.sibling),b=r(I,w.props.children),b.return=g,g=b;break e}}else if(I.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===pr&&Rb(C)===I.type){t(g,I.sibling),b=r(I,w.props),b.ref=Bo(g,I,w),b.return=g,g=b;break e}t(g,I);break}else e(g,I);I=I.sibling}w.type===Pa?(b=Bn(w.props.children,g.mode,S,w.key),b.return=g,g=b):(S=Oc(w.type,w.key,w.props,null,g.mode,S),S.ref=Bo(g,b,w),S.return=g,g=S)}return a(g);case La:e:{for(I=w.key;b!==null;){if(b.key===I)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){t(g,b.sibling),b=r(b,w.children||[]),b.return=g,g=b;break e}else{t(g,b);break}else e(g,b);b=b.sibling}b=bp(w,g.mode,S),b.return=g,g=b}return a(g);case pr:return I=w._init,y(g,b,I(w._payload),S)}if(Yo(w))return v(g,b,w,S);if(Fo(w))return m(g,b,w,S);hc(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(t(g,b.sibling),b=r(b,w),b.return=g,g=b):(t(g,b),b=vp(w,g.mode,S),b.return=g,g=b),a(g)):t(g,b)}return y}var So=aw(!0),ow=aw(!1),Ad=Xr(null),Ed=null,za=null,cv=null;function hv(){cv=za=Ed=null}function dv(i){var e=Ad.current;De(Ad),i._currentValue=e}function lm(i,e,t){for(;i!==null;){var s=i.alternate;if((i.childLanes&e)!==e?(i.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),i===t)break;i=i.return}}function uo(i,e){Ed=i,cv=za=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&e&&(Kt=!0),i.firstContext=null)}function Pi(i){var e=i._currentValue;if(cv!==i)if(i={context:i,memoizedValue:e,next:null},za===null){if(Ed===null)throw Error(Z(308));za=i,Ed.dependencies={lanes:0,firstContext:i}}else za=za.next=i;return e}var Mn=null;function fv(i){Mn===null?Mn=[i]:Mn.push(i)}function lw(i,e,t,s){var r=e.interleaved;return r===null?(t.next=t,fv(e)):(t.next=r.next,r.next=t),e.interleaved=t,Zs(i,s)}function Zs(i,e){i.lanes|=e;var t=i.alternate;for(t!==null&&(t.lanes|=e),t=i,i=i.return;i!==null;)i.childLanes|=e,t=i.alternate,t!==null&&(t.childLanes|=e),t=i,i=i.return;return t.tag===3?t.stateNode:null}var mr=!1;function pv(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uw(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Xs(i,e){return{eventTime:i,lane:e,tag:0,payload:null,callback:null,next:null}}function jr(i,e,t){var s=i.updateQueue;if(s===null)return null;if(s=s.shared,Ae&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,Zs(i,t)}return r=s.interleaved,r===null?(e.next=e,fv(s)):(e.next=r.next,r.next=e),s.interleaved=e,Zs(i,t)}function Rc(i,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var s=e.lanes;s&=i.pendingLanes,t|=s,e.lanes=t,Jg(i,t)}}function Ib(i,e){var t=i.updateQueue,s=i.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var r=null,n=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};n===null?r=n=a:n=n.next=a,t=t.next}while(t!==null);n===null?r=n=e:n=n.next=e}else r=n=e;t={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:n,shared:s.shared,effects:s.effects},i.updateQueue=t;return}i=t.lastBaseUpdate,i===null?t.firstBaseUpdate=e:i.next=e,t.lastBaseUpdate=e}function Cd(i,e,t,s){var r=i.updateQueue;mr=!1;var n=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?n=c:a.next=c,a=l;var h=i.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=l))}if(n!==null){var d=r.baseState;a=0,h=c=l=null,o=n;do{var f=o.lane,p=o.eventTime;if((s&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=i,m=o;switch(f=e,p=t,m.tag){case 1:if(v=m.payload,typeof v=="function"){d=v.call(p,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=m.payload,f=typeof v=="function"?v.call(p,d,f):v,f==null)break e;d=He({},d,f);break e;case 2:mr=!0}}o.callback!==null&&o.lane!==0&&(i.flags|=64,f=r.effects,f===null?r.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(c=h=p,l=d):h=h.next=p,a|=f;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;f=o,o=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else n===null&&(r.shared.lanes=0);$n|=a,i.lanes=a,i.memoizedState=d}}function Tb(i,e,t){if(i=e.effects,e.effects=null,i!==null)for(e=0;e<i.length;e++){var s=i[e],r=s.callback;if(r!==null){if(s.callback=null,s=t,typeof r!="function")throw Error(Z(191,r));r.call(s)}}}var $u={},bs=Xr($u),Iu=Xr($u),Tu=Xr($u);function Ln(i){if(i===$u)throw Error(Z(174));return i}function mv(i,e){switch(Te(Tu,e),Te(Iu,i),Te(bs,$u),i=e.nodeType,i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Up(null,"");break;default:i=i===8?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=Up(e,i)}De(bs),Te(bs,e)}function Ao(){De(bs),De(Iu),De(Tu)}function cw(i){Ln(Tu.current);var e=Ln(bs.current),t=Up(e,i.type);e!==t&&(Te(Iu,i),Te(bs,t))}function gv(i){Iu.current===i&&(De(bs),De(Iu))}var je=Xr(0);function Md(i){for(var e=i;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hp=[];function vv(){for(var i=0;i<hp.length;i++)hp[i]._workInProgressVersionPrimary=null;hp.length=0}var Ic=tr.ReactCurrentDispatcher,dp=tr.ReactCurrentBatchConfig,Hn=0,Ue=null,it=null,ht=null,Ld=!1,Zl=!1,Nu=0,sS=0;function yt(){throw Error(Z(321))}function bv(i,e){if(e===null)return!1;for(var t=0;t<e.length&&t<i.length;t++)if(!Gi(i[t],e[t]))return!1;return!0}function yv(i,e,t,s,r,n){if(Hn=n,Ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ic.current=i===null||i.memoizedState===null?oS:lS,i=t(s,r),Zl){n=0;do{if(Zl=!1,Nu=0,25<=n)throw Error(Z(301));n+=1,ht=it=null,e.updateQueue=null,Ic.current=uS,i=t(s,r)}while(Zl)}if(Ic.current=Pd,e=it!==null&&it.next!==null,Hn=0,ht=it=Ue=null,Ld=!1,e)throw Error(Z(300));return i}function wv(){var i=Nu!==0;return Nu=0,i}function es(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?Ue.memoizedState=ht=i:ht=ht.next=i,ht}function Ri(){if(it===null){var i=Ue.alternate;i=i!==null?i.memoizedState:null}else i=it.next;var e=ht===null?Ue.memoizedState:ht.next;if(e!==null)ht=e,it=i;else{if(i===null)throw Error(Z(310));it=i,i={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},ht===null?Ue.memoizedState=ht=i:ht=ht.next=i}return ht}function Fu(i,e){return typeof e=="function"?e(i):e}function fp(i){var e=Ri(),t=e.queue;if(t===null)throw Error(Z(311));t.lastRenderedReducer=i;var s=it,r=s.baseQueue,n=t.pending;if(n!==null){if(r!==null){var a=r.next;r.next=n.next,n.next=a}s.baseQueue=r=n,t.pending=null}if(r!==null){n=r.next,s=s.baseState;var o=a=null,l=null,c=n;do{var h=c.lane;if((Hn&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),s=c.hasEagerState?c.eagerState:i(s,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=d,a=s):l=l.next=d,Ue.lanes|=h,$n|=h}c=c.next}while(c!==null&&c!==n);l===null?a=s:l.next=o,Gi(s,e.memoizedState)||(Kt=!0),e.memoizedState=s,e.baseState=a,e.baseQueue=l,t.lastRenderedState=s}if(i=t.interleaved,i!==null){r=i;do n=r.lane,Ue.lanes|=n,$n|=n,r=r.next;while(r!==i)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function pp(i){var e=Ri(),t=e.queue;if(t===null)throw Error(Z(311));t.lastRenderedReducer=i;var s=t.dispatch,r=t.pending,n=e.memoizedState;if(r!==null){t.pending=null;var a=r=r.next;do n=i(n,a.action),a=a.next;while(a!==r);Gi(n,e.memoizedState)||(Kt=!0),e.memoizedState=n,e.baseQueue===null&&(e.baseState=n),t.lastRenderedState=n}return[n,s]}function hw(){}function dw(i,e){var t=Ue,s=Ri(),r=e(),n=!Gi(s.memoizedState,r);if(n&&(s.memoizedState=r,Kt=!0),s=s.queue,_v(mw.bind(null,t,s,i),[i]),s.getSnapshot!==e||n||ht!==null&&ht.memoizedState.tag&1){if(t.flags|=2048,Du(9,pw.bind(null,t,s,r,e),void 0,null),dt===null)throw Error(Z(349));Hn&30||fw(t,e,r)}return r}function fw(i,e,t){i.flags|=16384,i={getSnapshot:e,value:t},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.stores=[i]):(t=e.stores,t===null?e.stores=[i]:t.push(i))}function pw(i,e,t,s){e.value=t,e.getSnapshot=s,gw(e)&&vw(i)}function mw(i,e,t){return t(function(){gw(e)&&vw(i)})}function gw(i){var e=i.getSnapshot;i=i.value;try{var t=e();return!Gi(i,t)}catch{return!0}}function vw(i){var e=Zs(i,1);e!==null&&Vi(e,i,1,-1)}function Nb(i){var e=es();return typeof i=="function"&&(i=i()),e.memoizedState=e.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fu,lastRenderedState:i},e.queue=i,i=i.dispatch=aS.bind(null,Ue,i),[e.memoizedState,i]}function Du(i,e,t,s){return i={tag:i,create:e,destroy:t,deps:s,next:null},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.lastEffect=i.next=i):(t=e.lastEffect,t===null?e.lastEffect=i.next=i:(s=t.next,t.next=i,i.next=s,e.lastEffect=i)),i}function bw(){return Ri().memoizedState}function Tc(i,e,t,s){var r=es();Ue.flags|=i,r.memoizedState=Du(1|e,t,void 0,s===void 0?null:s)}function Cf(i,e,t,s){var r=Ri();s=s===void 0?null:s;var n=void 0;if(it!==null){var a=it.memoizedState;if(n=a.destroy,s!==null&&bv(s,a.deps)){r.memoizedState=Du(e,t,n,s);return}}Ue.flags|=i,r.memoizedState=Du(1|e,t,n,s)}function Fb(i,e){return Tc(8390656,8,i,e)}function _v(i,e){return Cf(2048,8,i,e)}function yw(i,e){return Cf(4,2,i,e)}function ww(i,e){return Cf(4,4,i,e)}function _w(i,e){if(typeof e=="function")return i=i(),e(i),function(){e(null)};if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function kw(i,e,t){return t=t!=null?t.concat([i]):null,Cf(4,4,_w.bind(null,e,i),t)}function kv(){}function xw(i,e){var t=Ri();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&bv(e,s[1])?s[0]:(t.memoizedState=[i,e],i)}function Sw(i,e){var t=Ri();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&bv(e,s[1])?s[0]:(i=i(),t.memoizedState=[i,e],i)}function Aw(i,e,t){return Hn&21?(Gi(t,e)||(t=Py(),Ue.lanes|=t,$n|=t,i.baseState=!0),e):(i.baseState&&(i.baseState=!1,Kt=!0),i.memoizedState=t)}function rS(i,e){var t=Ce;Ce=t!==0&&4>t?t:4,i(!0);var s=dp.transition;dp.transition={};try{i(!1),e()}finally{Ce=t,dp.transition=s}}function Ew(){return Ri().memoizedState}function nS(i,e,t){var s=Hr(i);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},Cw(i))Mw(e,t);else if(t=lw(i,e,t,s),t!==null){var r=zt();Vi(t,i,s,r),Lw(t,e,s)}}function aS(i,e,t){var s=Hr(i),r={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if(Cw(i))Mw(e,r);else{var n=i.alternate;if(i.lanes===0&&(n===null||n.lanes===0)&&(n=e.lastRenderedReducer,n!==null))try{var a=e.lastRenderedState,o=n(a,t);if(r.hasEagerState=!0,r.eagerState=o,Gi(o,a)){var l=e.interleaved;l===null?(r.next=r,fv(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=lw(i,e,r,s),t!==null&&(r=zt(),Vi(t,i,s,r),Lw(t,e,s))}}function Cw(i){var e=i.alternate;return i===Ue||e!==null&&e===Ue}function Mw(i,e){Zl=Ld=!0;var t=i.pending;t===null?e.next=e:(e.next=t.next,t.next=e),i.pending=e}function Lw(i,e,t){if(t&4194240){var s=e.lanes;s&=i.pendingLanes,t|=s,e.lanes=t,Jg(i,t)}}var Pd={readContext:Pi,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},oS={readContext:Pi,useCallback:function(i,e){return es().memoizedState=[i,e===void 0?null:e],i},useContext:Pi,useEffect:Fb,useImperativeHandle:function(i,e,t){return t=t!=null?t.concat([i]):null,Tc(4194308,4,_w.bind(null,e,i),t)},useLayoutEffect:function(i,e){return Tc(4194308,4,i,e)},useInsertionEffect:function(i,e){return Tc(4,2,i,e)},useMemo:function(i,e){var t=es();return e=e===void 0?null:e,i=i(),t.memoizedState=[i,e],i},useReducer:function(i,e,t){var s=es();return e=t!==void 0?t(e):e,s.memoizedState=s.baseState=e,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:e},s.queue=i,i=i.dispatch=nS.bind(null,Ue,i),[s.memoizedState,i]},useRef:function(i){var e=es();return i={current:i},e.memoizedState=i},useState:Nb,useDebugValue:kv,useDeferredValue:function(i){return es().memoizedState=i},useTransition:function(){var i=Nb(!1),e=i[0];return i=rS.bind(null,i[1]),es().memoizedState=i,[e,i]},useMutableSource:function(){},useSyncExternalStore:function(i,e,t){var s=Ue,r=es();if(ze){if(t===void 0)throw Error(Z(407));t=t()}else{if(t=e(),dt===null)throw Error(Z(349));Hn&30||fw(s,e,t)}r.memoizedState=t;var n={value:t,getSnapshot:e};return r.queue=n,Fb(mw.bind(null,s,n,i),[i]),s.flags|=2048,Du(9,pw.bind(null,s,n,t,e),void 0,null),t},useId:function(){var i=es(),e=dt.identifierPrefix;if(ze){var t=Ks,s=qs;t=(s&~(1<<32-$i(s)-1)).toString(32)+t,e=":"+e+"R"+t,t=Nu++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=sS++,e=":"+e+"r"+t.toString(32)+":";return i.memoizedState=e},unstable_isNewReconciler:!1},lS={readContext:Pi,useCallback:xw,useContext:Pi,useEffect:_v,useImperativeHandle:kw,useInsertionEffect:yw,useLayoutEffect:ww,useMemo:Sw,useReducer:fp,useRef:bw,useState:function(){return fp(Fu)},useDebugValue:kv,useDeferredValue:function(i){var e=Ri();return Aw(e,it.memoizedState,i)},useTransition:function(){var i=fp(Fu)[0],e=Ri().memoizedState;return[i,e]},useMutableSource:hw,useSyncExternalStore:dw,useId:Ew,unstable_isNewReconciler:!1},uS={readContext:Pi,useCallback:xw,useContext:Pi,useEffect:_v,useImperativeHandle:kw,useInsertionEffect:yw,useLayoutEffect:ww,useMemo:Sw,useReducer:pp,useRef:bw,useState:function(){return pp(Fu)},useDebugValue:kv,useDeferredValue:function(i){var e=Ri();return it===null?e.memoizedState=i:Aw(e,it.memoizedState,i)},useTransition:function(){var i=pp(Fu)[0],e=Ri().memoizedState;return[i,e]},useMutableSource:hw,useSyncExternalStore:dw,useId:Ew,unstable_isNewReconciler:!1};function Wi(i,e){if(i&&i.defaultProps){e=He({},e),i=i.defaultProps;for(var t in i)e[t]===void 0&&(e[t]=i[t]);return e}return e}function um(i,e,t,s){e=i.memoizedState,t=t(s,e),t=t==null?e:He({},e,t),i.memoizedState=t,i.lanes===0&&(i.updateQueue.baseState=t)}var Mf={isMounted:function(i){return(i=i._reactInternals)?Xn(i)===i:!1},enqueueSetState:function(i,e,t){i=i._reactInternals;var s=zt(),r=Hr(i),n=Xs(s,r);n.payload=e,t!=null&&(n.callback=t),e=jr(i,n,r),e!==null&&(Vi(e,i,r,s),Rc(e,i,r))},enqueueReplaceState:function(i,e,t){i=i._reactInternals;var s=zt(),r=Hr(i),n=Xs(s,r);n.tag=1,n.payload=e,t!=null&&(n.callback=t),e=jr(i,n,r),e!==null&&(Vi(e,i,r,s),Rc(e,i,r))},enqueueForceUpdate:function(i,e){i=i._reactInternals;var t=zt(),s=Hr(i),r=Xs(t,s);r.tag=2,e!=null&&(r.callback=e),e=jr(i,r,s),e!==null&&(Vi(e,i,s,t),Rc(e,i,s))}};function Db(i,e,t,s,r,n,a){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(s,n,a):e.prototype&&e.prototype.isPureReactComponent?!Mu(t,s)||!Mu(r,n):!0}function Pw(i,e,t){var s=!1,r=Gr,n=e.contextType;return typeof n=="object"&&n!==null?n=Pi(n):(r=Yt(e)?jn:It.current,s=e.contextTypes,n=(s=s!=null)?ko(i,r):Gr),e=new e(t,n),i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Mf,i.stateNode=e,e._reactInternals=i,s&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=r,i.__reactInternalMemoizedMaskedChildContext=n),e}function Ob(i,e,t,s){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,s),e.state!==i&&Mf.enqueueReplaceState(e,e.state,null)}function cm(i,e,t,s){var r=i.stateNode;r.props=t,r.state=i.memoizedState,r.refs={},pv(i);var n=e.contextType;typeof n=="object"&&n!==null?r.context=Pi(n):(n=Yt(e)?jn:It.current,r.context=ko(i,n)),r.state=i.memoizedState,n=e.getDerivedStateFromProps,typeof n=="function"&&(um(i,e,n,t),r.state=i.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Mf.enqueueReplaceState(r,r.state,null),Cd(i,t,r,s),r.state=i.memoizedState),typeof r.componentDidMount=="function"&&(i.flags|=4194308)}function Eo(i,e){try{var t="",s=e;do t+=Ok(s),s=s.return;while(s);var r=t}catch(n){r=`
Error generating stack: `+n.message+`
`+n.stack}return{value:i,source:e,stack:r,digest:null}}function mp(i,e,t){return{value:i,source:null,stack:t??null,digest:e??null}}function hm(i,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var cS=typeof WeakMap=="function"?WeakMap:Map;function Rw(i,e,t){t=Xs(-1,t),t.tag=3,t.payload={element:null};var s=e.value;return t.callback=function(){Id||(Id=!0,wm=s),hm(i,e)},t}function Iw(i,e,t){t=Xs(-1,t),t.tag=3;var s=i.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;t.payload=function(){return s(r)},t.callback=function(){hm(i,e)}}var n=i.stateNode;return n!==null&&typeof n.componentDidCatch=="function"&&(t.callback=function(){hm(i,e),typeof s!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function zb(i,e,t){var s=i.pingCache;if(s===null){s=i.pingCache=new cS;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(t)||(r.add(t),i=SS.bind(null,i,e,t),e.then(i,i))}function Wb(i){do{var e;if((e=i.tag===13)&&(e=i.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return i;i=i.return}while(i!==null);return null}function Bb(i,e,t,s,r){return i.mode&1?(i.flags|=65536,i.lanes=r,i):(i===e?i.flags|=65536:(i.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Xs(-1,1),e.tag=2,jr(t,e,1))),t.lanes|=1),i)}var hS=tr.ReactCurrentOwner,Kt=!1;function Dt(i,e,t,s){e.child=i===null?ow(e,null,t,s):So(e,i.child,t,s)}function jb(i,e,t,s,r){t=t.render;var n=e.ref;return uo(e,r),s=yv(i,e,t,s,n,r),t=wv(),i!==null&&!Kt?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~r,Js(i,e,r)):(ze&&t&&ov(e),e.flags|=1,Dt(i,e,s,r),e.child)}function Ub(i,e,t,s,r){if(i===null){var n=t.type;return typeof n=="function"&&!Pv(n)&&n.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=n,Tw(i,e,n,s,r)):(i=Oc(t.type,null,s,e,e.mode,r),i.ref=e.ref,i.return=e,e.child=i)}if(n=i.child,!(i.lanes&r)){var a=n.memoizedProps;if(t=t.compare,t=t!==null?t:Mu,t(a,s)&&i.ref===e.ref)return Js(i,e,r)}return e.flags|=1,i=$r(n,s),i.ref=e.ref,i.return=e,e.child=i}function Tw(i,e,t,s,r){if(i!==null){var n=i.memoizedProps;if(Mu(n,s)&&i.ref===e.ref)if(Kt=!1,e.pendingProps=s=n,(i.lanes&r)!==0)i.flags&131072&&(Kt=!0);else return e.lanes=i.lanes,Js(i,e,r)}return dm(i,e,t,s,r)}function Nw(i,e,t){var s=e.pendingProps,r=s.children,n=i!==null?i.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Ba,ni),ni|=t;else{if(!(t&1073741824))return i=n!==null?n.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:i,cachePool:null,transitions:null},e.updateQueue=null,Te(Ba,ni),ni|=i,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=n!==null?n.baseLanes:t,Te(Ba,ni),ni|=s}else n!==null?(s=n.baseLanes|t,e.memoizedState=null):s=t,Te(Ba,ni),ni|=s;return Dt(i,e,r,t),e.child}function Fw(i,e){var t=e.ref;(i===null&&t!==null||i!==null&&i.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function dm(i,e,t,s,r){var n=Yt(t)?jn:It.current;return n=ko(e,n),uo(e,r),t=yv(i,e,t,s,n,r),s=wv(),i!==null&&!Kt?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~r,Js(i,e,r)):(ze&&s&&ov(e),e.flags|=1,Dt(i,e,t,r),e.child)}function Hb(i,e,t,s,r){if(Yt(t)){var n=!0;kd(e)}else n=!1;if(uo(e,r),e.stateNode===null)Nc(i,e),Pw(e,t,s),cm(e,t,s,r),s=!0;else if(i===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=t.contextType;typeof c=="object"&&c!==null?c=Pi(c):(c=Yt(t)?jn:It.current,c=ko(e,c));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==s||l!==c)&&Ob(e,a,s,c),mr=!1;var f=e.memoizedState;a.state=f,Cd(e,s,a,r),l=e.memoizedState,o!==s||f!==l||Xt.current||mr?(typeof h=="function"&&(um(e,t,h,s),l=e.memoizedState),(o=mr||Db(e,t,o,s,f,l,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),a.props=s,a.state=l,a.context=c,s=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{a=e.stateNode,uw(i,e),o=e.memoizedProps,c=e.type===e.elementType?o:Wi(e.type,o),a.props=c,d=e.pendingProps,f=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=Pi(l):(l=Yt(t)?jn:It.current,l=ko(e,l));var p=t.getDerivedStateFromProps;(h=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||f!==l)&&Ob(e,a,s,l),mr=!1,f=e.memoizedState,a.state=f,Cd(e,s,a,r);var v=e.memoizedState;o!==d||f!==v||Xt.current||mr?(typeof p=="function"&&(um(e,t,p,s),v=e.memoizedState),(c=mr||Db(e,t,c,s,f,v,l)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,v,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,v,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===i.memoizedProps&&f===i.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===i.memoizedProps&&f===i.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=v),a.props=s,a.state=v,a.context=l,s=c):(typeof a.componentDidUpdate!="function"||o===i.memoizedProps&&f===i.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===i.memoizedProps&&f===i.memoizedState||(e.flags|=1024),s=!1)}return fm(i,e,t,s,n,r)}function fm(i,e,t,s,r,n){Fw(i,e);var a=(e.flags&128)!==0;if(!s&&!a)return r&&Mb(e,t,!1),Js(i,e,n);s=e.stateNode,hS.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,i!==null&&a?(e.child=So(e,i.child,null,n),e.child=So(e,null,o,n)):Dt(i,e,o,n),e.memoizedState=s.state,r&&Mb(e,t,!0),e.child}function Dw(i){var e=i.stateNode;e.pendingContext?Cb(i,e.pendingContext,e.pendingContext!==e.context):e.context&&Cb(i,e.context,!1),mv(i,e.containerInfo)}function $b(i,e,t,s,r){return xo(),uv(r),e.flags|=256,Dt(i,e,t,s),e.child}var pm={dehydrated:null,treeContext:null,retryLane:0};function mm(i){return{baseLanes:i,cachePool:null,transitions:null}}function Ow(i,e,t){var s=e.pendingProps,r=je.current,n=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=i!==null&&i.memoizedState===null?!1:(r&2)!==0),o?(n=!0,e.flags&=-129):(i===null||i.memoizedState!==null)&&(r|=1),Te(je,r&1),i===null)return om(e),i=e.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(e.mode&1?i.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=s.children,i=s.fallback,n?(s=e.mode,n=e.child,a={mode:"hidden",children:a},!(s&1)&&n!==null?(n.childLanes=0,n.pendingProps=a):n=Rf(a,s,0,null),i=Bn(i,s,t,null),n.return=e,i.return=e,n.sibling=i,e.child=n,e.child.memoizedState=mm(t),e.memoizedState=pm,i):xv(e,a));if(r=i.memoizedState,r!==null&&(o=r.dehydrated,o!==null))return dS(i,e,a,s,o,r,t);if(n){n=s.fallback,a=e.mode,r=i.child,o=r.sibling;var l={mode:"hidden",children:s.children};return!(a&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=l,e.deletions=null):(s=$r(r,l),s.subtreeFlags=r.subtreeFlags&14680064),o!==null?n=$r(o,n):(n=Bn(n,a,t,null),n.flags|=2),n.return=e,s.return=e,s.sibling=n,e.child=s,s=n,n=e.child,a=i.child.memoizedState,a=a===null?mm(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},n.memoizedState=a,n.childLanes=i.childLanes&~t,e.memoizedState=pm,s}return n=i.child,i=n.sibling,s=$r(n,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=t),s.return=e,s.sibling=null,i!==null&&(t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)),e.child=s,e.memoizedState=null,s}function xv(i,e){return e=Rf({mode:"visible",children:e},i.mode,0,null),e.return=i,i.child=e}function dc(i,e,t,s){return s!==null&&uv(s),So(e,i.child,null,t),i=xv(e,e.pendingProps.children),i.flags|=2,e.memoizedState=null,i}function dS(i,e,t,s,r,n,a){if(t)return e.flags&256?(e.flags&=-257,s=mp(Error(Z(422))),dc(i,e,a,s)):e.memoizedState!==null?(e.child=i.child,e.flags|=128,null):(n=s.fallback,r=e.mode,s=Rf({mode:"visible",children:s.children},r,0,null),n=Bn(n,r,a,null),n.flags|=2,s.return=e,n.return=e,s.sibling=n,e.child=s,e.mode&1&&So(e,i.child,null,a),e.child.memoizedState=mm(a),e.memoizedState=pm,n);if(!(e.mode&1))return dc(i,e,a,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var o=s.dgst;return s=o,n=Error(Z(419)),s=mp(n,s,void 0),dc(i,e,a,s)}if(o=(a&i.childLanes)!==0,Kt||o){if(s=dt,s!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|a)?0:r,r!==0&&r!==n.retryLane&&(n.retryLane=r,Zs(i,r),Vi(s,i,r,-1))}return Lv(),s=mp(Error(Z(421))),dc(i,e,a,s)}return r.data==="$?"?(e.flags|=128,e.child=i.child,e=AS.bind(null,i),r._reactRetry=e,null):(i=n.treeContext,ai=Br(r.nextSibling),oi=e,ze=!0,Hi=null,i!==null&&(Ai[Ei++]=qs,Ai[Ei++]=Ks,Ai[Ei++]=Un,qs=i.id,Ks=i.overflow,Un=e),e=xv(e,s.children),e.flags|=4096,e)}function Vb(i,e,t){i.lanes|=e;var s=i.alternate;s!==null&&(s.lanes|=e),lm(i.return,e,t)}function gp(i,e,t,s,r){var n=i.memoizedState;n===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:r}:(n.isBackwards=e,n.rendering=null,n.renderingStartTime=0,n.last=s,n.tail=t,n.tailMode=r)}function zw(i,e,t){var s=e.pendingProps,r=s.revealOrder,n=s.tail;if(Dt(i,e,s.children,t),s=je.current,s&2)s=s&1|2,e.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Vb(i,t,e);else if(i.tag===19)Vb(i,t,e);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}s&=1}if(Te(je,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)i=t.alternate,i!==null&&Md(i)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),gp(e,!1,r,t,n);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(i=r.alternate,i!==null&&Md(i)===null){e.child=r;break}i=r.sibling,r.sibling=t,t=r,r=i}gp(e,!0,t,null,n);break;case"together":gp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Nc(i,e){!(e.mode&1)&&i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2)}function Js(i,e,t){if(i!==null&&(e.dependencies=i.dependencies),$n|=e.lanes,!(t&e.childLanes))return null;if(i!==null&&e.child!==i.child)throw Error(Z(153));if(e.child!==null){for(i=e.child,t=$r(i,i.pendingProps),e.child=t,t.return=e;i.sibling!==null;)i=i.sibling,t=t.sibling=$r(i,i.pendingProps),t.return=e;t.sibling=null}return e.child}function fS(i,e,t){switch(e.tag){case 3:Dw(e),xo();break;case 5:cw(e);break;case 1:Yt(e.type)&&kd(e);break;case 4:mv(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;Te(Ad,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Te(je,je.current&1),e.flags|=128,null):t&e.child.childLanes?Ow(i,e,t):(Te(je,je.current&1),i=Js(i,e,t),i!==null?i.sibling:null);Te(je,je.current&1);break;case 19:if(s=(t&e.childLanes)!==0,i.flags&128){if(s)return zw(i,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Te(je,je.current),s)break;return null;case 22:case 23:return e.lanes=0,Nw(i,e,t)}return Js(i,e,t)}var Ww,gm,Bw,jw;Ww=function(i,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)i.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};gm=function(){};Bw=function(i,e,t,s){var r=i.memoizedProps;if(r!==s){i=e.stateNode,Ln(bs.current);var n=null;switch(t){case"input":r=zp(i,r),s=zp(i,s),n=[];break;case"select":r=He({},r,{value:void 0}),s=He({},s,{value:void 0}),n=[];break;case"textarea":r=jp(i,r),s=jp(i,s),n=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(i.onclick=wd)}Hp(t,s);var a;t=null;for(c in r)if(!s.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var o=r[c];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(_u.hasOwnProperty(c)?n||(n=[]):(n=n||[]).push(c,null));for(c in s){var l=s[c];if(o=r!=null?r[c]:void 0,s.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(n||(n=[]),n.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(n=n||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(n=n||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(_u.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ne("scroll",i),n||o===l||(n=[])):(n=n||[]).push(c,l))}t&&(n=n||[]).push("style",t);var c=n;(e.updateQueue=c)&&(e.flags|=4)}};jw=function(i,e,t,s){t!==s&&(e.flags|=4)};function jo(i,e){if(!ze)switch(i.tailMode){case"hidden":e=i.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?i.tail=null:t.sibling=null;break;case"collapsed":t=i.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:s.sibling=null}}function wt(i){var e=i.alternate!==null&&i.alternate.child===i.child,t=0,s=0;if(e)for(var r=i.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=i,r=r.sibling;else for(r=i.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=i,r=r.sibling;return i.subtreeFlags|=s,i.childLanes=t,e}function pS(i,e,t){var s=e.pendingProps;switch(lv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(e),null;case 1:return Yt(e.type)&&_d(),wt(e),null;case 3:return s=e.stateNode,Ao(),De(Xt),De(It),vv(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(i===null||i.child===null)&&(cc(e)?e.flags|=4:i===null||i.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Hi!==null&&(xm(Hi),Hi=null))),gm(i,e),wt(e),null;case 5:gv(e);var r=Ln(Tu.current);if(t=e.type,i!==null&&e.stateNode!=null)Bw(i,e,t,s,r),i.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(Z(166));return wt(e),null}if(i=Ln(bs.current),cc(e)){s=e.stateNode,t=e.type;var n=e.memoizedProps;switch(s[ps]=e,s[Ru]=n,i=(e.mode&1)!==0,t){case"dialog":Ne("cancel",s),Ne("close",s);break;case"iframe":case"object":case"embed":Ne("load",s);break;case"video":case"audio":for(r=0;r<Zo.length;r++)Ne(Zo[r],s);break;case"source":Ne("error",s);break;case"img":case"image":case"link":Ne("error",s),Ne("load",s);break;case"details":Ne("toggle",s);break;case"input":eb(s,n),Ne("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!n.multiple},Ne("invalid",s);break;case"textarea":ib(s,n),Ne("invalid",s)}Hp(t,n),r=null;for(var a in n)if(n.hasOwnProperty(a)){var o=n[a];a==="children"?typeof o=="string"?s.textContent!==o&&(n.suppressHydrationWarning!==!0&&uc(s.textContent,o,i),r=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(n.suppressHydrationWarning!==!0&&uc(s.textContent,o,i),r=["children",""+o]):_u.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Ne("scroll",s)}switch(t){case"input":tc(s),tb(s,n,!0);break;case"textarea":tc(s),sb(s);break;case"select":case"option":break;default:typeof n.onClick=="function"&&(s.onclick=wd)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=my(t)),i==="http://www.w3.org/1999/xhtml"?t==="script"?(i=a.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof s.is=="string"?i=a.createElement(t,{is:s.is}):(i=a.createElement(t),t==="select"&&(a=i,s.multiple?a.multiple=!0:s.size&&(a.size=s.size))):i=a.createElementNS(i,t),i[ps]=e,i[Ru]=s,Ww(i,e,!1,!1),e.stateNode=i;e:{switch(a=$p(t,s),t){case"dialog":Ne("cancel",i),Ne("close",i),r=s;break;case"iframe":case"object":case"embed":Ne("load",i),r=s;break;case"video":case"audio":for(r=0;r<Zo.length;r++)Ne(Zo[r],i);r=s;break;case"source":Ne("error",i),r=s;break;case"img":case"image":case"link":Ne("error",i),Ne("load",i),r=s;break;case"details":Ne("toggle",i),r=s;break;case"input":eb(i,s),r=zp(i,s),Ne("invalid",i);break;case"option":r=s;break;case"select":i._wrapperState={wasMultiple:!!s.multiple},r=He({},s,{value:void 0}),Ne("invalid",i);break;case"textarea":ib(i,s),r=jp(i,s),Ne("invalid",i);break;default:r=s}Hp(t,r),o=r;for(n in o)if(o.hasOwnProperty(n)){var l=o[n];n==="style"?by(i,l):n==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&gy(i,l)):n==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&ku(i,l):typeof l=="number"&&ku(i,""+l):n!=="suppressContentEditableWarning"&&n!=="suppressHydrationWarning"&&n!=="autoFocus"&&(_u.hasOwnProperty(n)?l!=null&&n==="onScroll"&&Ne("scroll",i):l!=null&&qg(i,n,l,a))}switch(t){case"input":tc(i),tb(i,s,!1);break;case"textarea":tc(i),sb(i);break;case"option":s.value!=null&&i.setAttribute("value",""+Vr(s.value));break;case"select":i.multiple=!!s.multiple,n=s.value,n!=null?no(i,!!s.multiple,n,!1):s.defaultValue!=null&&no(i,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(i.onclick=wd)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wt(e),null;case 6:if(i&&e.stateNode!=null)jw(i,e,i.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(Z(166));if(t=Ln(Tu.current),Ln(bs.current),cc(e)){if(s=e.stateNode,t=e.memoizedProps,s[ps]=e,(n=s.nodeValue!==t)&&(i=oi,i!==null))switch(i.tag){case 3:uc(s.nodeValue,t,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&uc(s.nodeValue,t,(i.mode&1)!==0)}n&&(e.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[ps]=e,e.stateNode=s}return wt(e),null;case 13:if(De(je),s=e.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(ze&&ai!==null&&e.mode&1&&!(e.flags&128))nw(),xo(),e.flags|=98560,n=!1;else if(n=cc(e),s!==null&&s.dehydrated!==null){if(i===null){if(!n)throw Error(Z(318));if(n=e.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Z(317));n[ps]=e}else xo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wt(e),n=!1}else Hi!==null&&(xm(Hi),Hi=null),n=!0;if(!n)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(s=s!==null,s!==(i!==null&&i.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(i===null||je.current&1?rt===0&&(rt=3):Lv())),e.updateQueue!==null&&(e.flags|=4),wt(e),null);case 4:return Ao(),gm(i,e),i===null&&Lu(e.stateNode.containerInfo),wt(e),null;case 10:return dv(e.type._context),wt(e),null;case 17:return Yt(e.type)&&_d(),wt(e),null;case 19:if(De(je),n=e.memoizedState,n===null)return wt(e),null;if(s=(e.flags&128)!==0,a=n.rendering,a===null)if(s)jo(n,!1);else{if(rt!==0||i!==null&&i.flags&128)for(i=e.child;i!==null;){if(a=Md(i),a!==null){for(e.flags|=128,jo(n,!1),s=a.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=t,t=e.child;t!==null;)n=t,i=s,n.flags&=14680066,a=n.alternate,a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t=t.sibling;return Te(je,je.current&1|2),e.child}i=i.sibling}n.tail!==null&&Xe()>Co&&(e.flags|=128,s=!0,jo(n,!1),e.lanes=4194304)}else{if(!s)if(i=Md(a),i!==null){if(e.flags|=128,s=!0,t=i.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),jo(n,!0),n.tail===null&&n.tailMode==="hidden"&&!a.alternate&&!ze)return wt(e),null}else 2*Xe()-n.renderingStartTime>Co&&t!==1073741824&&(e.flags|=128,s=!0,jo(n,!1),e.lanes=4194304);n.isBackwards?(a.sibling=e.child,e.child=a):(t=n.last,t!==null?t.sibling=a:e.child=a,n.last=a)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=Xe(),e.sibling=null,t=je.current,Te(je,s?t&1|2:t&1),e):(wt(e),null);case 22:case 23:return Mv(),s=e.memoizedState!==null,i!==null&&i.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?ni&1073741824&&(wt(e),e.subtreeFlags&6&&(e.flags|=8192)):wt(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function mS(i,e){switch(lv(e),e.tag){case 1:return Yt(e.type)&&_d(),i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 3:return Ao(),De(Xt),De(It),vv(),i=e.flags,i&65536&&!(i&128)?(e.flags=i&-65537|128,e):null;case 5:return gv(e),null;case 13:if(De(je),i=e.memoizedState,i!==null&&i.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));xo()}return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 19:return De(je),null;case 4:return Ao(),null;case 10:return dv(e.type._context),null;case 22:case 23:return Mv(),null;case 24:return null;default:return null}}var fc=!1,Pt=!1,gS=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Wa(i,e){var t=i.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){$e(i,e,s)}else t.current=null}function Uw(i,e,t){try{t()}catch(s){$e(i,e,s)}}var Gb=!1;function vS(i,e){if(em=vd,i=Gy(),av(i)){if("selectionStart"in i)var t={start:i.selectionStart,end:i.selectionEnd};else e:{t=(t=i.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var r=s.anchorOffset,n=s.focusNode;s=s.focusOffset;try{t.nodeType,n.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,c=0,h=0,d=i,f=null;t:for(;;){for(var p;d!==t||r!==0&&d.nodeType!==3||(o=a+r),d!==n||s!==0&&d.nodeType!==3||(l=a+s),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===i)break t;if(f===t&&++c===r&&(o=a),f===n&&++h===s&&(l=a),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(tm={focusedElem:i,selectionRange:t},vd=!1,ne=e;ne!==null;)if(e=ne,i=e.child,(e.subtreeFlags&1028)!==0&&i!==null)i.return=e,ne=i;else for(;ne!==null;){e=ne;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var m=v.memoizedProps,y=v.memoizedState,g=e.stateNode,b=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:Wi(e.type,m),y);g.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(S){$e(e,e.return,S)}if(i=e.sibling,i!==null){i.return=e.return,ne=i;break}ne=e.return}return v=Gb,Gb=!1,v}function Jl(i,e,t){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&i)===i){var n=r.destroy;r.destroy=void 0,n!==void 0&&Uw(e,t,n)}r=r.next}while(r!==s)}}function Lf(i,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&i)===i){var s=t.create;t.destroy=s()}t=t.next}while(t!==e)}}function vm(i){var e=i.ref;if(e!==null){var t=i.stateNode;switch(i.tag){case 5:i=t;break;default:i=t}typeof e=="function"?e(i):e.current=i}}function Hw(i){var e=i.alternate;e!==null&&(i.alternate=null,Hw(e)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(e=i.stateNode,e!==null&&(delete e[ps],delete e[Ru],delete e[rm],delete e[Jx],delete e[eS])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function $w(i){return i.tag===5||i.tag===3||i.tag===4}function qb(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||$w(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function bm(i,e,t){var s=i.tag;if(s===5||s===6)i=i.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(i,e):t.insertBefore(i,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(i,t)):(e=t,e.appendChild(i)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=wd));else if(s!==4&&(i=i.child,i!==null))for(bm(i,e,t),i=i.sibling;i!==null;)bm(i,e,t),i=i.sibling}function ym(i,e,t){var s=i.tag;if(s===5||s===6)i=i.stateNode,e?t.insertBefore(i,e):t.appendChild(i);else if(s!==4&&(i=i.child,i!==null))for(ym(i,e,t),i=i.sibling;i!==null;)ym(i,e,t),i=i.sibling}var gt=null,Ui=!1;function ir(i,e,t){for(t=t.child;t!==null;)Vw(i,e,t),t=t.sibling}function Vw(i,e,t){if(vs&&typeof vs.onCommitFiberUnmount=="function")try{vs.onCommitFiberUnmount(_f,t)}catch{}switch(t.tag){case 5:Pt||Wa(t,e);case 6:var s=gt,r=Ui;gt=null,ir(i,e,t),gt=s,Ui=r,gt!==null&&(Ui?(i=gt,t=t.stateNode,i.nodeType===8?i.parentNode.removeChild(t):i.removeChild(t)):gt.removeChild(t.stateNode));break;case 18:gt!==null&&(Ui?(i=gt,t=t.stateNode,i.nodeType===8?up(i.parentNode,t):i.nodeType===1&&up(i,t),Eu(i)):up(gt,t.stateNode));break;case 4:s=gt,r=Ui,gt=t.stateNode.containerInfo,Ui=!0,ir(i,e,t),gt=s,Ui=r;break;case 0:case 11:case 14:case 15:if(!Pt&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var n=r,a=n.destroy;n=n.tag,a!==void 0&&(n&2||n&4)&&Uw(t,e,a),r=r.next}while(r!==s)}ir(i,e,t);break;case 1:if(!Pt&&(Wa(t,e),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(o){$e(t,e,o)}ir(i,e,t);break;case 21:ir(i,e,t);break;case 22:t.mode&1?(Pt=(s=Pt)||t.memoizedState!==null,ir(i,e,t),Pt=s):ir(i,e,t);break;default:ir(i,e,t)}}function Kb(i){var e=i.updateQueue;if(e!==null){i.updateQueue=null;var t=i.stateNode;t===null&&(t=i.stateNode=new gS),e.forEach(function(s){var r=ES.bind(null,i,s);t.has(s)||(t.add(s),s.then(r,r))})}}function Ti(i,e){var t=e.deletions;if(t!==null)for(var s=0;s<t.length;s++){var r=t[s];try{var n=i,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:gt=o.stateNode,Ui=!1;break e;case 3:gt=o.stateNode.containerInfo,Ui=!0;break e;case 4:gt=o.stateNode.containerInfo,Ui=!0;break e}o=o.return}if(gt===null)throw Error(Z(160));Vw(n,a,r),gt=null,Ui=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){$e(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Gw(e,i),e=e.sibling}function Gw(i,e){var t=i.alternate,s=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Ti(e,i),Xi(i),s&4){try{Jl(3,i,i.return),Lf(3,i)}catch(m){$e(i,i.return,m)}try{Jl(5,i,i.return)}catch(m){$e(i,i.return,m)}}break;case 1:Ti(e,i),Xi(i),s&512&&t!==null&&Wa(t,t.return);break;case 5:if(Ti(e,i),Xi(i),s&512&&t!==null&&Wa(t,t.return),i.flags&32){var r=i.stateNode;try{ku(r,"")}catch(m){$e(i,i.return,m)}}if(s&4&&(r=i.stateNode,r!=null)){var n=i.memoizedProps,a=t!==null?t.memoizedProps:n,o=i.type,l=i.updateQueue;if(i.updateQueue=null,l!==null)try{o==="input"&&n.type==="radio"&&n.name!=null&&fy(r,n),$p(o,a);var c=$p(o,n);for(a=0;a<l.length;a+=2){var h=l[a],d=l[a+1];h==="style"?by(r,d):h==="dangerouslySetInnerHTML"?gy(r,d):h==="children"?ku(r,d):qg(r,h,d,c)}switch(o){case"input":Wp(r,n);break;case"textarea":py(r,n);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!n.multiple;var p=n.value;p!=null?no(r,!!n.multiple,p,!1):f!==!!n.multiple&&(n.defaultValue!=null?no(r,!!n.multiple,n.defaultValue,!0):no(r,!!n.multiple,n.multiple?[]:"",!1))}r[Ru]=n}catch(m){$e(i,i.return,m)}}break;case 6:if(Ti(e,i),Xi(i),s&4){if(i.stateNode===null)throw Error(Z(162));r=i.stateNode,n=i.memoizedProps;try{r.nodeValue=n}catch(m){$e(i,i.return,m)}}break;case 3:if(Ti(e,i),Xi(i),s&4&&t!==null&&t.memoizedState.isDehydrated)try{Eu(e.containerInfo)}catch(m){$e(i,i.return,m)}break;case 4:Ti(e,i),Xi(i);break;case 13:Ti(e,i),Xi(i),r=i.child,r.flags&8192&&(n=r.memoizedState!==null,r.stateNode.isHidden=n,!n||r.alternate!==null&&r.alternate.memoizedState!==null||(Ev=Xe())),s&4&&Kb(i);break;case 22:if(h=t!==null&&t.memoizedState!==null,i.mode&1?(Pt=(c=Pt)||h,Ti(e,i),Pt=c):Ti(e,i),Xi(i),s&8192){if(c=i.memoizedState!==null,(i.stateNode.isHidden=c)&&!h&&i.mode&1)for(ne=i,h=i.child;h!==null;){for(d=ne=h;ne!==null;){switch(f=ne,p=f.child,f.tag){case 0:case 11:case 14:case 15:Jl(4,f,f.return);break;case 1:Wa(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){s=f,t=f.return;try{e=s,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(m){$e(s,t,m)}}break;case 5:Wa(f,f.return);break;case 22:if(f.memoizedState!==null){Yb(d);continue}}p!==null?(p.return=f,ne=p):Yb(d)}h=h.sibling}e:for(h=null,d=i;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,c?(n=r.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=vy("display",a))}catch(m){$e(i,i.return,m)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){$e(i,i.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===i)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===i)break e;for(;d.sibling===null;){if(d.return===null||d.return===i)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ti(e,i),Xi(i),s&4&&Kb(i);break;case 21:break;default:Ti(e,i),Xi(i)}}function Xi(i){var e=i.flags;if(e&2){try{e:{for(var t=i.return;t!==null;){if($w(t)){var s=t;break e}t=t.return}throw Error(Z(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(ku(r,""),s.flags&=-33);var n=qb(i);ym(i,n,r);break;case 3:case 4:var a=s.stateNode.containerInfo,o=qb(i);bm(i,o,a);break;default:throw Error(Z(161))}}catch(l){$e(i,i.return,l)}i.flags&=-3}e&4096&&(i.flags&=-4097)}function bS(i,e,t){ne=i,qw(i)}function qw(i,e,t){for(var s=(i.mode&1)!==0;ne!==null;){var r=ne,n=r.child;if(r.tag===22&&s){var a=r.memoizedState!==null||fc;if(!a){var o=r.alternate,l=o!==null&&o.memoizedState!==null||Pt;o=fc;var c=Pt;if(fc=a,(Pt=l)&&!c)for(ne=r;ne!==null;)a=ne,l=a.child,a.tag===22&&a.memoizedState!==null?Qb(r):l!==null?(l.return=a,ne=l):Qb(r);for(;n!==null;)ne=n,qw(n),n=n.sibling;ne=r,fc=o,Pt=c}Xb(i)}else r.subtreeFlags&8772&&n!==null?(n.return=r,ne=n):Xb(i)}}function Xb(i){for(;ne!==null;){var e=ne;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pt||Lf(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Pt)if(t===null)s.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Wi(e.type,t.memoizedProps);s.componentDidUpdate(r,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var n=e.updateQueue;n!==null&&Tb(e,n,s);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Tb(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Eu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Pt||e.flags&512&&vm(e)}catch(f){$e(e,e.return,f)}}if(e===i){ne=null;break}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}}function Yb(i){for(;ne!==null;){var e=ne;if(e===i){ne=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ne=t;break}ne=e.return}}function Qb(i){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Lf(4,e)}catch(l){$e(e,t,l)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(l){$e(e,r,l)}}var n=e.return;try{vm(e)}catch(l){$e(e,n,l)}break;case 5:var a=e.return;try{vm(e)}catch(l){$e(e,a,l)}}}catch(l){$e(e,e.return,l)}if(e===i){ne=null;break}var o=e.sibling;if(o!==null){o.return=e.return,ne=o;break}ne=e.return}}var yS=Math.ceil,Rd=tr.ReactCurrentDispatcher,Sv=tr.ReactCurrentOwner,Li=tr.ReactCurrentBatchConfig,Ae=0,dt=null,Ze=null,vt=0,ni=0,Ba=Xr(0),rt=0,Ou=null,$n=0,Pf=0,Av=0,eu=null,qt=null,Ev=0,Co=1/0,Ds=null,Id=!1,wm=null,Ur=null,pc=!1,Nr=null,Td=0,tu=0,_m=null,Fc=-1,Dc=0;function zt(){return Ae&6?Xe():Fc!==-1?Fc:Fc=Xe()}function Hr(i){return i.mode&1?Ae&2&&vt!==0?vt&-vt:iS.transition!==null?(Dc===0&&(Dc=Py()),Dc):(i=Ce,i!==0||(i=window.event,i=i===void 0?16:Oy(i.type)),i):1}function Vi(i,e,t,s){if(50<tu)throw tu=0,_m=null,Error(Z(185));ju(i,t,s),(!(Ae&2)||i!==dt)&&(i===dt&&(!(Ae&2)&&(Pf|=t),rt===4&&_r(i,vt)),Qt(i,s),t===1&&Ae===0&&!(e.mode&1)&&(Co=Xe()+500,Ef&&Yr()))}function Qt(i,e){var t=i.callbackNode;ix(i,e);var s=gd(i,i===dt?vt:0);if(s===0)t!==null&&ab(t),i.callbackNode=null,i.callbackPriority=0;else if(e=s&-s,i.callbackPriority!==e){if(t!=null&&ab(t),e===1)i.tag===0?tS(Zb.bind(null,i)):iw(Zb.bind(null,i)),Qx(function(){!(Ae&6)&&Yr()}),t=null;else{switch(Ry(s)){case 1:t=Zg;break;case 4:t=My;break;case 16:t=md;break;case 536870912:t=Ly;break;default:t=md}t=t_(t,Kw.bind(null,i))}i.callbackPriority=e,i.callbackNode=t}}function Kw(i,e){if(Fc=-1,Dc=0,Ae&6)throw Error(Z(327));var t=i.callbackNode;if(co()&&i.callbackNode!==t)return null;var s=gd(i,i===dt?vt:0);if(s===0)return null;if(s&30||s&i.expiredLanes||e)e=Nd(i,s);else{e=s;var r=Ae;Ae|=2;var n=Yw();(dt!==i||vt!==e)&&(Ds=null,Co=Xe()+500,Wn(i,e));do try{kS();break}catch(o){Xw(i,o)}while(!0);hv(),Rd.current=n,Ae=r,Ze!==null?e=0:(dt=null,vt=0,e=rt)}if(e!==0){if(e===2&&(r=Xp(i),r!==0&&(s=r,e=km(i,r))),e===1)throw t=Ou,Wn(i,0),_r(i,s),Qt(i,Xe()),t;if(e===6)_r(i,s);else{if(r=i.current.alternate,!(s&30)&&!wS(r)&&(e=Nd(i,s),e===2&&(n=Xp(i),n!==0&&(s=n,e=km(i,n))),e===1))throw t=Ou,Wn(i,0),_r(i,s),Qt(i,Xe()),t;switch(i.finishedWork=r,i.finishedLanes=s,e){case 0:case 1:throw Error(Z(345));case 2:en(i,qt,Ds);break;case 3:if(_r(i,s),(s&130023424)===s&&(e=Ev+500-Xe(),10<e)){if(gd(i,0)!==0)break;if(r=i.suspendedLanes,(r&s)!==s){zt(),i.pingedLanes|=i.suspendedLanes&r;break}i.timeoutHandle=sm(en.bind(null,i,qt,Ds),e);break}en(i,qt,Ds);break;case 4:if(_r(i,s),(s&4194240)===s)break;for(e=i.eventTimes,r=-1;0<s;){var a=31-$i(s);n=1<<a,a=e[a],a>r&&(r=a),s&=~n}if(s=r,s=Xe()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*yS(s/1960))-s,10<s){i.timeoutHandle=sm(en.bind(null,i,qt,Ds),s);break}en(i,qt,Ds);break;case 5:en(i,qt,Ds);break;default:throw Error(Z(329))}}}return Qt(i,Xe()),i.callbackNode===t?Kw.bind(null,i):null}function km(i,e){var t=eu;return i.current.memoizedState.isDehydrated&&(Wn(i,e).flags|=256),i=Nd(i,e),i!==2&&(e=qt,qt=t,e!==null&&xm(e)),i}function xm(i){qt===null?qt=i:qt.push.apply(qt,i)}function wS(i){for(var e=i;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var r=t[s],n=r.getSnapshot;r=r.value;try{if(!Gi(n(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _r(i,e){for(e&=~Av,e&=~Pf,i.suspendedLanes|=e,i.pingedLanes&=~e,i=i.expirationTimes;0<e;){var t=31-$i(e),s=1<<t;i[t]=-1,e&=~s}}function Zb(i){if(Ae&6)throw Error(Z(327));co();var e=gd(i,0);if(!(e&1))return Qt(i,Xe()),null;var t=Nd(i,e);if(i.tag!==0&&t===2){var s=Xp(i);s!==0&&(e=s,t=km(i,s))}if(t===1)throw t=Ou,Wn(i,0),_r(i,e),Qt(i,Xe()),t;if(t===6)throw Error(Z(345));return i.finishedWork=i.current.alternate,i.finishedLanes=e,en(i,qt,Ds),Qt(i,Xe()),null}function Cv(i,e){var t=Ae;Ae|=1;try{return i(e)}finally{Ae=t,Ae===0&&(Co=Xe()+500,Ef&&Yr())}}function Vn(i){Nr!==null&&Nr.tag===0&&!(Ae&6)&&co();var e=Ae;Ae|=1;var t=Li.transition,s=Ce;try{if(Li.transition=null,Ce=1,i)return i()}finally{Ce=s,Li.transition=t,Ae=e,!(Ae&6)&&Yr()}}function Mv(){ni=Ba.current,De(Ba)}function Wn(i,e){i.finishedWork=null,i.finishedLanes=0;var t=i.timeoutHandle;if(t!==-1&&(i.timeoutHandle=-1,Yx(t)),Ze!==null)for(t=Ze.return;t!==null;){var s=t;switch(lv(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&_d();break;case 3:Ao(),De(Xt),De(It),vv();break;case 5:gv(s);break;case 4:Ao();break;case 13:De(je);break;case 19:De(je);break;case 10:dv(s.type._context);break;case 22:case 23:Mv()}t=t.return}if(dt=i,Ze=i=$r(i.current,null),vt=ni=e,rt=0,Ou=null,Av=Pf=$n=0,qt=eu=null,Mn!==null){for(e=0;e<Mn.length;e++)if(t=Mn[e],s=t.interleaved,s!==null){t.interleaved=null;var r=s.next,n=t.pending;if(n!==null){var a=n.next;n.next=r,s.next=a}t.pending=s}Mn=null}return i}function Xw(i,e){do{var t=Ze;try{if(hv(),Ic.current=Pd,Ld){for(var s=Ue.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Ld=!1}if(Hn=0,ht=it=Ue=null,Zl=!1,Nu=0,Sv.current=null,t===null||t.return===null){rt=1,Ou=e,Ze=null;break}e:{var n=i,a=t.return,o=t,l=e;if(e=vt,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=o,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=Wb(a);if(p!==null){p.flags&=-257,Bb(p,a,o,n,e),p.mode&1&&zb(n,c,e),e=p,l=c;var v=e.updateQueue;if(v===null){var m=new Set;m.add(l),e.updateQueue=m}else v.add(l);break e}else{if(!(e&1)){zb(n,c,e),Lv();break e}l=Error(Z(426))}}else if(ze&&o.mode&1){var y=Wb(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Bb(y,a,o,n,e),uv(Eo(l,o));break e}}n=l=Eo(l,o),rt!==4&&(rt=2),eu===null?eu=[n]:eu.push(n),n=a;do{switch(n.tag){case 3:n.flags|=65536,e&=-e,n.lanes|=e;var g=Rw(n,l,e);Ib(n,g);break e;case 1:o=l;var b=n.type,w=n.stateNode;if(!(n.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ur===null||!Ur.has(w)))){n.flags|=65536,e&=-e,n.lanes|=e;var S=Iw(n,o,e);Ib(n,S);break e}}n=n.return}while(n!==null)}Zw(t)}catch(C){e=C,Ze===t&&t!==null&&(Ze=t=t.return);continue}break}while(!0)}function Yw(){var i=Rd.current;return Rd.current=Pd,i===null?Pd:i}function Lv(){(rt===0||rt===3||rt===2)&&(rt=4),dt===null||!($n&268435455)&&!(Pf&268435455)||_r(dt,vt)}function Nd(i,e){var t=Ae;Ae|=2;var s=Yw();(dt!==i||vt!==e)&&(Ds=null,Wn(i,e));do try{_S();break}catch(r){Xw(i,r)}while(!0);if(hv(),Ae=t,Rd.current=s,Ze!==null)throw Error(Z(261));return dt=null,vt=0,rt}function _S(){for(;Ze!==null;)Qw(Ze)}function kS(){for(;Ze!==null&&!qk();)Qw(Ze)}function Qw(i){var e=e_(i.alternate,i,ni);i.memoizedProps=i.pendingProps,e===null?Zw(i):Ze=e,Sv.current=null}function Zw(i){var e=i;do{var t=e.alternate;if(i=e.return,e.flags&32768){if(t=mS(t,e),t!==null){t.flags&=32767,Ze=t;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{rt=6,Ze=null;return}}else if(t=pS(t,e,ni),t!==null){Ze=t;return}if(e=e.sibling,e!==null){Ze=e;return}Ze=e=i}while(e!==null);rt===0&&(rt=5)}function en(i,e,t){var s=Ce,r=Li.transition;try{Li.transition=null,Ce=1,xS(i,e,t,s)}finally{Li.transition=r,Ce=s}return null}function xS(i,e,t,s){do co();while(Nr!==null);if(Ae&6)throw Error(Z(327));t=i.finishedWork;var r=i.finishedLanes;if(t===null)return null;if(i.finishedWork=null,i.finishedLanes=0,t===i.current)throw Error(Z(177));i.callbackNode=null,i.callbackPriority=0;var n=t.lanes|t.childLanes;if(sx(i,n),i===dt&&(Ze=dt=null,vt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||pc||(pc=!0,t_(md,function(){return co(),null})),n=(t.flags&15990)!==0,t.subtreeFlags&15990||n){n=Li.transition,Li.transition=null;var a=Ce;Ce=1;var o=Ae;Ae|=4,Sv.current=null,vS(i,t),Gw(t,i),Hx(tm),vd=!!em,tm=em=null,i.current=t,bS(t),Kk(),Ae=o,Ce=a,Li.transition=n}else i.current=t;if(pc&&(pc=!1,Nr=i,Td=r),n=i.pendingLanes,n===0&&(Ur=null),Qk(t.stateNode),Qt(i,Xe()),e!==null)for(s=i.onRecoverableError,t=0;t<e.length;t++)r=e[t],s(r.value,{componentStack:r.stack,digest:r.digest});if(Id)throw Id=!1,i=wm,wm=null,i;return Td&1&&i.tag!==0&&co(),n=i.pendingLanes,n&1?i===_m?tu++:(tu=0,_m=i):tu=0,Yr(),null}function co(){if(Nr!==null){var i=Ry(Td),e=Li.transition,t=Ce;try{if(Li.transition=null,Ce=16>i?16:i,Nr===null)var s=!1;else{if(i=Nr,Nr=null,Td=0,Ae&6)throw Error(Z(331));var r=Ae;for(Ae|=4,ne=i.current;ne!==null;){var n=ne,a=n.child;if(ne.flags&16){var o=n.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(ne=c;ne!==null;){var h=ne;switch(h.tag){case 0:case 11:case 15:Jl(8,h,n)}var d=h.child;if(d!==null)d.return=h,ne=d;else for(;ne!==null;){h=ne;var f=h.sibling,p=h.return;if(Hw(h),h===c){ne=null;break}if(f!==null){f.return=p,ne=f;break}ne=p}}}var v=n.alternate;if(v!==null){var m=v.child;if(m!==null){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}ne=n}}if(n.subtreeFlags&2064&&a!==null)a.return=n,ne=a;else e:for(;ne!==null;){if(n=ne,n.flags&2048)switch(n.tag){case 0:case 11:case 15:Jl(9,n,n.return)}var g=n.sibling;if(g!==null){g.return=n.return,ne=g;break e}ne=n.return}}var b=i.current;for(ne=b;ne!==null;){a=ne;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,ne=w;else e:for(a=b;ne!==null;){if(o=ne,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Lf(9,o)}}catch(C){$e(o,o.return,C)}if(o===a){ne=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,ne=S;break e}ne=o.return}}if(Ae=r,Yr(),vs&&typeof vs.onPostCommitFiberRoot=="function")try{vs.onPostCommitFiberRoot(_f,i)}catch{}s=!0}return s}finally{Ce=t,Li.transition=e}}return!1}function Jb(i,e,t){e=Eo(t,e),e=Rw(i,e,1),i=jr(i,e,1),e=zt(),i!==null&&(ju(i,1,e),Qt(i,e))}function $e(i,e,t){if(i.tag===3)Jb(i,i,t);else for(;e!==null;){if(e.tag===3){Jb(e,i,t);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ur===null||!Ur.has(s))){i=Eo(t,i),i=Iw(e,i,1),e=jr(e,i,1),i=zt(),e!==null&&(ju(e,1,i),Qt(e,i));break}}e=e.return}}function SS(i,e,t){var s=i.pingCache;s!==null&&s.delete(e),e=zt(),i.pingedLanes|=i.suspendedLanes&t,dt===i&&(vt&t)===t&&(rt===4||rt===3&&(vt&130023424)===vt&&500>Xe()-Ev?Wn(i,0):Av|=t),Qt(i,e)}function Jw(i,e){e===0&&(i.mode&1?(e=rc,rc<<=1,!(rc&130023424)&&(rc=4194304)):e=1);var t=zt();i=Zs(i,e),i!==null&&(ju(i,e,t),Qt(i,t))}function AS(i){var e=i.memoizedState,t=0;e!==null&&(t=e.retryLane),Jw(i,t)}function ES(i,e){var t=0;switch(i.tag){case 13:var s=i.stateNode,r=i.memoizedState;r!==null&&(t=r.retryLane);break;case 19:s=i.stateNode;break;default:throw Error(Z(314))}s!==null&&s.delete(e),Jw(i,t)}var e_;e_=function(i,e,t){if(i!==null)if(i.memoizedProps!==e.pendingProps||Xt.current)Kt=!0;else{if(!(i.lanes&t)&&!(e.flags&128))return Kt=!1,fS(i,e,t);Kt=!!(i.flags&131072)}else Kt=!1,ze&&e.flags&1048576&&sw(e,Sd,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Nc(i,e),i=e.pendingProps;var r=ko(e,It.current);uo(e,t),r=yv(null,e,s,i,r,t);var n=wv();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yt(s)?(n=!0,kd(e)):n=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,pv(e),r.updater=Mf,e.stateNode=r,r._reactInternals=e,cm(e,s,i,t),e=fm(null,e,s,!0,n,t)):(e.tag=0,ze&&n&&ov(e),Dt(null,e,r,t),e=e.child),e;case 16:s=e.elementType;e:{switch(Nc(i,e),i=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=MS(s),i=Wi(s,i),r){case 0:e=dm(null,e,s,i,t);break e;case 1:e=Hb(null,e,s,i,t);break e;case 11:e=jb(null,e,s,i,t);break e;case 14:e=Ub(null,e,s,Wi(s.type,i),t);break e}throw Error(Z(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Wi(s,r),dm(i,e,s,r,t);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Wi(s,r),Hb(i,e,s,r,t);case 3:e:{if(Dw(e),i===null)throw Error(Z(387));s=e.pendingProps,n=e.memoizedState,r=n.element,uw(i,e),Cd(e,s,null,t);var a=e.memoizedState;if(s=a.element,n.isDehydrated)if(n={element:s,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=n,e.memoizedState=n,e.flags&256){r=Eo(Error(Z(423)),e),e=$b(i,e,s,t,r);break e}else if(s!==r){r=Eo(Error(Z(424)),e),e=$b(i,e,s,t,r);break e}else for(ai=Br(e.stateNode.containerInfo.firstChild),oi=e,ze=!0,Hi=null,t=ow(e,null,s,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(xo(),s===r){e=Js(i,e,t);break e}Dt(i,e,s,t)}e=e.child}return e;case 5:return cw(e),i===null&&om(e),s=e.type,r=e.pendingProps,n=i!==null?i.memoizedProps:null,a=r.children,im(s,r)?a=null:n!==null&&im(s,n)&&(e.flags|=32),Fw(i,e),Dt(i,e,a,t),e.child;case 6:return i===null&&om(e),null;case 13:return Ow(i,e,t);case 4:return mv(e,e.stateNode.containerInfo),s=e.pendingProps,i===null?e.child=So(e,null,s,t):Dt(i,e,s,t),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Wi(s,r),jb(i,e,s,r,t);case 7:return Dt(i,e,e.pendingProps,t),e.child;case 8:return Dt(i,e,e.pendingProps.children,t),e.child;case 12:return Dt(i,e,e.pendingProps.children,t),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,n=e.memoizedProps,a=r.value,Te(Ad,s._currentValue),s._currentValue=a,n!==null)if(Gi(n.value,a)){if(n.children===r.children&&!Xt.current){e=Js(i,e,t);break e}}else for(n=e.child,n!==null&&(n.return=e);n!==null;){var o=n.dependencies;if(o!==null){a=n.child;for(var l=o.firstContext;l!==null;){if(l.context===s){if(n.tag===1){l=Xs(-1,t&-t),l.tag=2;var c=n.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}n.lanes|=t,l=n.alternate,l!==null&&(l.lanes|=t),lm(n.return,t,e),o.lanes|=t;break}l=l.next}}else if(n.tag===10)a=n.type===e.type?null:n.child;else if(n.tag===18){if(a=n.return,a===null)throw Error(Z(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),lm(a,t,e),a=n.sibling}else a=n.child;if(a!==null)a.return=n;else for(a=n;a!==null;){if(a===e){a=null;break}if(n=a.sibling,n!==null){n.return=a.return,a=n;break}a=a.return}n=a}Dt(i,e,r.children,t),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,uo(e,t),r=Pi(r),s=s(r),e.flags|=1,Dt(i,e,s,t),e.child;case 14:return s=e.type,r=Wi(s,e.pendingProps),r=Wi(s.type,r),Ub(i,e,s,r,t);case 15:return Tw(i,e,e.type,e.pendingProps,t);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Wi(s,r),Nc(i,e),e.tag=1,Yt(s)?(i=!0,kd(e)):i=!1,uo(e,t),Pw(e,s,r),cm(e,s,r,t),fm(null,e,s,!0,i,t);case 19:return zw(i,e,t);case 22:return Nw(i,e,t)}throw Error(Z(156,e.tag))};function t_(i,e){return Cy(i,e)}function CS(i,e,t,s){this.tag=i,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ci(i,e,t,s){return new CS(i,e,t,s)}function Pv(i){return i=i.prototype,!(!i||!i.isReactComponent)}function MS(i){if(typeof i=="function")return Pv(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Xg)return 11;if(i===Yg)return 14}return 2}function $r(i,e){var t=i.alternate;return t===null?(t=Ci(i.tag,e,i.key,i.mode),t.elementType=i.elementType,t.type=i.type,t.stateNode=i.stateNode,t.alternate=i,i.alternate=t):(t.pendingProps=e,t.type=i.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=i.flags&14680064,t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,e=i.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=i.sibling,t.index=i.index,t.ref=i.ref,t}function Oc(i,e,t,s,r,n){var a=2;if(s=i,typeof i=="function")Pv(i)&&(a=1);else if(typeof i=="string")a=5;else e:switch(i){case Pa:return Bn(t.children,r,n,e);case Kg:a=8,r|=8;break;case Np:return i=Ci(12,t,e,r|2),i.elementType=Np,i.lanes=n,i;case Fp:return i=Ci(13,t,e,r),i.elementType=Fp,i.lanes=n,i;case Dp:return i=Ci(19,t,e,r),i.elementType=Dp,i.lanes=n,i;case cy:return Rf(t,r,n,e);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case ly:a=10;break e;case uy:a=9;break e;case Xg:a=11;break e;case Yg:a=14;break e;case pr:a=16,s=null;break e}throw Error(Z(130,i==null?i:typeof i,""))}return e=Ci(a,t,e,r),e.elementType=i,e.type=s,e.lanes=n,e}function Bn(i,e,t,s){return i=Ci(7,i,s,e),i.lanes=t,i}function Rf(i,e,t,s){return i=Ci(22,i,s,e),i.elementType=cy,i.lanes=t,i.stateNode={isHidden:!1},i}function vp(i,e,t){return i=Ci(6,i,null,e),i.lanes=t,i}function bp(i,e,t){return e=Ci(4,i.children!==null?i.children:[],i.key,e),e.lanes=t,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}function LS(i,e,t,s,r){this.tag=e,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zf(0),this.expirationTimes=Zf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zf(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Rv(i,e,t,s,r,n,a,o,l){return i=new LS(i,e,t,o,l),e===1?(e=1,n===!0&&(e|=8)):e=0,n=Ci(3,null,null,e),i.current=n,n.stateNode=i,n.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},pv(n),i}function PS(i,e,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:La,key:s==null?null:""+s,children:i,containerInfo:e,implementation:t}}function i_(i){if(!i)return Gr;i=i._reactInternals;e:{if(Xn(i)!==i||i.tag!==1)throw Error(Z(170));var e=i;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(i.tag===1){var t=i.type;if(Yt(t))return tw(i,t,e)}return e}function s_(i,e,t,s,r,n,a,o,l){return i=Rv(t,s,!0,i,r,n,a,o,l),i.context=i_(null),t=i.current,s=zt(),r=Hr(t),n=Xs(s,r),n.callback=e??null,jr(t,n,r),i.current.lanes=r,ju(i,r,s),Qt(i,s),i}function If(i,e,t,s){var r=e.current,n=zt(),a=Hr(r);return t=i_(t),e.context===null?e.context=t:e.pendingContext=t,e=Xs(n,a),e.payload={element:i},s=s===void 0?null:s,s!==null&&(e.callback=s),i=jr(r,e,a),i!==null&&(Vi(i,r,a,n),Rc(i,r,a)),a}function Fd(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function e0(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var t=i.retryLane;i.retryLane=t!==0&&t<e?t:e}}function Iv(i,e){e0(i,e),(i=i.alternate)&&e0(i,e)}function RS(){return null}var r_=typeof reportError=="function"?reportError:function(i){console.error(i)};function Tv(i){this._internalRoot=i}Tf.prototype.render=Tv.prototype.render=function(i){var e=this._internalRoot;if(e===null)throw Error(Z(409));If(i,e,null,null)};Tf.prototype.unmount=Tv.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var e=i.containerInfo;Vn(function(){If(null,i,null,null)}),e[Qs]=null}};function Tf(i){this._internalRoot=i}Tf.prototype.unstable_scheduleHydration=function(i){if(i){var e=Ny();i={blockedOn:null,target:i,priority:e};for(var t=0;t<wr.length&&e!==0&&e<wr[t].priority;t++);wr.splice(t,0,i),t===0&&Dy(i)}};function Nv(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Nf(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function t0(){}function IS(i,e,t,s,r){if(r){if(typeof s=="function"){var n=s;s=function(){var c=Fd(a);n.call(c)}}var a=s_(e,s,i,0,null,!1,!1,"",t0);return i._reactRootContainer=a,i[Qs]=a.current,Lu(i.nodeType===8?i.parentNode:i),Vn(),a}for(;r=i.lastChild;)i.removeChild(r);if(typeof s=="function"){var o=s;s=function(){var c=Fd(l);o.call(c)}}var l=Rv(i,0,!1,null,null,!1,!1,"",t0);return i._reactRootContainer=l,i[Qs]=l.current,Lu(i.nodeType===8?i.parentNode:i),Vn(function(){If(e,l,t,s)}),l}function Ff(i,e,t,s,r){var n=t._reactRootContainer;if(n){var a=n;if(typeof r=="function"){var o=r;r=function(){var l=Fd(a);o.call(l)}}If(e,a,i,r)}else a=IS(t,e,i,r,s);return Fd(a)}Iy=function(i){switch(i.tag){case 3:var e=i.stateNode;if(e.current.memoizedState.isDehydrated){var t=Qo(e.pendingLanes);t!==0&&(Jg(e,t|1),Qt(e,Xe()),!(Ae&6)&&(Co=Xe()+500,Yr()))}break;case 13:Vn(function(){var s=Zs(i,1);if(s!==null){var r=zt();Vi(s,i,1,r)}}),Iv(i,1)}};ev=function(i){if(i.tag===13){var e=Zs(i,134217728);if(e!==null){var t=zt();Vi(e,i,134217728,t)}Iv(i,134217728)}};Ty=function(i){if(i.tag===13){var e=Hr(i),t=Zs(i,e);if(t!==null){var s=zt();Vi(t,i,e,s)}Iv(i,e)}};Ny=function(){return Ce};Fy=function(i,e){var t=Ce;try{return Ce=i,e()}finally{Ce=t}};Gp=function(i,e,t){switch(e){case"input":if(Wp(i,t),e=t.name,t.type==="radio"&&e!=null){for(t=i;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var s=t[e];if(s!==i&&s.form===i.form){var r=Af(s);if(!r)throw Error(Z(90));dy(s),Wp(s,r)}}}break;case"textarea":py(i,t);break;case"select":e=t.value,e!=null&&no(i,!!t.multiple,e,!1)}};_y=Cv;ky=Vn;var TS={usingClientEntryPoint:!1,Events:[Hu,Na,Af,yy,wy,Cv]},Uo={findFiberByHostInstance:Cn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},NS={bundleType:Uo.bundleType,version:Uo.version,rendererPackageName:Uo.rendererPackageName,rendererConfig:Uo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tr.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Ay(i),i===null?null:i.stateNode},findFiberByHostInstance:Uo.findFiberByHostInstance||RS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mc.isDisabled&&mc.supportsFiber)try{_f=mc.inject(NS),vs=mc}catch{}}ui.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TS;ui.createPortal=function(i,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nv(e))throw Error(Z(200));return PS(i,e,null,t)};ui.createRoot=function(i,e){if(!Nv(i))throw Error(Z(299));var t=!1,s="",r=r_;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Rv(i,1,!1,null,null,t,!1,s,r),i[Qs]=e.current,Lu(i.nodeType===8?i.parentNode:i),new Tv(e)};ui.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(Z(188)):(i=Object.keys(i).join(","),Error(Z(268,i)));return i=Ay(e),i=i===null?null:i.stateNode,i};ui.flushSync=function(i){return Vn(i)};ui.hydrate=function(i,e,t){if(!Nf(e))throw Error(Z(200));return Ff(null,i,e,!0,t)};ui.hydrateRoot=function(i,e,t){if(!Nv(i))throw Error(Z(405));var s=t!=null&&t.hydratedSources||null,r=!1,n="",a=r_;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=s_(e,null,i,1,t??null,r,!1,n,a),i[Qs]=e.current,Lu(i),s)for(i=0;i<s.length;i++)t=s[i],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new Tf(e)};ui.render=function(i,e,t){if(!Nf(e))throw Error(Z(200));return Ff(null,i,e,!1,t)};ui.unmountComponentAtNode=function(i){if(!Nf(i))throw Error(Z(40));return i._reactRootContainer?(Vn(function(){Ff(null,null,i,!1,function(){i._reactRootContainer=null,i[Qs]=null})}),!0):!1};ui.unstable_batchedUpdates=Cv;ui.unstable_renderSubtreeIntoContainer=function(i,e,t,s){if(!Nf(t))throw Error(Z(200));if(i==null||i._reactInternals===void 0)throw Error(Z(38));return Ff(i,e,t,!1,s)};ui.version="18.3.1-next-f1338f8080-20240426";function n_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n_)}catch(i){console.error(i)}}n_(),ry.exports=ui;var FS=ry.exports,a_,i0=FS;a_=i0.createRoot,i0.hydrateRoot;const DS="modulepreload",OS=function(i){return"/"+i},s0={},gc=function(i,e,t){let s=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),a=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));s=Promise.allSettled(e.map(o=>{if(o=OS(o),o in s0)return;s0[o]=!0;const l=o.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${c}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":DS,l||(h.as="script"),h.crossOrigin="",h.href=o,a&&h.setAttribute("nonce",a),document.head.appendChild(h),l)return new Promise((d,f)=>{h.addEventListener("load",d),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}function r(n){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=n,window.dispatchEvent(a),!a.defaultPrevented)throw n}return s.then(n=>{for(const a of n||[])a.status==="rejected"&&r(a.reason);return i().catch(r)})};var iu={};iu.d=(i,e)=>{for(var t in e)iu.o(e,t)&&!iu.o(i,t)&&Object.defineProperty(i,t,{enumerable:!0,get:e[t]})};iu.o=(i,e)=>Object.prototype.hasOwnProperty.call(i,e);var pe=globalThis.pdfjsLib={};iu.d(pe,{AbortException:()=>Qn,AnnotationEditorLayer:()=>XE,AnnotationEditorParamsType:()=>me,AnnotationEditorType:()=>xe,AnnotationEditorUIManager:()=>zu,AnnotationLayer:()=>$E,AnnotationMode:()=>kr,CMapCompressionType:()=>Am,ColorPicker:()=>O1,DOMSVGFactory:()=>Ov,DrawLayer:()=>YE,FeatureTest:()=>Jt,GlobalWorkerOptions:()=>qr,ImageKind:()=>zc,InvalidPDFException:()=>l_,MissingPDFException:()=>Yn,OPS:()=>Bi,Outliner:()=>yg,PDFDataRangeTransport:()=>o1,PDFDateString:()=>v_,PDFWorker:()=>Sh,PasswordResponses:()=>jS,PermissionFlag:()=>BS,PixelsPerInch:()=>Mo,RenderingCancelledException:()=>zv,TextLayer:()=>Jd,UnexpectedResponseException:()=>Wf,Util:()=>oe,VerbosityLevel:()=>Df,XfaLayer:()=>c1,build:()=>xE,createValidAbsoluteUrl:()=>VS,fetchData:()=>$f,getDocument:()=>dE,getFilenameFromUrl:()=>iA,getPdfFilenameFromUrl:()=>sA,getXfaPageViewport:()=>rA,isDataScheme:()=>Wv,isPdfFile:()=>Bv,noContextMenu:()=>Zt,normalizeUnicode:()=>QS,renderTextLayer:()=>sE,setLayerDimensions:()=>Gn,shadow:()=>Se,updateTextLayer:()=>rE,version:()=>kE});const Rt=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),o_=[1,0,0,1,0,0],Sm=[.001,0,0,.001,0,0],zS=1e7,yp=1.35,yi={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},kr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},WS="pdfjs_internal_editor_",xe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},me={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},BS={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},_t={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},zc={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Je={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Ho={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Df={ERRORS:0,WARNINGS:1,INFOS:5},Am={NONE:0,BINARY:1},Bi={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},jS={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Of=Df.WARNINGS;function US(i){Number.isInteger(i)&&(Of=i)}function HS(){return Of}function zf(i){Of>=Df.INFOS&&console.log(`Info: ${i}`)}function be(i){Of>=Df.WARNINGS&&console.log(`Warning: ${i}`)}function Le(i){throw new Error(i)}function st(i,e){i||Le(e)}function $S(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function VS(i,e=null,t=null){if(!i)return null;try{if(t&&typeof i=="string"){if(t.addDefaultProtocol&&i.startsWith("www.")){const r=i.match(/\./g);(r==null?void 0:r.length)>=2&&(i=`http://${i}`)}if(t.tryConvertEncoding)try{i=YS(i)}catch{}}const s=e?new URL(i,e):new URL(i);if($S(s))return s}catch{}return null}function Se(i,e,t,s=!1){return Object.defineProperty(i,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const Qr=function(){function i(e,t){this.constructor===i&&Le("Cannot initialize BaseException."),this.message=e,this.name=t}return i.prototype=new Error,i.constructor=i,i}();class Em extends Qr{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Cm extends Qr{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class l_ extends Qr{constructor(e){super(e,"InvalidPDFException")}}class Yn extends Qr{constructor(e){super(e,"MissingPDFException")}}class Wf extends Qr{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class GS extends Qr{constructor(e){super(e,"FormatError")}}class Qn extends Qr{constructor(e){super(e,"AbortException")}}function u_(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&Le("Invalid argument for bytesToString");const e=i.length,t=8192;if(e<t)return String.fromCharCode.apply(null,i);const s=[];for(let r=0;r<e;r+=t){const n=Math.min(r+t,e),a=i.subarray(r,n);s.push(String.fromCharCode.apply(null,a))}return s.join("")}function Bf(i){typeof i!="string"&&Le("Invalid argument for stringToBytes");const e=i.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=i.charCodeAt(s)&255;return t}function qS(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function Fv(i){const e=Object.create(null);for(const[t,s]of i)e[t]=s;return e}function KS(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function XS(){try{return new Function(""),!0}catch{return!1}}class Jt{static get isLittleEndian(){return Se(this,"isLittleEndian",KS())}static get isEvalSupported(){return Se(this,"isEvalSupported",XS())}static get isOffscreenCanvasSupported(){return Se(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Se(this,"platform",{isMac:navigator.platform.includes("Mac")}):Se(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var e,t;return Se(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const wp=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var yn,vc,Mm;class oe{static makeHexColor(e,t,s){return`#${wp[e]}${wp[t]}${wp[s]}`}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const s=e[0]*t[0]+e[1]*t[2]+t[4],r=e[0]*t[1]+e[1]*t[3]+t[5];return[s,r]}static applyInverseTransform(e,t){const s=t[0]*t[3]-t[1]*t[2],r=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/s,n=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/s;return[r,n]}static getAxialAlignedBoundingBox(e,t){const s=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),n=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(s[0],r[0],n[0],a[0]),Math.min(s[1],r[1],n[1],a[1]),Math.max(s[0],r[0],n[0],a[0]),Math.max(s[1],r[1],n[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],s=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],n=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],o=(s+a)/2,l=Math.sqrt((s+a)**2-4*(s*a-n*r))/2,c=o+l||1,h=o-l||1;return[Math.sqrt(c),Math.sqrt(h)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>r)return null;const n=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return n>a?null:[s,n,r,a]}static bezierBoundingBox(e,t,s,r,n,a,o,l,c){return c?(c[0]=Math.min(c[0],e,o),c[1]=Math.min(c[1],t,l),c[2]=Math.max(c[2],e,o),c[3]=Math.max(c[3],t,l)):c=[Math.min(e,o),Math.min(t,l),Math.max(e,o),Math.max(t,l)],A(this,yn,Mm).call(this,e,s,n,o,t,r,a,l,3*(-e+3*(s-n)+o),6*(e-2*s+n),3*(s-e),c),A(this,yn,Mm).call(this,e,s,n,o,t,r,a,l,3*(-t+3*(r-a)+l),6*(t-2*r+a),3*(r-t),c),c}}yn=new WeakSet,vc=function(i,e,t,s,r,n,a,o,l,c){if(l<=0||l>=1)return;const h=1-l,d=l*l,f=d*l,p=h*(h*(h*i+3*l*e)+3*d*t)+f*s,v=h*(h*(h*r+3*l*n)+3*d*a)+f*o;c[0]=Math.min(c[0],p),c[1]=Math.min(c[1],v),c[2]=Math.max(c[2],p),c[3]=Math.max(c[3],v)},Mm=function(i,e,t,s,r,n,a,o,l,c,h,d){if(Math.abs(l)<1e-12){Math.abs(c)>=1e-12&&A(this,yn,vc).call(this,i,e,t,s,r,n,a,o,-h/c,d);return}const f=c**2-4*h*l;if(f<0)return;const p=Math.sqrt(f),v=2*l;A(this,yn,vc).call(this,i,e,t,s,r,n,a,o,(-c+p)/v,d),A(this,yn,vc).call(this,i,e,t,s,r,n,a,o,(-c-p)/v,d)},E(oe,yn);function YS(i){return decodeURIComponent(escape(i))}let _p=null,r0=null;function QS(i){return _p||(_p=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,r0=new Map([["","t"]])),i.replaceAll(_p,(e,t,s)=>t?t.normalize("NFKC"):r0.get(s))}function ZS(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const i=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(i);else for(let e=0;e<32;e++)i[e]=Math.floor(Math.random()*255);return u_(i)}const c_="pdfjs_internal_id_",_s={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class jf{constructor(){this.constructor===jf&&Le("Cannot initialize BaseFilterFactory.")}addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,r,n){return"none"}destroy(e=!1){}}var Wc;const JS=class h_{constructor({enableHWA:e=!1}={}){E(this,Wc,!1),this.constructor===h_&&Le("Cannot initialize BaseCanvasFactory."),x(this,Wc,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!u(this,Wc)})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Le("Abstract method `_createCanvas` called.")}};Wc=new WeakMap;let d_=JS;class Uf{constructor({baseUrl:e=null,isCompressed:t=!0}){this.constructor===Uf&&Le("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":""),s=this.isCompressed?Am.BINARY:Am.NONE;return this._fetchData(t,s).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}_fetchData(e,t){Le("Abstract method `_fetchData` called.")}}class Hf{constructor({baseUrl:e=null}){this.constructor===Hf&&Le("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetchData(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}_fetchData(e){Le("Abstract method `_fetchData` called.")}}class Dv{constructor(){this.constructor===Dv&&Le("Cannot initialize BaseSVGFactory.")}create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Le("Abstract method `_createSVG` called.")}}const xs="http://www.w3.org/2000/svg",ea=class{};ge(ea,"CSS",96),ge(ea,"PDF",72),ge(ea,"PDF_TO_CSS_UNITS",ea.CSS/ea.PDF);let Mo=ea;var Pn,js,sr,ei,Bc,ta,he,kt,ia,ja,jc,f_,Lm,sa,$o,Jo,Pm,el;class eA extends jf{constructor({docId:e,ownerDocument:t=globalThis.document}={}){super(),E(this,he),E(this,Pn),E(this,js),E(this,sr),E(this,ei),E(this,Bc),E(this,ta,0),x(this,sr,e),x(this,ei,t)}addFilter(e){if(!e)return"none";let t=u(this,he,kt).get(e);if(t)return t;const[s,r,n]=A(this,he,jc).call(this,e),a=e.length===1?s:`${s}${r}${n}`;if(t=u(this,he,kt).get(a),t)return u(this,he,kt).set(e,t),t;const o=`g_${u(this,sr)}_transfer_map_${Mi(this,ta)._++}`,l=`url(#${o})`;u(this,he,kt).set(e,l),u(this,he,kt).set(a,l);const c=A(this,he,sa).call(this,o);return A(this,he,Jo).call(this,s,r,n,c),l}addHCMFilter(e,t){var s;const r=`${e}-${t}`,n="base";let a=u(this,he,ia).get(n);if((a==null?void 0:a.key)===r||(a?((s=a.filter)==null||s.remove(),a.key=r,a.url="none",a.filter=null):(a={key:r,url:"none",filter:null},u(this,he,ia).set(n,a)),!e||!t))return a.url;const o=A(this,he,el).call(this,e);e=oe.makeHexColor(...o);const l=A(this,he,el).call(this,t);if(t=oe.makeHexColor(...l),u(this,he,ja).style.color="",e==="#000000"&&t==="#ffffff"||e===t)return a.url;const c=new Array(256);for(let v=0;v<=255;v++){const m=v/255;c[v]=m<=.03928?m/12.92:((m+.055)/1.055)**2.4}const h=c.join(","),d=`g_${u(this,sr)}_hcm_filter`,f=a.filter=A(this,he,sa).call(this,d);A(this,he,Jo).call(this,h,h,h,f),A(this,he,Lm).call(this,f);const p=(v,m)=>{const y=o[v]/255,g=l[v]/255,b=new Array(m+1);for(let w=0;w<=m;w++)b[w]=y+w/m*(g-y);return b.join(",")};return A(this,he,Jo).call(this,p(0,5),p(1,5),p(2,5),f),a.url=`url(#${d})`,a.url}addAlphaFilter(e){let t=u(this,he,kt).get(e);if(t)return t;const[s]=A(this,he,jc).call(this,[e]),r=`alpha_${s}`;if(t=u(this,he,kt).get(r),t)return u(this,he,kt).set(e,t),t;const n=`g_${u(this,sr)}_alpha_map_${Mi(this,ta)._++}`,a=`url(#${n})`;u(this,he,kt).set(e,a),u(this,he,kt).set(r,a);const o=A(this,he,sa).call(this,n);return A(this,he,Pm).call(this,s,o),a}addLuminosityFilter(e){let t=u(this,he,kt).get(e||"luminosity");if(t)return t;let s,r;if(e?([s]=A(this,he,jc).call(this,[e]),r=`luminosity_${s}`):r="luminosity",t=u(this,he,kt).get(r),t)return u(this,he,kt).set(e,t),t;const n=`g_${u(this,sr)}_luminosity_map_${Mi(this,ta)._++}`,a=`url(#${n})`;u(this,he,kt).set(e,a),u(this,he,kt).set(r,a);const o=A(this,he,sa).call(this,n);return A(this,he,f_).call(this,o),e&&A(this,he,Pm).call(this,s,o),a}addHighlightHCMFilter(e,t,s,r,n){var a;const o=`${t}-${s}-${r}-${n}`;let l=u(this,he,ia).get(e);if((l==null?void 0:l.key)===o||(l?((a=l.filter)==null||a.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},u(this,he,ia).set(e,l)),!t||!s))return l.url;const[c,h]=[t,s].map(A(this,he,el).bind(this));let d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,v]=[r,n].map(A(this,he,el).bind(this));f<d&&([d,f,p,v]=[f,d,v,p]),u(this,he,ja).style.color="";const m=(b,w,S)=>{const C=new Array(256),I=(f-d)/S,P=b/255,N=(w-b)/(255*S);let F=0;for(let T=0;T<=S;T++){const V=Math.round(d+T*I),L=P+T*N;for(let W=F;W<=V;W++)C[W]=L;F=V+1}for(let T=F;T<256;T++)C[T]=C[F-1];return C.join(",")},y=`g_${u(this,sr)}_hcm_${e}_filter`,g=l.filter=A(this,he,sa).call(this,y);return A(this,he,Lm).call(this,g),A(this,he,Jo).call(this,m(p[0],v[0],5),m(p[1],v[1],5),m(p[2],v[2],5),g),l.url=`url(#${y})`,l.url}destroy(e=!1){e&&u(this,he,ia).size!==0||(u(this,js)&&(u(this,js).parentNode.parentNode.remove(),x(this,js,null)),u(this,Pn)&&(u(this,Pn).clear(),x(this,Pn,null)),x(this,ta,0))}}Pn=new WeakMap,js=new WeakMap,sr=new WeakMap,ei=new WeakMap,Bc=new WeakMap,ta=new WeakMap,he=new WeakSet,kt=function(){return u(this,Pn)||x(this,Pn,new Map)},ia=function(){return u(this,Bc)||x(this,Bc,new Map)},ja=function(){if(!u(this,js)){const i=u(this,ei).createElement("div"),{style:e}=i;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const t=u(this,ei).createElementNS(xs,"svg");t.setAttribute("width",0),t.setAttribute("height",0),x(this,js,u(this,ei).createElementNS(xs,"defs")),i.append(t),t.append(u(this,js)),u(this,ei).body.append(i)}return u(this,js)},jc=function(i){if(i.length===1){const o=i[0],l=new Array(256);for(let h=0;h<256;h++)l[h]=o[h]/255;const c=l.join(",");return[c,c,c]}const[e,t,s]=i,r=new Array(256),n=new Array(256),a=new Array(256);for(let o=0;o<256;o++)r[o]=e[o]/255,n[o]=t[o]/255,a[o]=s[o]/255;return[r.join(","),n.join(","),a.join(",")]},f_=function(i){const e=u(this,ei).createElementNS(xs,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),i.append(e)},Lm=function(i){const e=u(this,ei).createElementNS(xs,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),i.append(e)},sa=function(i){const e=u(this,ei).createElementNS(xs,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",i),u(this,he,ja).append(e),e},$o=function(i,e,t){const s=u(this,ei).createElementNS(xs,e);s.setAttribute("type","discrete"),s.setAttribute("tableValues",t),i.append(s)},Jo=function(i,e,t,s){const r=u(this,ei).createElementNS(xs,"feComponentTransfer");s.append(r),A(this,he,$o).call(this,r,"feFuncR",i),A(this,he,$o).call(this,r,"feFuncG",e),A(this,he,$o).call(this,r,"feFuncB",t)},Pm=function(i,e){const t=u(this,ei).createElementNS(xs,"feComponentTransfer");e.append(t),A(this,he,$o).call(this,t,"feFuncA",i)},el=function(i){return u(this,he,ja).style.color=i,jv(getComputedStyle(u(this,he,ja)).getPropertyValue("color"))};class tA extends d_{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}={}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}async function $f(i,e="text"){if(tl(i,document.baseURI)){const t=await fetch(i);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const r=new XMLHttpRequest;r.open("GET",i,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class p_ extends Uf{_fetchData(e,t){return $f(e,this.isCompressed?"arraybuffer":"text").then(s=>({cMapData:s instanceof ArrayBuffer?new Uint8Array(s):Bf(s),compressionType:t}))}}class m_ extends Hf{_fetchData(e){return $f(e,"arraybuffer").then(t=>new Uint8Array(t))}}class Ov extends Dv{_createSVG(e){return document.createElementNS(xs,e)}}class Vu{constructor({viewBox:e,scale:t,rotation:s,offsetX:r=0,offsetY:n=0,dontFlip:a=!1}){this.viewBox=e,this.scale=t,this.rotation=s,this.offsetX=r,this.offsetY=n;const o=(e[2]+e[0])/2,l=(e[3]+e[1])/2;let c,h,d,f;switch(s%=360,s<0&&(s+=360),s){case 180:c=-1,h=0,d=0,f=1;break;case 90:c=0,h=1,d=1,f=0;break;case 270:c=0,h=-1,d=-1,f=0;break;case 0:c=1,h=0,d=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(d=-d,f=-f);let p,v,m,y;c===0?(p=Math.abs(l-e[1])*t+r,v=Math.abs(o-e[0])*t+n,m=(e[3]-e[1])*t,y=(e[2]-e[0])*t):(p=Math.abs(o-e[0])*t+r,v=Math.abs(l-e[1])*t+n,m=(e[2]-e[0])*t,y=(e[3]-e[1])*t),this.transform=[c*t,h*t,d*t,f*t,p-c*t*o-d*t*l,v-h*t*o-f*t*l],this.width=m,this.height=y}get rawDims(){const{viewBox:e}=this;return Se(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:n=!1}={}){return new Vu({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:n})}convertToViewportPoint(e,t){return oe.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=oe.applyTransform([e[0],e[1]],this.transform),s=oe.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){return oe.applyInverseTransform([e,t],this.transform)}}class zv extends Qr{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Wv(i){const e=i.length;let t=0;for(;t<e&&i[t].trim()==="";)t++;return i.substring(t,t+5).toLowerCase()==="data:"}function Bv(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function iA(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function sA(i,e="document.pdf"){if(typeof i!="string")return e;if(Wv(i))return be('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=t.exec(i);let n=s.exec(r[1])||s.exec(r[2])||s.exec(r[3]);if(n&&(n=n[0],n.includes("%")))try{n=s.exec(decodeURIComponent(n))[0]}catch{}return n||e}class n0{constructor(){ge(this,"started",Object.create(null)),ge(this,"times",[])}time(e){e in this.started&&be(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||be(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:r,end:n}of this.times)e.push(`${s.padEnd(t)} ${n-r}ms
`);return e.join("")}}function tl(i,e){try{const{protocol:t}=e?new URL(i,e):new URL(i);return t==="http:"||t==="https:"}catch{return!1}}function Zt(i){i.preventDefault()}function g_(i){console.log("Deprecated API usage: "+i)}let kp;class v_{static toDateObject(e){if(!e||typeof e!="string")return null;kp||(kp=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=kp.exec(e);if(!t)return null;const s=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let n=parseInt(t[3],10);n=n>=1&&n<=31?n:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const c=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,c==="-"?(a+=h,o+=d):c==="+"&&(a-=h,o-=d),new Date(Date.UTC(s,r,n,a,o,l))}}function rA(i,{scale:e=1,rotation:t=0}){const{width:s,height:r}=i.attributes.style,n=[0,0,parseInt(s),parseInt(r)];return new Vu({viewBox:n,scale:e,rotation:t})}function jv(i){if(i.startsWith("#")){const e=parseInt(i.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(e=>parseInt(e)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(be(`Not a valid color format: "${i}"`),[0,0,0])}function nA(i){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of i.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;i.set(t,jv(s))}e.remove()}function We(i){const{a:e,b:t,c:s,d:r,e:n,f:a}=i.getTransform();return[e,t,s,r,n,a]}function ks(i){const{a:e,b:t,c:s,d:r,e:n,f:a}=i.getTransform().invertSelf();return[e,t,s,r,n,a]}function Gn(i,e,t=!1,s=!0){if(e instanceof Vu){const{pageWidth:r,pageHeight:n}=e.rawDims,{style:a}=i,o=Jt.isCSSRoundSupported,l=`var(--scale-factor) * ${r}px`,c=`var(--scale-factor) * ${n}px`,h=o?`round(${l}, 1px)`:`calc(${l})`,d=o?`round(${c}, 1px)`:`calc(${c})`;!t||e.rotation%180===0?(a.width=h,a.height=d):(a.width=d,a.height=h)}s&&i.setAttribute("data-main-rotation",e.rotation)}var ra,na,Si,Ua,Rm,b_,hs,a0,o0,Dd,y_,Im;const w_=class __{constructor(e){E(this,hs),E(this,ra,null),E(this,na,null),E(this,Si),E(this,Ua,null),x(this,Si,e)}render(){const e=x(this,ra,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=u(this,Si)._uiManager._signal;e.addEventListener("contextmenu",Zt,{signal:t}),e.addEventListener("pointerdown",A(__,Rm,b_),{signal:t});const s=x(this,Ua,document.createElement("div"));s.className="buttons",e.append(s);const r=u(this,Si).toolbarPosition;if(r){const{style:n}=e,a=u(this,Si)._uiManager.direction==="ltr"?1-r[0]:r[0];n.insetInlineEnd=`${100*a}%`,n.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return A(this,hs,y_).call(this),e}hide(){var e;u(this,ra).classList.add("hidden"),(e=u(this,na))==null||e.hideDropdown()}show(){u(this,ra).classList.remove("hidden")}addAltTextButton(e){A(this,hs,Dd).call(this,e),u(this,Ua).prepend(e,u(this,hs,Im))}addColorPicker(e){x(this,na,e);const t=e.renderButton();A(this,hs,Dd).call(this,t),u(this,Ua).prepend(t,u(this,hs,Im))}remove(){var e;u(this,ra).remove(),(e=u(this,na))==null||e.destroy(),x(this,na,null)}};ra=new WeakMap,na=new WeakMap,Si=new WeakMap,Ua=new WeakMap,Rm=new WeakSet,b_=function(i){i.stopPropagation()},hs=new WeakSet,a0=function(i){u(this,Si)._focusEventsAllowed=!1,i.preventDefault(),i.stopPropagation()},o0=function(i){u(this,Si)._focusEventsAllowed=!0,i.preventDefault(),i.stopPropagation()},Dd=function(i){const e=u(this,Si)._uiManager._signal;i.addEventListener("focusin",A(this,hs,a0).bind(this),{capture:!0,signal:e}),i.addEventListener("focusout",A(this,hs,o0).bind(this),{capture:!0,signal:e}),i.addEventListener("contextmenu",Zt,{signal:e})},y_=function(){const i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",`pdfjs-editor-remove-${u(this,Si).editorType}-button`),A(this,hs,Dd).call(this,i),i.addEventListener("click",e=>{u(this,Si)._uiManager.delete()},{signal:u(this,Si)._uiManager._signal}),u(this,Ua).append(i)},Im=function(){const i=document.createElement("div");return i.className="divider",i},E(w_,Rm);let aA=w_;var Uc,wn,Ha,su,k_,x_,l0;class oA{constructor(e){E(this,su),E(this,Uc,null),E(this,wn,null),E(this,Ha),x(this,Ha,e)}show(e,t,s){const[r,n]=A(this,su,x_).call(this,t,s),{style:a}=u(this,wn)||x(this,wn,A(this,su,k_).call(this));e.append(u(this,wn)),a.insetInlineEnd=`${100*r}%`,a.top=`calc(${100*n}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,wn).remove()}}Uc=new WeakMap,wn=new WeakMap,Ha=new WeakMap,su=new WeakSet,k_=function(){const i=x(this,wn,document.createElement("div"));i.className="editToolbar",i.setAttribute("role","toolbar"),i.addEventListener("contextmenu",Zt,{signal:u(this,Ha)._signal});const e=x(this,Uc,document.createElement("div"));return e.className="buttons",i.append(e),A(this,su,l0).call(this),i},x_=function(i,e){let t=0,s=0;for(const r of i){const n=r.y+r.height;if(n<t)continue;const a=r.x+(e?r.width:0);if(n>t){s=a,t=n;continue}e?a>s&&(s=a):a<s&&(s=a)}return[e?1-s:s,t]},l0=function(){const i=document.createElement("button");i.className="highlightButton",i.tabIndex=0,i.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");i.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const t=u(this,Ha)._signal;i.addEventListener("contextmenu",Zt,{signal:t}),i.addEventListener("click",()=>{u(this,Ha).highlightSelection("floating_button")},{signal:t}),u(this,Uc).append(i)};function Od(i,e,t){for(const s of t)e.addEventListener(s,i[s].bind(i))}function lA(i){return Math.round(Math.min(255,Math.max(1,255*i))).toString(16).padStart(2,"0")}var Tm;class uA{constructor(){E(this,Tm,0)}get id(){return`${WS}${Mi(this,Tm)._++}`}}Tm=new WeakMap;var zd,Nm,Gt,Hc,Fm;const S_=class{constructor(){E(this,Hc),E(this,zd,ZS()),E(this,Nm,0),E(this,Gt,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',t=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const r=s.decode().then(()=>(t.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(t.getImageData(0,0,1,1).data.buffer)[0]===0));return Se(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:s,size:r,type:n}=e;return A(this,Hc,Fm).call(this,`${t}_${s}_${r}_${n}`,e)}async getFromUrl(e){return A(this,Hc,Fm).call(this,e,e)}async getFromId(e){u(this,Gt)||x(this,Gt,new Map);const t=u(this,Gt).get(e);return t?t.bitmap?(t.refCounter+=1,t):t.file?this.getFromFile(t.file):this.getFromUrl(t.url):null}getSvgUrl(e){const t=u(this,Gt).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){u(this,Gt)||x(this,Gt,new Map);const t=u(this,Gt).get(e);t&&(t.refCounter-=1,t.refCounter===0&&(t.bitmap=null))}isValidId(e){return e.startsWith(`image_${u(this,zd)}_`)}};zd=new WeakMap,Nm=new WeakMap,Gt=new WeakMap,Hc=new WeakSet,Fm=async function(i,e){u(this,Gt)||x(this,Gt,new Map);let t=u(this,Gt).get(i);if(t===null)return null;if(t!=null&&t.bitmap)return t.refCounter+=1,t;try{t||(t={bitmap:null,id:`image_${u(this,zd)}_${Mi(this,Nm)._++}`,refCounter:0,isSvg:!1});let s;if(typeof e=="string"?(t.url=e,s=await $f(e,"blob")):s=t.file=e,s.type==="image/svg+xml"){const r=S_._isSVGFittingCanvas,n=new FileReader,a=new Image,o=new Promise((l,c)=>{a.onload=()=>{t.bitmap=a,t.isSvg=!0,l()},n.onload=async()=>{const h=t.svgUrl=n.result;a.src=await r?`${h}#svgView(preserveAspectRatio(none))`:h},a.onerror=n.onerror=c});n.readAsDataURL(s),await o}else t.bitmap=await createImageBitmap(s);t.refCounter=1}catch(s){console.error(s),t=null}return u(this,Gt).set(i,t),t&&u(this,Gt).set(t.id,t),t};let cA=S_;var ft,tn,$c,et;class hA{constructor(e=128){E(this,ft,[]),E(this,tn,!1),E(this,$c),E(this,et,-1),x(this,$c,e)}add({cmd:e,undo:t,post:s,mustExec:r,type:n=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(r&&e(),u(this,tn))return;const l={cmd:e,undo:t,post:s,type:n};if(u(this,et)===-1){u(this,ft).length>0&&(u(this,ft).length=0),x(this,et,0),u(this,ft).push(l);return}if(a&&u(this,ft)[u(this,et)].type===n){o&&(l.undo=u(this,ft)[u(this,et)].undo),u(this,ft)[u(this,et)]=l;return}const c=u(this,et)+1;c===u(this,$c)?u(this,ft).splice(0,1):(x(this,et,c),c<u(this,ft).length&&u(this,ft).splice(c)),u(this,ft).push(l)}undo(){if(u(this,et)===-1)return;x(this,tn,!0);const{undo:e,post:t}=u(this,ft)[u(this,et)];e(),t==null||t(),x(this,tn,!1),x(this,et,u(this,et)-1)}redo(){if(u(this,et)<u(this,ft).length-1){x(this,et,u(this,et)+1),x(this,tn,!0);const{cmd:e,post:t}=u(this,ft)[u(this,et)];e(),t==null||t(),x(this,tn,!1)}}hasSomethingToUndo(){return u(this,et)!==-1}hasSomethingToRedo(){return u(this,et)<u(this,ft).length-1}destroy(){x(this,ft,null)}}ft=new WeakMap,tn=new WeakMap,$c=new WeakMap,et=new WeakMap;var Dm,A_;class Gu{constructor(e){E(this,Dm),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Jt.platform;for(const[s,r,n={}]of e)for(const a of s){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:r,options:n}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:r,options:n}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(A(this,Dm,A_).call(this,t));if(!s)return;const{callback:r,options:{bubbles:n=!1,args:a=[],checker:o=null}}=s;o&&!o(e,t)||(r.bind(e,...a,t)(),n||(t.stopPropagation(),t.preventDefault()))}}Dm=new WeakSet,A_=function(i){i.altKey&&this.buffer.push("alt"),i.ctrlKey&&this.buffer.push("ctrl"),i.metaKey&&this.buffer.push("meta"),i.shiftKey&&this.buffer.push("shift"),this.buffer.push(i.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const E_=class C_{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return nA(e),Se(this,"_colors",e)}convert(e){const t=jv(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,r]of this._colors)if(r.every((n,a)=>n===t[a]))return C_._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?oe.makeHexColor(...t):e}};ge(E_,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let dA=E_;var il,fi,lt,At,sl,rr,aa,Qi,rl,oa,Ss,Zi,la,Wd,Vc,As,nl,_n,as,Om,kn,Gc,ua,qc,al,Mt,Me,nr,ca,ol,Kc,Xc,Yc,Qc,Zc,Jc,eh,th,ih,sh,rh,nh,sn,Es,ar,ah,ue,oh,u0,c0,Bd,M_,L_,P_,zm,R_,Wm,Bm,I_,Ft,gr,T_,N_,jm,F_,ll,Um;const Hm=class $m{constructor(e,t,s,r,n,a,o,l,c){E(this,ue),E(this,il,new AbortController),E(this,fi,null),E(this,lt,new Map),E(this,At,new Map),E(this,sl,null),E(this,rr,null),E(this,aa,null),E(this,Qi,new hA),E(this,rl,0),E(this,oa,new Set),E(this,Ss,null),E(this,Zi,null),E(this,la,new Set),E(this,Wd,!1),E(this,Vc,null),E(this,As,null),E(this,nl,null),E(this,_n,!1),E(this,as,null),E(this,Om,new uA),E(this,kn,!1),E(this,Gc,!1),E(this,ua,null),E(this,qc,null),E(this,al,null),E(this,Mt,xe.NONE),E(this,Me,new Set),E(this,nr,null),E(this,ca,null),E(this,ol,null),E(this,Kc,this.blur.bind(this)),E(this,Xc,this.focus.bind(this)),E(this,Yc,this.copy.bind(this)),E(this,Qc,this.cut.bind(this)),E(this,Zc,this.paste.bind(this)),E(this,Jc,this.keydown.bind(this)),E(this,eh,this.keyup.bind(this)),E(this,th,this.onEditingAction.bind(this)),E(this,ih,this.onPageChanging.bind(this)),E(this,sh,this.onScaleChanging.bind(this)),E(this,rh,this.onRotationChanging.bind(this)),E(this,nh,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),E(this,sn,[0,0]),E(this,Es,null),E(this,ar,null),E(this,ah,null),this._signal=u(this,il).signal,x(this,ar,e),x(this,ah,t),x(this,sl,s),this._eventBus=r,this._eventBus._on("editingaction",u(this,th)),this._eventBus._on("pagechanging",u(this,ih)),this._eventBus._on("scalechanging",u(this,sh)),this._eventBus._on("rotationchanging",u(this,rh)),A(this,ue,M_).call(this),A(this,ue,I_).call(this),A(this,ue,zm).call(this),x(this,rr,n.annotationStorage),x(this,Vc,n.filterFactory),x(this,ca,a),x(this,nl,o||null),x(this,Wd,l),x(this,al,c||null),this.viewParameters={realScale:Mo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=$m.prototype,t=a=>u(a,ar).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),s=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},r=this.TRANSLATE_SMALL,n=this.TRANSLATE_BIG;return Se(this,"_keyboardManager",new Gu([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&u(a,ar).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&u(a,ar).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-n,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[n,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-n],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,n],checker:t}]]))}destroy(){var e,t,s;(e=u(this,il))==null||e.abort(),x(this,il,null),this._signal=null,this._eventBus._off("editingaction",u(this,th)),this._eventBus._off("pagechanging",u(this,ih)),this._eventBus._off("scalechanging",u(this,sh)),this._eventBus._off("rotationchanging",u(this,rh));for(const r of u(this,At).values())r.destroy();u(this,At).clear(),u(this,lt).clear(),u(this,la).clear(),x(this,fi,null),u(this,Me).clear(),u(this,Qi).destroy(),(t=u(this,sl))==null||t.destroy(),(s=u(this,as))==null||s.hide(),x(this,as,null),u(this,As)&&(clearTimeout(u(this,As)),x(this,As,null)),u(this,Es)&&(clearTimeout(u(this,Es)),x(this,Es,null))}async mlGuess(e){var t;return((t=u(this,al))==null?void 0:t.guess(e))||null}get hasMLManager(){return!!u(this,al)}get hcmFilter(){return Se(this,"hcmFilter",u(this,ca)?u(this,Vc).addHCMFilter(u(this,ca).foreground,u(this,ca).background):"none")}get direction(){return Se(this,"direction",getComputedStyle(u(this,ar)).direction)}get highlightColors(){return Se(this,"highlightColors",u(this,nl)?new Map(u(this,nl).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return Se(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){x(this,qc,e)}editAltText(e){var t;(t=u(this,sl))==null||t.editAltText(this,e)}onPageChanging({pageNumber:e}){x(this,rl,e-1)}focusMainContainer(){u(this,ar).focus()}findParent(e,t){for(const s of u(this,At).values()){const{x:r,y:n,width:a,height:o}=s.div.getBoundingClientRect();if(e>=r&&e<=r+a&&t>=n&&t<=n+o)return s}return null}disableUserSelect(e=!1){u(this,ah).classList.toggle("noUserSelect",e)}addShouldRescale(e){u(this,la).add(e)}removeShouldRescale(e){u(this,la).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Mo.PDF_TO_CSS_UNITS;for(const t of u(this,la))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:s,anchorOffset:r,focusNode:n,focusOffset:a}=t,o=t.toString(),l=A(this,ue,oh).call(this,t).closest(".textLayer"),c=this.getSelectionBoxes(l);if(c){t.empty(),u(this,Mt)===xe.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:xe.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const h of u(this,At).values())if(h.hasTextLayer(l)){h.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:c,anchorNode:s,anchorOffset:r,focusNode:n,focusOffset:a,text:o});break}}}addToAnnotationStorage(e){!e.isEmpty()&&u(this,rr)&&!u(this,rr).has(e.id)&&u(this,rr).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,u(this,_n)&&(x(this,_n,!1),A(this,ue,Bd).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of u(this,Me))if(t.div.contains(e)){x(this,ua,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!u(this,ua))return;const[e,t]=u(this,ua);x(this,ua,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){A(this,ue,zm).call(this),A(this,ue,Wm).call(this)}removeEditListeners(){A(this,ue,R_).call(this),A(this,ue,Bm).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of u(this,Zi))if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of u(this,Zi))if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var t;if(e.preventDefault(),(t=u(this,fi))==null||t.commitOrRemove(),!this.hasSelection)return;const s=[];for(const r of u(this,Me)){const n=r.serialize(!0);n&&s.push(n)}s.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(s))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:t}=e;for(const n of t.items)for(const a of u(this,Zi))if(a.isHandlingMimeForPasting(n.type)){a.paste(n,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(n){be(`paste: "${n.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const n=[];for(const l of s){const c=r.deserialize(l);if(!c)return;n.push(c)}const a=()=>{for(const l of n)A(this,ue,jm).call(this,l);A(this,ue,Um).call(this,n)},o=()=>{for(const l of n)l.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(n){be(`paste: "${n.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,Mt)!==xe.NONE&&!this.isEditorHandlingKeyboard&&$m._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,_n)&&(x(this,_n,!1),A(this,ue,Bd).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(A(this,ue,L_).call(this),A(this,ue,Wm).call(this),A(this,ue,Ft).call(this,{isEditing:u(this,Mt)!==xe.NONE,isEmpty:A(this,ue,ll).call(this),hasSomethingToUndo:u(this,Qi).hasSomethingToUndo(),hasSomethingToRedo:u(this,Qi).hasSomethingToRedo(),hasSelectedEditor:!1})):(A(this,ue,P_).call(this),A(this,ue,Bm).call(this),A(this,ue,Ft).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!u(this,Zi)){x(this,Zi,e);for(const t of u(this,Zi))A(this,ue,gr).call(this,t.defaultPropertiesToUpdate)}}getId(){return u(this,Om).id}get currentLayer(){return u(this,At).get(u(this,rl))}getLayer(e){return u(this,At).get(e)}get currentPageIndex(){return u(this,rl)}addLayer(e){u(this,At).set(e.pageIndex,e),u(this,kn)?e.enable():e.disable()}removeLayer(e){u(this,At).delete(e.pageIndex)}updateMode(e,t=null,s=!1){if(u(this,Mt)!==e){if(x(this,Mt,e),e===xe.NONE){this.setEditingState(!1),A(this,ue,N_).call(this);return}this.setEditingState(!0),A(this,ue,T_).call(this),this.unselectAll();for(const r of u(this,At).values())r.updateMode(e);if(!t&&s){this.addNewEditorFromKeyboard();return}if(t){for(const r of u(this,lt).values())if(r.annotationElementId===t){this.setSelected(r),r.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==u(this,Mt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var s;if(u(this,Zi)){switch(e){case me.CREATE:this.currentLayer.addNewEditor();return;case me.HIGHLIGHT_DEFAULT_COLOR:(s=u(this,qc))==null||s.updateColor(t);break;case me.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,ol)||x(this,ol,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const r of u(this,Me))r.updateParams(e,t);for(const r of u(this,Zi))r.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var r;for(const n of u(this,lt).values())n.editorType===e&&n.show(t);(((r=u(this,ol))==null?void 0:r.get(me.HIGHLIGHT_SHOW_ALL))??!0)!==t&&A(this,ue,gr).call(this,[[me.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(u(this,Gc)!==e){x(this,Gc,e);for(const t of u(this,At).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const s of u(this,lt).values())s.pageIndex===e&&t.push(s);return t}getEditor(e){return u(this,lt).get(e)}addEditor(e){u(this,lt).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(u(this,As)&&clearTimeout(u(this,As)),x(this,As,setTimeout(()=>{this.focusMainContainer(),x(this,As,null)},0))),u(this,lt).delete(e.id),this.unselect(e),(!e.annotationElementId||!u(this,oa).has(e.annotationElementId))&&((t=u(this,rr))==null||t.remove(e.id))}addDeletedAnnotationElement(e){u(this,oa).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return u(this,oa).has(e)}removeDeletedAnnotationElement(e){u(this,oa).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){u(this,fi)!==e&&(x(this,fi,e),e&&A(this,ue,gr).call(this,e.propertiesToUpdate))}updateUI(e){u(this,ue,F_)===e&&A(this,ue,gr).call(this,e.propertiesToUpdate)}toggleSelected(e){if(u(this,Me).has(e)){u(this,Me).delete(e),e.unselect(),A(this,ue,Ft).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,Me).add(e),e.select(),A(this,ue,gr).call(this,e.propertiesToUpdate),A(this,ue,Ft).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of u(this,Me))t!==e&&t.unselect();u(this,Me).clear(),u(this,Me).add(e),e.select(),A(this,ue,gr).call(this,e.propertiesToUpdate),A(this,ue,Ft).call(this,{hasSelectedEditor:!0})}isSelected(e){return u(this,Me).has(e)}get firstSelectedEditor(){return u(this,Me).values().next().value}unselect(e){e.unselect(),u(this,Me).delete(e),A(this,ue,Ft).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,Me).size!==0}get isEnterHandled(){return u(this,Me).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){u(this,Qi).undo(),A(this,ue,Ft).call(this,{hasSomethingToUndo:u(this,Qi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:A(this,ue,ll).call(this)})}redo(){u(this,Qi).redo(),A(this,ue,Ft).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,Qi).hasSomethingToRedo(),isEmpty:A(this,ue,ll).call(this)})}addCommands(e){u(this,Qi).add(e),A(this,ue,Ft).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:A(this,ue,ll).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...u(this,Me)],t=()=>{for(const r of e)r.remove()},s=()=>{for(const r of e)A(this,ue,jm).call(this,r)};this.addCommands({cmd:t,undo:s,mustExec:!0})}commitOrRemove(){var e;(e=u(this,fi))==null||e.commitOrRemove()}hasSomethingToControl(){return u(this,fi)||this.hasSelection}selectAll(){for(const e of u(this,Me))e.commit();A(this,ue,Um).call(this,u(this,lt).values())}unselectAll(){if(!(u(this,fi)&&(u(this,fi).commitOrRemove(),u(this,Mt)!==xe.NONE))&&this.hasSelection){for(const e of u(this,Me))e.unselect();u(this,Me).clear(),A(this,ue,Ft).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;u(this,sn)[0]+=e,u(this,sn)[1]+=t;const[r,n]=u(this,sn),a=[...u(this,Me)];u(this,Es)&&clearTimeout(u(this,Es)),x(this,Es,setTimeout(()=>{x(this,Es,null),u(this,sn)[0]=u(this,sn)[1]=0,this.addCommands({cmd:()=>{for(const l of a)u(this,lt).has(l.id)&&l.translateInPage(r,n)},undo:()=>{for(const l of a)u(this,lt).has(l.id)&&l.translateInPage(-r,-n)},mustExec:!1})},1e3));for(const l of a)l.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),x(this,Ss,new Map);for(const e of u(this,Me))u(this,Ss).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,Ss))return!1;this.disableUserSelect(!1);const e=u(this,Ss);x(this,Ss,null);let t=!1;for(const[{x:r,y:n,pageIndex:a},o]of e)o.newX=r,o.newY=n,o.newPageIndex=a,t||(t=r!==o.savedX||n!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const s=(r,n,a,o)=>{if(u(this,lt).has(r.id)){const l=u(this,At).get(o);l?r._setParentAndPosition(l,n,a):(r.pageIndex=o,r.x=n,r.y=a)}};return this.addCommands({cmd:()=>{for(const[r,{newX:n,newY:a,newPageIndex:o}]of e)s(r,n,a,o)},undo:()=>{for(const[r,{savedX:n,savedY:a,savedPageIndex:o}]of e)s(r,n,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(u(this,Ss))for(const s of u(this,Ss).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||u(this,Me).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return u(this,fi)===e}getActive(){return u(this,fi)}getMode(){return u(this,Mt)}get imageManager(){return Se(this,"imageManager",new cA)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let c=0,h=t.rangeCount;c<h;c++)if(!e.contains(t.getRangeAt(c).commonAncestorContainer))return null;const{x:s,y:r,width:n,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(c,h,d,f)=>({x:(h-r)/a,y:1-(c+d-s)/n,width:f/a,height:d/n});break;case"180":o=(c,h,d,f)=>({x:1-(c+d-s)/n,y:1-(h+f-r)/a,width:d/n,height:f/a});break;case"270":o=(c,h,d,f)=>({x:1-(h+f-r)/a,y:(c-s)/n,width:f/a,height:d/n});break;default:o=(c,h,d,f)=>({x:(c-s)/n,y:(h-r)/a,width:d/n,height:f/a});break}const l=[];for(let c=0,h=t.rangeCount;c<h;c++){const d=t.getRangeAt(c);if(!d.collapsed)for(const{x:f,y:p,width:v,height:m}of d.getClientRects())v===0||m===0||l.push(o(f,p,v,m))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(u(this,aa)||x(this,aa,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=u(this,aa))==null||t.delete(e)}renderAnnotationElement(e){var t;const s=(t=u(this,aa))==null?void 0:t.get(e.data.id);if(!s)return;const r=u(this,rr).getRawValue(s);r&&(u(this,Mt)===xe.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}};il=new WeakMap,fi=new WeakMap,lt=new WeakMap,At=new WeakMap,sl=new WeakMap,rr=new WeakMap,aa=new WeakMap,Qi=new WeakMap,rl=new WeakMap,oa=new WeakMap,Ss=new WeakMap,Zi=new WeakMap,la=new WeakMap,Wd=new WeakMap,Vc=new WeakMap,As=new WeakMap,nl=new WeakMap,_n=new WeakMap,as=new WeakMap,Om=new WeakMap,kn=new WeakMap,Gc=new WeakMap,ua=new WeakMap,qc=new WeakMap,al=new WeakMap,Mt=new WeakMap,Me=new WeakMap,nr=new WeakMap,ca=new WeakMap,ol=new WeakMap,Kc=new WeakMap,Xc=new WeakMap,Yc=new WeakMap,Qc=new WeakMap,Zc=new WeakMap,Jc=new WeakMap,eh=new WeakMap,th=new WeakMap,ih=new WeakMap,sh=new WeakMap,rh=new WeakMap,nh=new WeakMap,sn=new WeakMap,Es=new WeakMap,ar=new WeakMap,ah=new WeakMap,ue=new WeakSet,oh=function({anchorNode:i}){return i.nodeType===Node.TEXT_NODE?i.parentElement:i},u0=function(){const i=document.getSelection();if(!i||i.isCollapsed)return;const e=A(this,ue,oh).call(this,i).closest(".textLayer"),t=this.getSelectionBoxes(e);t&&(u(this,as)||x(this,as,new oA(this)),u(this,as).show(e,t,this.direction==="ltr"))},c0=function(){var i,e,t;const s=document.getSelection();if(!s||s.isCollapsed){u(this,nr)&&((i=u(this,as))==null||i.hide(),x(this,nr,null),A(this,ue,Ft).call(this,{hasSelectedText:!1}));return}const{anchorNode:r}=s;if(r!==u(this,nr)){if(!A(this,ue,oh).call(this,s).closest(".textLayer")){u(this,nr)&&((e=u(this,as))==null||e.hide(),x(this,nr,null),A(this,ue,Ft).call(this,{hasSelectedText:!1}));return}if((t=u(this,as))==null||t.hide(),x(this,nr,r),A(this,ue,Ft).call(this,{hasSelectedText:!0}),!(u(this,Mt)!==xe.HIGHLIGHT&&u(this,Mt)!==xe.NONE)&&(u(this,Mt)===xe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),x(this,_n,this.isShiftKeyDown),!this.isShiftKeyDown)){const n=this._signal,a=o=>{o.type==="pointerup"&&o.button!==0||(window.removeEventListener("pointerup",a),window.removeEventListener("blur",a),o.type==="pointerup"&&A(this,ue,Bd).call(this,"main_toolbar"))};window.addEventListener("pointerup",a,{signal:n}),window.addEventListener("blur",a,{signal:n})}}},Bd=function(i=""){u(this,Mt)===xe.HIGHLIGHT?this.highlightSelection(i):u(this,Wd)&&A(this,ue,u0).call(this)},M_=function(){document.addEventListener("selectionchange",A(this,ue,c0).bind(this),{signal:this._signal})},L_=function(){const i=this._signal;window.addEventListener("focus",u(this,Xc),{signal:i}),window.addEventListener("blur",u(this,Kc),{signal:i})},P_=function(){window.removeEventListener("focus",u(this,Xc)),window.removeEventListener("blur",u(this,Kc))},zm=function(){const i=this._signal;window.addEventListener("keydown",u(this,Jc),{signal:i}),window.addEventListener("keyup",u(this,eh),{signal:i})},R_=function(){window.removeEventListener("keydown",u(this,Jc)),window.removeEventListener("keyup",u(this,eh))},Wm=function(){const i=this._signal;document.addEventListener("copy",u(this,Yc),{signal:i}),document.addEventListener("cut",u(this,Qc),{signal:i}),document.addEventListener("paste",u(this,Zc),{signal:i})},Bm=function(){document.removeEventListener("copy",u(this,Yc)),document.removeEventListener("cut",u(this,Qc)),document.removeEventListener("paste",u(this,Zc))},I_=function(){const i=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:i}),document.addEventListener("drop",this.drop.bind(this),{signal:i})},Ft=function(i){Object.entries(i).some(([e,t])=>u(this,nh)[e]!==t)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,nh),i)}),u(this,Mt)===xe.HIGHLIGHT&&i.hasSelectedEditor===!1&&A(this,ue,gr).call(this,[[me.HIGHLIGHT_FREE,!0]]))},gr=function(i){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:i})},T_=function(){if(!u(this,kn)){x(this,kn,!0);for(const i of u(this,At).values())i.enable();for(const i of u(this,lt).values())i.enable()}},N_=function(){if(this.unselectAll(),u(this,kn)){x(this,kn,!1);for(const i of u(this,At).values())i.disable();for(const i of u(this,lt).values())i.disable()}},jm=function(i){const e=u(this,At).get(i.pageIndex);e?e.addOrRebuild(i):(this.addEditor(i),this.addToAnnotationStorage(i))},F_=function(){let i=null;for(i of u(this,Me));return i},ll=function(){if(u(this,lt).size===0)return!0;if(u(this,lt).size===1)for(const i of u(this,lt).values())return i.isEmpty();return!1},Um=function(i){for(const e of u(this,Me))e.unselect();u(this,Me).clear();for(const e of i)e.isEmpty()||(u(this,Me).add(e),e.select());A(this,ue,Ft).call(this,{hasSelectedEditor:this.hasSelection})},ge(Hm,"TRANSLATE_SMALL",1),ge(Hm,"TRANSLATE_BIG",10);let zu=Hm;var xr,Sr,ts,vr,wi,ul,ms,lh,Vm;const uh=class ch{constructor(e){E(this,lh),E(this,xr,""),E(this,Sr,!1),E(this,ts,null),E(this,vr,null),E(this,wi,null),E(this,ul,!1),E(this,ms,null),x(this,ms,e)}static initialize(e){ch._l10nPromise||(ch._l10nPromise=e)}async render(){const e=x(this,ts,document.createElement("button"));e.className="altText";const t=await ch._l10nPromise.get("pdfjs-editor-alt-text-button-label");e.textContent=t,e.setAttribute("aria-label",t),e.tabIndex="0";const s=u(this,ms)._uiManager._signal;e.addEventListener("contextmenu",Zt,{signal:s}),e.addEventListener("pointerdown",n=>n.stopPropagation(),{signal:s});const r=n=>{n.preventDefault(),u(this,ms)._uiManager.editAltText(u(this,ms))};return e.addEventListener("click",r,{capture:!0,signal:s}),e.addEventListener("keydown",n=>{n.target===e&&n.key==="Enter"&&(x(this,ul,!0),r(n))},{signal:s}),await A(this,lh,Vm).call(this),e}finish(){u(this,ts)&&(u(this,ts).focus({focusVisible:u(this,ul)}),x(this,ul,!1))}isEmpty(){return!u(this,xr)&&!u(this,Sr)}get data(){return{altText:u(this,xr),decorative:u(this,Sr)}}set data({altText:e,decorative:t}){u(this,xr)===e&&u(this,Sr)===t||(x(this,xr,e),x(this,Sr,t),A(this,lh,Vm).call(this))}toggle(e=!1){u(this,ts)&&(!e&&u(this,wi)&&(clearTimeout(u(this,wi)),x(this,wi,null)),u(this,ts).disabled=!e)}destroy(){var e;(e=u(this,ts))==null||e.remove(),x(this,ts,null),x(this,vr,null)}};xr=new WeakMap,Sr=new WeakMap,ts=new WeakMap,vr=new WeakMap,wi=new WeakMap,ul=new WeakMap,ms=new WeakMap,lh=new WeakSet,Vm=async function(){var i;const e=u(this,ts);if(!e)return;if(!u(this,xr)&&!u(this,Sr)){e.classList.remove("done"),(i=u(this,vr))==null||i.remove();return}e.classList.add("done"),uh._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(r=>{e.setAttribute("aria-label",r)});let t=u(this,vr);if(!t){x(this,vr,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip");const r=t.id=`alt-text-tooltip-${u(this,ms).id}`;e.setAttribute("aria-describedby",r);const n=100,a=u(this,ms)._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(u(this,wi)),x(this,wi,null)},{once:!0}),e.addEventListener("mouseenter",()=>{x(this,wi,setTimeout(()=>{x(this,wi,null),u(this,vr).classList.add("show"),u(this,ms)._reportTelemetry({action:"alt_text_tooltip"})},n))},{signal:a}),e.addEventListener("mouseleave",()=>{var o;u(this,wi)&&(clearTimeout(u(this,wi)),x(this,wi,null)),(o=u(this,vr))==null||o.classList.remove("show")},{signal:a})}t.innerText=u(this,Sr)?await uh._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):u(this,xr),t.parentNode||e.append(t);const s=u(this,ms).getImageForAltText();s==null||s.setAttribute("aria-describedby",t.id)},ge(uh,"_l10nPromise",null);let h0=uh;var ha,os,Nt,cl,da,Lt,$a,hl,dl,Tt,jd,Va,Cs,hh,fa,Fr,Ms,fl,pl,pi,dh,Gm,Oe,qm,Ud,Km,xp,D_,d0,Sp,Xm,Ym,O_,z_,W_,B_,Qm,ru;const Ls=class pt{constructor(e){E(this,Oe),E(this,ha,null),E(this,os,null),E(this,Nt,null),E(this,cl,!1),E(this,da,!1),E(this,Lt,null),E(this,$a,null),E(this,hl,this.focusin.bind(this)),E(this,dl,this.focusout.bind(this)),E(this,Tt,null),E(this,jd,""),E(this,Va,!1),E(this,Cs,null),E(this,hh,!1),E(this,fa,!1),E(this,Fr,!1),E(this,Ms,null),E(this,fl,0),E(this,pl,0),E(this,pi,null),ge(this,"_initialOptions",Object.create(null)),ge(this,"_isVisible",!0),ge(this,"_uiManager",null),ge(this,"_focusEventsAllowed",!0),ge(this,"_l10nPromise",null),E(this,dh,!1),E(this,Gm,pt._zIndex++),this.constructor===pt&&Le("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:r,pageX:n,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[n,a];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=pt.prototype._resizeWithKeyboard,t=zu.TRANSLATE_SMALL,s=zu.TRANSLATE_BIG;return Se(this,"_resizerKeyboardManager",new Gu([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],pt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Se(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new fA({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t,s){if(pt._l10nPromise||(pt._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(n=>[n,e.get(n.replaceAll(/([A-Z])/g,a=>`-${a.toLowerCase()}`))]))),s!=null&&s.strings)for(const n of s.strings)pt._l10nPromise.set(n,e.get(n));if(pt._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);pt._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Le("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,dh)}set _isDraggable(e){var t;x(this,dh,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,Gm)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):A(this,Oe,ru).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(u(this,Va)?x(this,Va,!1):this.parent.setSelected(this))}focusout(e){var t;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const s=e.relatedTarget;s!=null&&s.closest(`#${this.id}`)||(e.preventDefault(),(t=this.parent)!=null&&t.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,r){const[n,a]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(e+s)/n,this.y=(t+r)/a,this.fixAndSetPosition()}translate(e,t){A(this,Oe,qm).call(this,this.parentDimensions,e,t)}translateInPage(e,t){u(this,Cs)||x(this,Cs,[this.x,this.y]),A(this,Oe,qm).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){u(this,Cs)||x(this,Cs,[this.x,this.y]);const[s,r]=this.parentDimensions;if(this.x+=e/s,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:c,y:h}=this.div.getBoundingClientRect();this.parent.findNewParent(this,c,h)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:n,y:a}=this;const[o,l]=this.getBaseTranslation();n+=o,a+=l,this.div.style.left=`${(100*n).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!u(this,Cs)&&(u(this,Cs)[0]!==this.x||u(this,Cs)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=pt,r=s/e,n=s/t;switch(this.rotation){case 90:return[-r,n];case 180:return[r,n];case 270:return[r,-n];default:return[-r,-n]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,s]=this.pageDimensions;let{x:r,y:n,width:a,height:o}=this;if(a*=t,o*=s,r*=t,n*=s,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(t-a,r)),n=Math.max(0,Math.min(s-o,n));break;case 90:r=Math.max(0,Math.min(t-o,r)),n=Math.min(s,Math.max(a,n));break;case 180:r=Math.min(t,Math.max(a,r)),n=Math.min(s,Math.max(o,n));break;case 270:r=Math.min(t,Math.max(o,r)),n=Math.max(0,Math.min(s-a,n));break}this.x=r/=t,this.y=n/=s;const[l,c]=this.getBaseTranslation();r+=l,n+=c;const{style:h}=this.div;h.left=`${(100*r).toFixed(2)}%`,h.top=`${(100*n).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return A(s=pt,Ud,Km).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return A(s=pt,Ud,Km).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this,r=t*e,n=s*e;return Jt.isCSSRoundSupported?[Math.round(r),Math.round(n)]:[r,n]}setDims(e,t){const[s,r]=this.parentDimensions;this.div.style.width=`${(100*e/s).toFixed(2)}%`,u(this,da)||(this.div.style.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:s}=e,r=s.endsWith("%"),n=!u(this,da)&&t.endsWith("%");if(r&&n)return;const[a,o]=this.parentDimensions;r||(e.width=`${(100*parseFloat(s)/a).toFixed(2)}%`),!u(this,da)&&!n&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=u(this,Nt))==null||e.finish()}async addEditToolbar(){return u(this,Tt)||u(this,fa)?u(this,Tt):(x(this,Tt,new aA(this)),this.div.append(u(this,Tt).render()),u(this,Nt)&&u(this,Tt).addAltTextButton(await u(this,Nt).render()),u(this,Tt))}removeEditToolbar(){var e;u(this,Tt)&&(u(this,Tt).remove(),x(this,Tt,null),(e=u(this,Nt))==null||e.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){u(this,Nt)||(h0.initialize(pt._l10nPromise),x(this,Nt,new h0(this)),u(this,ha)&&(u(this,Nt).data=u(this,ha),x(this,ha,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=u(this,Nt))==null?void 0:e.data}set altTextData(e){u(this,Nt)&&(u(this,Nt).data=e)}hasAltText(){var e;return!((e=u(this,Nt))!=null&&e.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=u(this,cl)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground();const e=this._uiManager._signal;this.div.addEventListener("focusin",u(this,hl),{signal:e}),this.div.addEventListener("focusout",u(this,dl),{signal:e});const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*s/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[r,n]=this.getInitialTranslation();return this.translate(r,n),Od(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=Jt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(x(this,Va,!0),this._isDraggable){A(this,Oe,O_).call(this,e);return}A(this,Oe,Ym).call(this,e)}moveInDOM(){u(this,Ms)&&clearTimeout(u(this,Ms)),x(this,Ms,setTimeout(()=>{var e;x(this,Ms,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition()}getRect(e,t,s=this.rotation){const r=this.parentScale,[n,a]=this.pageDimensions,[o,l]=this.pageTranslation,c=e/r,h=t/r,d=this.x*n,f=this.y*a,p=this.width*n,v=this.height*a;switch(s){case 0:return[d+c+o,a-f-h-v+l,d+c+p+o,a-f-h+l];case 90:return[d+h+o,a-f+c+l,d+h+v+o,a-f+c+p+l];case 180:return[d-c-p+o,a-f+h+l,d-c+o,a-f+h+v+l];case 270:return[d-h-v+o,a-f-c-p+l,d-h+o,a-f-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,r,n,a]=e,o=n-s,l=a-r;switch(this.rotation){case 0:return[s,t-a,o,l];case 90:return[s,t-r,l,o];case 180:return[n,t-r,o,l];case 270:return[n,t-a,l,o];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){x(this,fa,!0)}disableEditMode(){x(this,fa,!1)}isInEditMode(){return u(this,fa)}shouldGetKeyboardEvents(){return u(this,Fr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var e,t;const s=this._uiManager._signal;(e=this.div)==null||e.addEventListener("focusin",u(this,hl),{signal:s}),(t=this.div)==null||t.addEventListener("focusout",u(this,dl),{signal:s})}rotate(e){}serialize(e=!1,t=null){Le("An editor must be serializable")}static deserialize(e,t,s){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s});r.rotation=e.rotation,x(r,ha,e.accessibilityData);const[n,a]=r.pageDimensions,[o,l,c,h]=r.getRectInCurrentCoords(e.rect,a);return r.x=o/n,r.y=l/a,r.width=c/n,r.height=h/a,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",u(this,hl)),this.div.removeEventListener("focusout",u(this,dl)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),u(this,Ms)&&(clearTimeout(u(this,Ms)),x(this,Ms,null)),A(this,Oe,ru).call(this),this.removeEditToolbar(),u(this,pi)){for(const e of u(this,pi).values())clearTimeout(e);x(this,pi,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(A(this,Oe,D_).call(this),u(this,Lt).classList.remove("hidden"),Od(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),x(this,$a,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=u(this,Lt).children;if(!u(this,os)){x(this,os,Array.from(t));const a=A(this,Oe,z_).bind(this),o=A(this,Oe,W_).bind(this),l=this._uiManager._signal;for(const c of u(this,os)){const h=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",a,{signal:l}),c.addEventListener("blur",o,{signal:l}),c.addEventListener("focus",A(this,Oe,B_).bind(this,h),{signal:l}),pt._l10nPromise.get(`pdfjs-editor-resizer-label-${h}`).then(d=>c.setAttribute("aria-label",d))}}const s=u(this,os)[0];let r=0;for(const a of t){if(a===s)break;r++}const n=(360-this.rotation+this.parentRotation)%360/90*(u(this,os).length/4);if(n!==r){if(n<r)for(let o=0;o<r-n;o++)u(this,Lt).append(u(this,Lt).firstChild);else if(n>r)for(let o=0;o<n-r;o++)u(this,Lt).firstChild.before(u(this,Lt).lastChild);let a=0;for(const o of t){const l=u(this,os)[a++].getAttribute("data-resizer-name");pt._l10nPromise.get(`pdfjs-editor-resizer-label-${l}`).then(c=>o.setAttribute("aria-label",c))}}A(this,Oe,Qm).call(this,0),x(this,Fr,!0),u(this,Lt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){u(this,Fr)&&A(this,Oe,Xm).call(this,u(this,jd),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){A(this,Oe,ru).call(this),this.div.focus()}select(){var e,t;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!u(this,Tt)){this.addEditToolbar().then(()=>{var s,r;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((r=u(this,Tt))==null||r.show())});return}(t=u(this,Tt))==null||t.show()}unselect(){var e,t,s,r;(e=u(this,Lt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=u(this,Tt))==null||r.hide()}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return u(this,hh)}set isEditing(e){x(this,hh,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){x(this,da,!0);const s=e/t,{style:r}=this.div;r.aspectRatio=s,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){u(this,pi)||x(this,pi,new Map);const{action:s}=e;let r=u(this,pi).get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),u(this,pi).delete(s),u(this,pi).size===0&&x(this,pi,null)},pt._telemetryTimeout),u(this,pi).set(s,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),x(this,cl,!1)}disable(){this.div&&(this.div.tabIndex=-1),x(this,cl,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};ha=new WeakMap,os=new WeakMap,Nt=new WeakMap,cl=new WeakMap,da=new WeakMap,Lt=new WeakMap,$a=new WeakMap,hl=new WeakMap,dl=new WeakMap,Tt=new WeakMap,jd=new WeakMap,Va=new WeakMap,Cs=new WeakMap,hh=new WeakMap,fa=new WeakMap,Fr=new WeakMap,Ms=new WeakMap,fl=new WeakMap,pl=new WeakMap,pi=new WeakMap,dh=new WeakMap,Gm=new WeakMap,Oe=new WeakSet,qm=function([i,e],t,s){[t,s]=this.screenToPageTranslation(t,s),this.x+=t/i,this.y+=s/e,this.fixAndSetPosition()},Ud=new WeakSet,Km=function(i,e,t){switch(t){case 90:return[e,-i];case 180:return[-i,-e];case 270:return[-e,i];default:return[i,e]}},xp=function(i){switch(i){case 90:{const[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}},D_=function(){if(u(this,Lt))return;x(this,Lt,document.createElement("div")),u(this,Lt).classList.add("resizers");const i=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const t of i){const s=document.createElement("div");u(this,Lt).append(s),s.classList.add("resizer",t),s.setAttribute("data-resizer-name",t),s.addEventListener("pointerdown",A(this,Oe,d0).bind(this,t),{signal:e}),s.addEventListener("contextmenu",Zt,{signal:e}),s.tabIndex=-1}this.div.prepend(u(this,Lt))},d0=function(i,e){var t;e.preventDefault();const{isMac:s}=Jt.platform;if(e.button!==0||e.ctrlKey&&s)return;(t=u(this,Nt))==null||t.toggle(!1);const r=A(this,Oe,Xm).bind(this,i),n=this._isDraggable;this._isDraggable=!1;const a=this._uiManager._signal,o={passive:!0,capture:!0,signal:a};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",r,o),window.addEventListener("contextmenu",Zt,{signal:a});const l=this.x,c=this.y,h=this.width,d=this.height,f=this.parent.div.style.cursor,p=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const v=()=>{var m;this.parent.togglePointerEvents(!0),(m=u(this,Nt))==null||m.toggle(!0),this._isDraggable=n,window.removeEventListener("pointerup",v),window.removeEventListener("blur",v),window.removeEventListener("pointermove",r,o),window.removeEventListener("contextmenu",Zt),this.parent.div.style.cursor=f,this.div.style.cursor=p,A(this,Oe,Sp).call(this,l,c,h,d)};window.addEventListener("pointerup",v,{signal:a}),window.addEventListener("blur",v,{signal:a})},Sp=function(i,e,t,s){const r=this.x,n=this.y,a=this.width,o=this.height;r===i&&n===e&&a===t&&o===s||this.addCommands({cmd:()=>{this.width=a,this.height=o,this.x=r,this.y=n;const[l,c]=this.parentDimensions;this.setDims(l*a,c*o),this.fixAndSetPosition()},undo:()=>{this.width=t,this.height=s,this.x=i,this.y=e;const[l,c]=this.parentDimensions;this.setDims(l*t,c*s),this.fixAndSetPosition()},mustExec:!0})},Xm=function(i,e){const[t,s]=this.parentDimensions,r=this.x,n=this.y,a=this.width,o=this.height,l=Ls.MIN_SIZE/t,c=Ls.MIN_SIZE/s,h=K=>Math.round(K*1e4)/1e4,d=A(this,Oe,xp).call(this,this.rotation),f=(K,j)=>[d[0]*K+d[2]*j,d[1]*K+d[3]*j],p=A(this,Oe,xp).call(this,360-this.rotation),v=(K,j)=>[p[0]*K+p[2]*j,p[1]*K+p[3]*j];let m,y,g=!1,b=!1;switch(i){case"topLeft":g=!0,m=(K,j)=>[0,0],y=(K,j)=>[K,j];break;case"topMiddle":m=(K,j)=>[K/2,0],y=(K,j)=>[K/2,j];break;case"topRight":g=!0,m=(K,j)=>[K,0],y=(K,j)=>[0,j];break;case"middleRight":b=!0,m=(K,j)=>[K,j/2],y=(K,j)=>[0,j/2];break;case"bottomRight":g=!0,m=(K,j)=>[K,j],y=(K,j)=>[0,0];break;case"bottomMiddle":m=(K,j)=>[K/2,j],y=(K,j)=>[K/2,0];break;case"bottomLeft":g=!0,m=(K,j)=>[0,j],y=(K,j)=>[K,0];break;case"middleLeft":b=!0,m=(K,j)=>[0,j/2],y=(K,j)=>[K,j/2];break}const w=m(a,o),S=y(a,o);let C=f(...S);const I=h(r+C[0]),P=h(n+C[1]);let N=1,F=1,[T,V]=this.screenToPageTranslation(e.movementX,e.movementY);if([T,V]=v(T/t,V/s),g){const K=Math.hypot(a,o);N=F=Math.max(Math.min(Math.hypot(S[0]-w[0]-T,S[1]-w[1]-V)/K,1/a,1/o),l/a,c/o)}else b?N=Math.max(l,Math.min(1,Math.abs(S[0]-w[0]-T)))/a:F=Math.max(c,Math.min(1,Math.abs(S[1]-w[1]-V)))/o;const L=h(a*N),W=h(o*F);C=f(...y(L,W));const k=I-C[0],U=P-C[1];this.width=L,this.height=W,this.x=k,this.y=U,this.setDims(t*L,s*W),this.fixAndSetPosition()},Ym=function(i){const{isMac:e}=Jt.platform;i.ctrlKey&&!e||i.shiftKey||i.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},O_=function(i){const e=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let t,s;const r=this._uiManager._signal;e&&(this.div.classList.add("moving"),t={passive:!0,capture:!0,signal:r},x(this,fl,i.clientX),x(this,pl,i.clientY),s=a=>{const{clientX:o,clientY:l}=a,[c,h]=this.screenToPageTranslation(o-u(this,fl),l-u(this,pl));x(this,fl,o),x(this,pl,l),this._uiManager.dragSelectedEditors(c,h)},window.addEventListener("pointermove",s,t));const n=()=>{window.removeEventListener("pointerup",n),window.removeEventListener("blur",n),e&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",s,t)),x(this,Va,!1),this._uiManager.endDragSession()||A(this,Oe,Ym).call(this,i)};window.addEventListener("pointerup",n,{signal:r}),window.addEventListener("blur",n,{signal:r})},z_=function(i){Ls._resizerKeyboardManager.exec(this,i)},W_=function(i){var e;u(this,Fr)&&((e=i.relatedTarget)==null?void 0:e.parentNode)!==u(this,Lt)&&A(this,Oe,ru).call(this)},B_=function(i){x(this,jd,u(this,Fr)?i:"")},Qm=function(i){if(u(this,os))for(const e of u(this,os))e.tabIndex=i},ru=function(){if(x(this,Fr,!1),A(this,Oe,Qm).call(this,-1),u(this,$a)){const{savedX:i,savedY:e,savedWidth:t,savedHeight:s}=u(this,$a);A(this,Oe,Sp).call(this,i,e,t,s),x(this,$a,null)}},E(Ls,Ud),ge(Ls,"_borderLineWidth",-1),ge(Ls,"_colorManager",new dA),ge(Ls,"_zIndex",1),ge(Ls,"_telemetryTimeout",1e3);let Re=Ls;class fA extends Re{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const f0=3285377520,di=4294901760,Yi=65535;class j_{constructor(e){this.h1=e?e&4294967295:f0,this.h2=e?e&4294967295:f0}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let m=0,y=e.length;m<y;m++){const g=e.charCodeAt(m);g<=255?t[s++]=g:(t[s++]=g>>>8,t[s++]=g&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,n=s-r*4,a=new Uint32Array(t.buffer,0,r);let o=0,l=0,c=this.h1,h=this.h2;const d=3432918353,f=461845907,p=d&Yi,v=f&Yi;for(let m=0;m<r;m++)m&1?(o=a[m],o=o*d&di|o*p&Yi,o=o<<15|o>>>17,o=o*f&di|o*v&Yi,c^=o,c=c<<13|c>>>19,c=c*5+3864292196):(l=a[m],l=l*d&di|l*p&Yi,l=l<<15|l>>>17,l=l*f&di|l*v&Yi,h^=l,h=h<<13|h>>>19,h=h*5+3864292196);switch(o=0,n){case 3:o^=t[r*4+2]<<16;case 2:o^=t[r*4+1]<<8;case 1:o^=t[r*4],o=o*d&di|o*p&Yi,o=o<<15|o>>>17,o=o*f&di|o*v&Yi,r&1?c^=o:h^=o}this.h1=c,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&di|e*36045&Yi,t=t*4283543511&di|((t<<16|e>>>16)*2950163797&di)>>>16,e^=t>>>1,e=e*444984403&di|e*60499&Yi,t=t*3301882366&di|((t<<16|e>>>16)*3120437893&di)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Zm=Object.freeze({map:null,hash:"",transfer:void 0});var ho,xt,Jm,U_;class Uv{constructor(){E(this,Jm),E(this,ho,!1),E(this,xt,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=u(this,xt).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return u(this,xt).get(e)}remove(e){if(u(this,xt).delete(e),u(this,xt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of u(this,xt).values())if(t instanceof Re)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=u(this,xt).get(e);let r=!1;if(s!==void 0)for(const[n,a]of Object.entries(t))s[n]!==a&&(r=!0,s[n]=a);else r=!0,u(this,xt).set(e,t);r&&A(this,Jm,U_).call(this),t instanceof Re&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return u(this,xt).has(e)}getAll(){return u(this,xt).size>0?Fv(u(this,xt)):null}setAll(e){for(const[t,s]of Object.entries(e))this.setValue(t,s)}get size(){return u(this,xt).size}resetModified(){u(this,ho)&&(x(this,ho,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new H_(this)}get serializable(){if(u(this,xt).size===0)return Zm;const e=new Map,t=new j_,s=[],r=Object.create(null);let n=!1;for(const[a,o]of u(this,xt)){const l=o instanceof Re?o.serialize(!1,r):o;l&&(e.set(a,l),t.update(`${a}:${JSON.stringify(l)}`),n||(n=!!l.bitmap))}if(n)for(const a of e.values())a.bitmap&&s.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:Zm}get editorStats(){let e=null;const t=new Map;for(const s of u(this,xt).values()){if(!(s instanceof Re))continue;const r=s.telemetryFinalData;if(!r)continue;const{type:n}=r;t.has(n)||t.set(n,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const a=e[n]||(e[n]=new Map);for(const[o,l]of Object.entries(r)){if(o==="type")continue;let c=a.get(o);c||(c=new Map,a.set(o,c));const h=c.get(l)??0;c.set(l,h+1)}}for(const[s,r]of t)e[s]=r.computeTelemetryFinalData(e[s]);return e}}ho=new WeakMap,xt=new WeakMap,Jm=new WeakSet,U_=function(){u(this,ho)||(x(this,ho,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var fh;class H_ extends Uv{constructor(e){super(),E(this,fh);const{map:t,hash:s,transfer:r}=e.serializable,n=structuredClone(t,r?{transfer:r}:null);x(this,fh,{map:n,hash:s,transfer:r})}get print(){Le("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,fh)}}fh=new WeakMap;var ml;class pA{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){E(this,ml,new Set),this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),u(this,ml).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||u(this,ml).has(e.loadedName))){if(st(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:r,style:n}=e,a=new FontFace(s,r,n);this.addNativeFontFace(a);try{await a.load(),u(this,ml).add(s),t==null||t(e)}catch{be(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Le("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw be(`Failed to load font '${s.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Se(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let e=!1;return(Rt||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),Se(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(st(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const n=s.shift();setTimeout(n.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:t,callback:e};return s.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Se(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(w,S){return w.charCodeAt(S)<<24|w.charCodeAt(S+1)<<16|w.charCodeAt(S+2)<<8|w.charCodeAt(S+3)&255}function r(w,S,C,I){const P=w.substring(0,S),N=w.substring(S+C);return P+I+N}let n,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let c=0;function h(w,S){if(++c>30){be("Load test font never loaded."),S();return}if(l.font="30px "+w,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){S();return}setTimeout(h.bind(null,w,S))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=r(f,976,d.length,d);const p=16,v=1482184792;let m=s(f,p);for(n=0,a=d.length-3;n<a;n+=4)m=m-v+s(d,n)|0;n<d.length&&(m=m-v+s(d+"XXX",n)|0),f=r(f,p,4,qS(m));const y=`url(data:font/opentype;base64,${btoa(f)});`,g=`@font-face {font-family:"${d}";src:${y}}`;this.insertRule(g);const b=this._document.createElement("div");b.style.visibility="hidden",b.style.width=b.style.height="10px",b.style.position="absolute",b.style.top=b.style.left="0px";for(const w of[e.loadedName,d]){const S=this._document.createElement("span");S.textContent="Hi",S.style.fontFamily=w,b.append(S)}this._document.body.append(b),h(d,()=>{b.remove(),t.complete()})}}ml=new WeakMap;class mA{constructor(e,{disableFontFace:t=!1,inspectFont:s=null}){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this.disableFontFace=t===!0,this._inspectFont=s}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var e;if(!this.data||this.disableFontFace)return null;const t=u_(this.data),s=`url(data:${this.mimetype};base64,${btoa(t)});`;let r;if(!this.cssFontInfo)r=`@font-face {font-family:"${this.loadedName}";src:${s}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),r=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${s}}`}return(e=this._inspectFont)==null||e.call(this,this,s),r}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let s;try{s=e.get(this.loadedName+"_path_"+t)}catch(n){be(`getPathGenerator - ignoring character: "${n}".`)}if(!Array.isArray(s)||s.length===0)return this.compiledGlyphs[t]=function(n,a){};const r=[];for(let n=0,a=s.length;n<a;)switch(s[n++]){case _s.BEZIER_CURVE_TO:{const[o,l,c,h,d,f]=s.slice(n,n+6);r.push(p=>p.bezierCurveTo(o,l,c,h,d,f)),n+=6}break;case _s.MOVE_TO:{const[o,l]=s.slice(n,n+2);r.push(c=>c.moveTo(o,l)),n+=2}break;case _s.LINE_TO:{const[o,l]=s.slice(n,n+2);r.push(c=>c.lineTo(o,l)),n+=2}break;case _s.QUADRATIC_CURVE_TO:{const[o,l,c,h]=s.slice(n,n+4);r.push(d=>d.quadraticCurveTo(o,l,c,h)),n+=4}break;case _s.RESTORE:r.push(o=>o.restore());break;case _s.SAVE:r.push(o=>o.save());break;case _s.SCALE:st(r.length===2,"Scale command is only valid at the third position.");break;case _s.TRANSFORM:{const[o,l,c,h,d,f]=s.slice(n,n+6);r.push(p=>p.transform(o,l,c,h,d,f)),n+=6}break;case _s.TRANSLATE:{const[o,l]=s.slice(n,n+2);r.push(c=>c.translate(o,l)),n+=2}break}return this.compiledGlyphs[t]=function(n,a){r[0](n),r[1](n),n.scale(a,-a);for(let o=2,l=r.length;o<l;o++)r[o](n)}}}if(Rt){var eg=Promise.withResolvers(),Hd=null;(async()=>{const i=await gc(()=>Qu(()=>import("./__vite-browser-external-BIHI7g3E-BIHI7g3E.js"),[]),[]),e=await gc(()=>Qu(()=>import("./__vite-browser-external-BIHI7g3E-BIHI7g3E.js"),[]),[]),t=await gc(()=>Qu(()=>import("./__vite-browser-external-BIHI7g3E-BIHI7g3E.js"),[]),[]),s=await gc(()=>Qu(()=>import("./__vite-browser-external-BIHI7g3E-BIHI7g3E.js"),[]),[]);let r,n;return new Map(Object.entries({fs:i,http:e,https:t,url:s,canvas:r,path2d:n}))})().then(i=>{Hd=i,eg.resolve()},i=>{be(`loadPackages: ${i}`),Hd=new Map,eg.resolve()})}class ys{static get promise(){return eg.promise}static get(e){return Hd==null?void 0:Hd.get(e)}}const $_=function(i){return ys.get("fs").promises.readFile(i).then(e=>new Uint8Array(e))};class gA extends jf{}class vA extends d_{_createCanvas(e,t){return ys.get("canvas").createCanvas(e,t)}}class bA extends Uf{_fetchData(e,t){return $_(e).then(s=>({cMapData:s,compressionType:t}))}}class yA extends Hf{_fetchData(e){return $_(e)}}const Ot={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function tg(i,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,s),i.clip(r)}class qu{constructor(){this.constructor===qu&&Le("Cannot initialize BaseShadingPattern.")}getPattern(){Le("Abstract method `getPattern` called.")}}class wA extends qu{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,r){let n;if(r===Ot.STROKE||r===Ot.FILL){const a=t.current.getClippedPathBoundingBox(r,We(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,c=t.cachedCanvases.getCanvas("pattern",o,l,!0),h=c.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),s=oe.transform(s,[1,0,0,1,a[0],a[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),tg(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),n=e.createPattern(c.canvas,"no-repeat");const d=new DOMMatrix(s);n.setTransform(d)}else tg(e,this._bbox),n=this._createGradient(e);return n}}function Ap(i,e,t,s,r,n,a,o){const l=e.coords,c=e.colors,h=i.data,d=i.width*4;let f;l[t+1]>l[s+1]&&(f=t,t=s,s=f,f=n,n=a,a=f),l[s+1]>l[r+1]&&(f=s,s=r,r=f,f=a,a=o,o=f),l[t+1]>l[s+1]&&(f=t,t=s,s=f,f=n,n=a,a=f);const p=(l[t]+e.offsetX)*e.scaleX,v=(l[t+1]+e.offsetY)*e.scaleY,m=(l[s]+e.offsetX)*e.scaleX,y=(l[s+1]+e.offsetY)*e.scaleY,g=(l[r]+e.offsetX)*e.scaleX,b=(l[r+1]+e.offsetY)*e.scaleY;if(v>=b)return;const w=c[n],S=c[n+1],C=c[n+2],I=c[a],P=c[a+1],N=c[a+2],F=c[o],T=c[o+1],V=c[o+2],L=Math.round(v),W=Math.round(b);let k,U,K,j,G,H,Q,z;for(let D=L;D<=W;D++){if(D<y){const fe=D<v?0:(v-D)/(v-y);k=p-(p-m)*fe,U=w-(w-I)*fe,K=S-(S-P)*fe,j=C-(C-N)*fe}else{let fe;D>b?fe=1:y===b?fe=0:fe=(y-D)/(y-b),k=m-(m-g)*fe,U=I-(I-F)*fe,K=P-(P-T)*fe,j=N-(N-V)*fe}let se;D<v?se=0:D>b?se=1:se=(v-D)/(v-b),G=p-(p-g)*se,H=w-(w-F)*se,Q=S-(S-T)*se,z=C-(C-V)*se;const ie=Math.round(Math.min(k,G)),J=Math.round(Math.max(k,G));let ve=d*D+ie*4;for(let fe=ie;fe<=J;fe++)se=(k-fe)/(k-G),se<0?se=0:se>1&&(se=1),h[ve++]=U-(U-H)*se|0,h[ve++]=K-(K-Q)*se|0,h[ve++]=j-(j-z)*se|0,h[ve++]=255}}function _A(i,e,t){const s=e.coords,r=e.colors;let n,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(s.length/o)-1,c=o-1;for(n=0;n<l;n++){let h=n*o;for(let d=0;d<c;d++,h++)Ap(i,t,s[h],s[h+1],s[h+o],r[h],r[h+1],r[h+o]),Ap(i,t,s[h+o+1],s[h+1],s[h+o],r[h+o+1],r[h+1],r[h+o])}break;case"triangles":for(n=0,a=s.length;n<a;n+=3)Ap(i,t,s[n],s[n+1],s[n+2],r[n],r[n+1],r[n+2]);break;default:throw new Error("illegal figure")}}class kA extends qu{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,s){const r=Math.floor(this._bounds[0]),n=Math.floor(this._bounds[1]),a=Math.ceil(this._bounds[2])-r,o=Math.ceil(this._bounds[3])-n,l=Math.min(Math.ceil(Math.abs(a*e[0]*1.1)),3e3),c=Math.min(Math.ceil(Math.abs(o*e[1]*1.1)),3e3),h=a/l,d=o/c,f={coords:this._coords,colors:this._colors,offsetX:-r,offsetY:-n,scaleX:1/h,scaleY:1/d},p=l+2*2,v=c+2*2,m=s.getCanvas("mesh",p,v,!1),y=m.context,g=y.createImageData(l,c);if(t){const b=g.data;for(let w=0,S=b.length;w<S;w+=4)b[w]=t[0],b[w+1]=t[1],b[w+2]=t[2],b[w+3]=255}for(const b of this._figures)_A(g,b,f);return y.putImageData(g,2,2),{canvas:m.canvas,offsetX:r-2*h,offsetY:n-2*d,scaleX:h,scaleY:d}}getPattern(e,t,s,r){tg(e,this._bbox);let n;if(r===Ot.SHADING)n=oe.singularValueDecompose2dScale(We(e));else if(n=oe.singularValueDecompose2dScale(t.baseTransform),this.matrix){const o=oe.singularValueDecompose2dScale(this.matrix);n=[n[0]*o[0],n[1]*o[1]]}const a=this._createMeshCanvas(n,r===Ot.SHADING?null:this._background,t.cachedCanvases);return r!==Ot.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class xA extends qu{getPattern(){return"hotpink"}}function SA(i){switch(i[0]){case"RadialAxial":return new wA(i);case"Mesh":return new kA(i);case"Dummy":return new xA}throw new Error(`Unknown IR type: ${i[0]}`)}const p0={COLORED:1,UNCOLORED:2},V_=class G_{constructor(e,t,s,r,n){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=s,this.canvasGraphicsFactory=r,this.baseTransform=n}createPatternCanvas(e){const t=this.operatorList,s=this.bbox,r=this.xstep,n=this.ystep,a=this.paintType,o=this.tilingType,l=this.color,c=this.canvasGraphicsFactory;zf("TilingType: "+o);const h=s[0],d=s[1],f=s[2],p=s[3],v=oe.singularValueDecompose2dScale(this.matrix),m=oe.singularValueDecompose2dScale(this.baseTransform),y=[v[0]*m[0],v[1]*m[1]],g=this.getSizeAndScale(r,this.ctx.canvas.width,y[0]),b=this.getSizeAndScale(n,this.ctx.canvas.height,y[1]),w=e.cachedCanvases.getCanvas("pattern",g.size,b.size,!0),S=w.context,C=c.createCanvasGraphics(S);C.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(C,a,l);let I=h,P=d,N=f,F=p;return h<0&&(I=0,N+=Math.abs(h)),d<0&&(P=0,F+=Math.abs(d)),S.translate(-(g.scale*I),-(b.scale*P)),C.transform(g.scale,0,0,b.scale,0,0),S.save(),this.clipBbox(C,I,P,N,F),C.baseTransform=We(C.ctx),C.executeOperatorList(t),C.endDrawing(),{canvas:w.canvas,scaleX:g.scale,scaleY:b.scale,offsetX:I,offsetY:P}}getSizeAndScale(e,t,s){e=Math.abs(e);const r=Math.max(G_.MAX_PATTERN_SIZE,t);let n=Math.ceil(e*s);return n>=r?n=r:s=n/e,{scale:s,size:n}}clipBbox(e,t,s,r,n){const a=r-t,o=n-s;e.ctx.rect(t,s,a,o),e.current.updateRectMinMax(We(e.ctx),[t,s,r,n]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const r=e.ctx,n=e.current;switch(t){case p0.COLORED:const a=this.ctx;r.fillStyle=a.fillStyle,r.strokeStyle=a.strokeStyle,n.fillColor=a.fillStyle,n.strokeColor=a.strokeStyle;break;case p0.UNCOLORED:const o=oe.makeHexColor(s[0],s[1],s[2]);r.fillStyle=o,r.strokeStyle=o,n.fillColor=o,n.strokeColor=o;break;default:throw new GS(`Unsupported paint type: ${t}`)}}getPattern(e,t,s,r){let n=s;r!==Ot.SHADING&&(n=oe.transform(n,t.baseTransform),this.matrix&&(n=oe.transform(n,this.matrix)));const a=this.createPatternCanvas(t);let o=new DOMMatrix(n);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const l=e.createPattern(a.canvas,"repeat");return l.setTransform(o),l}};ge(V_,"MAX_PATTERN_SIZE",3e3);let AA=V_;function EA({src:i,srcPos:e=0,dest:t,width:s,height:r,nonBlackColor:n=4294967295,inverseDecode:a=!1}){const o=Jt.isLittleEndian?4278190080:255,[l,c]=a?[n,o]:[o,n],h=s>>3,d=s&7,f=i.length;t=new Uint32Array(t.buffer);let p=0;for(let v=0;v<r;v++){for(const y=e+h;e<y;e++){const g=e<f?i[e]:255;t[p++]=g&128?c:l,t[p++]=g&64?c:l,t[p++]=g&32?c:l,t[p++]=g&16?c:l,t[p++]=g&8?c:l,t[p++]=g&4?c:l,t[p++]=g&2?c:l,t[p++]=g&1?c:l}if(d===0)continue;const m=e<f?i[e++]:255;for(let y=0;y<d;y++)t[p++]=m&1<<7-y?c:l}return{srcPos:e,destPos:p}}const m0=16,g0=100,CA=15,v0=10,b0=1e3,$t=16;function MA(i,e){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){e.save(),this.__originalSave()},i.restore=function(){e.restore(),this.__originalRestore()},i.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},i.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},i.transform=function(t,s,r,n,a,o){e.transform(t,s,r,n,a,o),this.__originalTransform(t,s,r,n,a,o)},i.setTransform=function(t,s,r,n,a,o){e.setTransform(t,s,r,n,a,o),this.__originalSetTransform(t,s,r,n,a,o)},i.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},i.rotate=function(t){e.rotate(t),this.__originalRotate(t)},i.clip=function(t){e.clip(t),this.__originalClip(t)},i.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},i.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},i.bezierCurveTo=function(t,s,r,n,a,o){e.bezierCurveTo(t,s,r,n,a,o),this.__originalBezierCurveTo(t,s,r,n,a,o)},i.rect=function(t,s,r,n){e.rect(t,s,r,n),this.__originalRect(t,s,r,n)},i.closePath=function(){e.closePath(),this.__originalClosePath()},i.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class LA{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,s)):(r=this.canvasFactory.create(t,s),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function bc(i,e,t,s,r,n,a,o,l,c){const[h,d,f,p,v,m]=We(i);if(d===0&&f===0){const b=a*h+v,w=Math.round(b),S=o*p+m,C=Math.round(S),I=(a+l)*h+v,P=Math.abs(Math.round(I)-w)||1,N=(o+c)*p+m,F=Math.abs(Math.round(N)-C)||1;return i.setTransform(Math.sign(h),0,0,Math.sign(p),w,C),i.drawImage(e,t,s,r,n,0,0,P,F),i.setTransform(h,d,f,p,v,m),[P,F]}if(h===0&&p===0){const b=o*f+v,w=Math.round(b),S=a*d+m,C=Math.round(S),I=(o+c)*f+v,P=Math.abs(Math.round(I)-w)||1,N=(a+l)*d+m,F=Math.abs(Math.round(N)-C)||1;return i.setTransform(0,Math.sign(d),Math.sign(f),0,w,C),i.drawImage(e,t,s,r,n,0,0,F,P),i.setTransform(h,d,f,p,v,m),[F,P]}i.drawImage(e,t,s,r,n,a,o,l,c);const y=Math.hypot(h,d),g=Math.hypot(f,p);return[y*l,g*c]}function PA(i){const{width:e,height:t}=i;if(e>b0||t>b0)return null;const s=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),n=e+1;let a=new Uint8Array(n*(t+1)),o,l,c;const h=e+7&-8;let d=new Uint8Array(h*t),f=0;for(const y of i.data){let g=128;for(;g>0;)d[f++]=y&g?0:255,g>>=1}let p=0;for(f=0,d[f]!==0&&(a[0]=1,++p),l=1;l<e;l++)d[f]!==d[f+1]&&(a[l]=d[f]?2:1,++p),f++;for(d[f]!==0&&(a[l]=2,++p),o=1;o<t;o++){f=o*h,c=o*n,d[f-h]!==d[f]&&(a[c]=d[f]?1:8,++p);let y=(d[f]?4:0)+(d[f-h]?8:0);for(l=1;l<e;l++)y=(y>>2)+(d[f+1]?4:0)+(d[f-h+1]?8:0),r[y]&&(a[c+l]=r[y],++p),f++;if(d[f-h]!==d[f]&&(a[c+l]=d[f]?2:4,++p),p>s)return null}for(f=h*(t-1),c=o*n,d[f]!==0&&(a[c]=8,++p),l=1;l<e;l++)d[f]!==d[f+1]&&(a[c+l]=d[f]?4:8,++p),f++;if(d[f]!==0&&(a[c+l]=4,++p),p>s)return null;const v=new Int32Array([0,n,-1,0,-n,0,0,0,1]),m=new Path2D;for(o=0;p&&o<=t;o++){let y=o*n;const g=y+e;for(;y<g&&!a[y];)y++;if(y===g)continue;m.moveTo(y%n,o);const b=y;let w=a[y];do{const S=v[w];do y+=S;while(!a[y]);const C=a[y];C!==5&&C!==10?(w=C,a[y]=0):(w=C&51*w>>4,a[y]&=w>>2|w<<2),m.lineTo(y%n,y/n|0),a[y]||--p}while(b!==y);--o}return d=null,a=null,function(y){y.save(),y.scale(1/e,-1/t),y.translate(0,-t),y.fill(m),y.beginPath(),y.restore()}}class y0{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o_,this.textMatrixScale=1,this.fontMatrix=Sm,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=_t.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,s){[t,s]=oe.applyTransform([t,s],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(e,t){const s=oe.applyTransform(t,e),r=oe.applyTransform(t.slice(2),e),n=oe.applyTransform([t[0],t[3]],e),a=oe.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,s[0],r[0],n[0],a[0]),this.minY=Math.min(this.minY,s[1],r[1],n[1],a[1]),this.maxX=Math.max(this.maxX,s[0],r[0],n[0],a[0]),this.maxY=Math.max(this.maxY,s[1],r[1],n[1],a[1])}updateScalingPathMinMax(e,t){oe.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,s,r,n,a,o,l,c,h){const d=oe.bezierBoundingBox(t,s,r,n,a,o,l,c,h);h||this.updateRectMinMax(e,d)}getPathBoundingBox(e=Ot.FILL,t=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(e===Ot.STROKE){t||Le("Stroke bounding box must include transform.");const r=oe.singularValueDecompose2dScale(t),n=r[0]*this.lineWidth/2,a=r[1]*this.lineWidth/2;s[0]-=n,s[1]-=a,s[2]+=n,s[3]+=a}return s}updateClipFromPath(){const e=oe.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Ot.FILL,t=null){return oe.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function w0(i,e){if(typeof ImageData<"u"&&e instanceof ImageData){i.putImageData(e,0,0);return}const t=e.height,s=e.width,r=t%$t,n=(t-r)/$t,a=r===0?n:n+1,o=i.createImageData(s,$t);let l=0,c;const h=e.data,d=o.data;let f,p,v,m;if(e.kind===zc.GRAYSCALE_1BPP){const y=h.byteLength,g=new Uint32Array(d.buffer,0,d.byteLength>>2),b=g.length,w=s+7>>3,S=4294967295,C=Jt.isLittleEndian?4278190080:255;for(f=0;f<a;f++){for(v=f<n?$t:r,c=0,p=0;p<v;p++){const I=y-l;let P=0;const N=I>w?s:I*8-7,F=N&-8;let T=0,V=0;for(;P<F;P+=8)V=h[l++],g[c++]=V&128?S:C,g[c++]=V&64?S:C,g[c++]=V&32?S:C,g[c++]=V&16?S:C,g[c++]=V&8?S:C,g[c++]=V&4?S:C,g[c++]=V&2?S:C,g[c++]=V&1?S:C;for(;P<N;P++)T===0&&(V=h[l++],T=128),g[c++]=V&T?S:C,T>>=1}for(;c<b;)g[c++]=0;i.putImageData(o,0,f*$t)}}else if(e.kind===zc.RGBA_32BPP){for(p=0,m=s*$t*4,f=0;f<n;f++)d.set(h.subarray(l,l+m)),l+=m,i.putImageData(o,0,p),p+=$t;f<a&&(m=s*r*4,d.set(h.subarray(l,l+m)),i.putImageData(o,0,p))}else if(e.kind===zc.RGB_24BPP)for(v=$t,m=s*v,f=0;f<a;f++){for(f>=n&&(v=r,m=s*v),c=0,p=m;p--;)d[c++]=h[l++],d[c++]=h[l++],d[c++]=h[l++],d[c++]=255;i.putImageData(o,0,f*$t)}else throw new Error(`bad image kind: ${e.kind}`)}function _0(i,e){if(e.bitmap){i.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,r=t%$t,n=(t-r)/$t,a=r===0?n:n+1,o=i.createImageData(s,$t);let l=0;const c=e.data,h=o.data;for(let d=0;d<a;d++){const f=d<n?$t:r;({srcPos:l}=EA({src:c,srcPos:l,dest:h,width:s,height:f,nonBlackColor:0})),i.putImageData(o,0,d*$t)}}function Vo(i,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)i[s]!==void 0&&(e[s]=i[s]);i.setLineDash!==void 0&&(e.setLineDash(i.getLineDash()),e.lineDashOffset=i.lineDashOffset)}function yc(i){if(i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0),!Rt){const{filter:e}=i;e!=="none"&&e!==""&&(i.filter="none")}}function k0(i,e){if(e)return!0;const t=oe.singularValueDecompose2dScale(i);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*Mo.PDF_TO_CSS_UNITS);return t[0]<=s&&t[1]<=s}const RA=["butt","round","square"],IA=["miter","round","bevel"],TA={},x0={};var pa,ig,sg;const NA=class q_{constructor(e,t,s,r,n,{optionalContentConfig:a,markedContentStack:o=null},l,c){E(this,pa),this.ctx=e,this.current=new y0(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=r,this.filterFactory=n,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new LA(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:r=null}){const n=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,n,a),this.ctx.fillStyle=o,s){const l=this.cachedCanvases.getCanvas("transparent",n,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...We(this.compositeCtx))}this.ctx.save(),yc(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=We(this.ctx)}executeOperatorList(e,t,s,r){const n=e.argsArray,a=e.fnArray;let o=t||0;const l=n.length;if(l===o)return o;const c=l-o>v0&&typeof s=="function",h=c?Date.now()+CA:0;let d=0;const f=this.commonObjs,p=this.objs;let v;for(;;){if(r!==void 0&&o===r.nextBreakPoint)return r.breakIt(o,s),o;if(v=a[o],v!==Bi.dependency)this[v].apply(this,n[o]);else for(const m of n[o]){const y=m.startsWith("g_")?f:p;if(!y.has(m))return y.get(m,s),o}if(o++,o===l)return o;if(c&&++d>v0){if(Date.now()>h)return s(),o;d=0}}}endDrawing(){A(this,pa,ig).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),A(this,pa,sg).call(this)}_scaleImage(e,t){const s=e.width,r=e.height;let n=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=s,l=r,c="prescale1",h,d;for(;n>2&&o>1||a>2&&l>1;){let f=o,p=l;n>2&&o>1&&(f=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),n/=o/f),a>2&&l>1&&(p=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/p),h=this.cachedCanvases.getCanvas(c,f,p),d=h.context,d.clearRect(0,0,f,p),d.drawImage(e,0,0,o,l,0,0,f,p),e=h.canvas,o=f,l=p,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:s,height:r}=e,n=this.current.fillColor,a=this.current.patternFill,o=We(t);let l,c,h,d;if((e.bitmap||e.data)&&e.count>1){const N=e.bitmap||e.data.buffer;c=JSON.stringify(a?o:[o.slice(0,4),n]),l=this._cachedBitmapsMap.get(N),l||(l=new Map,this._cachedBitmapsMap.set(N,l));const F=l.get(c);if(F&&!a){const T=Math.round(Math.min(o[0],o[2])+o[4]),V=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:F,offsetX:T,offsetY:V}}h=F}h||(d=this.cachedCanvases.getCanvas("maskCanvas",s,r),_0(d.context,e));let f=oe.transform(o,[1/s,0,0,-1/r,0,0]);f=oe.transform(f,[1,0,0,1,0,-r]);const[p,v,m,y]=oe.getAxialAlignedBoundingBox([0,0,s,r],f),g=Math.round(m-p)||1,b=Math.round(y-v)||1,w=this.cachedCanvases.getCanvas("fillCanvas",g,b),S=w.context,C=p,I=v;S.translate(-C,-I),S.transform(...f),h||(h=this._scaleImage(d.canvas,ks(S)),h=h.img,l&&a&&l.set(c,h)),S.imageSmoothingEnabled=k0(We(S),e.interpolate),bc(S,h,0,0,h.width,h.height,0,0,s,r),S.globalCompositeOperation="source-in";const P=oe.transform(ks(S),[1,0,0,1,-C,-I]);return S.fillStyle=a?n.getPattern(t,this,P,Ot.FILL):n,S.fillRect(0,0,s,r),l&&!a&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,w.canvas)),{canvas:w.canvas,offsetX:Math.round(C),offsetY:Math.round(I)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=RA[e]}setLineJoin(e){this.ctx.lineJoin=IA[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,s]of e)switch(t){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.current.fillAlpha=s,this.ctx.globalAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(s,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const n=this.ctx;n.setTransform(...We(this.suspendedCtx)),Vo(this.suspendedCtx,n),MA(n,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Vo(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,r){const n=r[0],a=r[1],o=r[2]-n,l=r[3]-a;o===0||l===0||(this.genericComposeSMask(t.context,s,o,l,t.subtype,t.backdrop,t.transferMap,n,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,r,n,a,o,l,c,h,d){let f=e.canvas,p=l-h,v=c-d;if(a){if(p<0||v<0||p+s>f.width||v+r>f.height){const y=this.cachedCanvases.getCanvas("maskExtension",s,r),g=y.context;g.drawImage(f,-p,-v),a.some(b=>b!==0)&&(g.globalCompositeOperation="destination-atop",g.fillStyle=oe.makeHexColor(...a),g.fillRect(0,0,s,r),g.globalCompositeOperation="source-over"),f=y.canvas,p=v=0}else if(a.some(y=>y!==0)){e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const y=new Path2D;y.rect(p,v,s,r),e.clip(y),e.globalCompositeOperation="destination-atop",e.fillStyle=oe.makeHexColor(...a),e.fillRect(p,v,s,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),n==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):n==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const m=new Path2D;m.rect(l,c,s,r),t.clip(m),t.globalCompositeOperation="destination-in",t.drawImage(f,p,v,s,r,l,c,s,r),t.restore()}save(){this.inSMaskMode?(Vo(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Vo(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,s,r,n,a){this.ctx.transform(e,t,s,r,n,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s){const r=this.ctx,n=this.current;let a=n.x,o=n.y,l,c;const h=We(r),d=h[0]===0&&h[3]===0||h[1]===0&&h[2]===0,f=d?s.slice(0):null;for(let p=0,v=0,m=e.length;p<m;p++)switch(e[p]|0){case Bi.rectangle:a=t[v++],o=t[v++];const y=t[v++],g=t[v++],b=a+y,w=o+g;r.moveTo(a,o),y===0||g===0?r.lineTo(b,w):(r.lineTo(b,o),r.lineTo(b,w),r.lineTo(a,w)),d||n.updateRectMinMax(h,[a,o,b,w]),r.closePath();break;case Bi.moveTo:a=t[v++],o=t[v++],r.moveTo(a,o),d||n.updatePathMinMax(h,a,o);break;case Bi.lineTo:a=t[v++],o=t[v++],r.lineTo(a,o),d||n.updatePathMinMax(h,a,o);break;case Bi.curveTo:l=a,c=o,a=t[v+4],o=t[v+5],r.bezierCurveTo(t[v],t[v+1],t[v+2],t[v+3],a,o),n.updateCurvePathMinMax(h,l,c,t[v],t[v+1],t[v+2],t[v+3],a,o,f),v+=6;break;case Bi.curveTo2:l=a,c=o,r.bezierCurveTo(a,o,t[v],t[v+1],t[v+2],t[v+3]),n.updateCurvePathMinMax(h,l,c,a,o,t[v],t[v+1],t[v+2],t[v+3],f),a=t[v+2],o=t[v+3],v+=4;break;case Bi.curveTo3:l=a,c=o,a=t[v+2],o=t[v+3],r.bezierCurveTo(t[v],t[v+1],a,o,a,o),n.updateCurvePathMinMax(h,l,c,t[v],t[v+1],a,o,a,o,f),v+=4;break;case Bi.closePath:r.closePath();break}d&&n.updateScalingPathMinMax(h,f),n.setCurrentPoint(a,o)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,s=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof s=="object"&&s!=null&&s.getPattern?(t.save(),t.strokeStyle=s.getPattern(t,this,ks(t),Ot.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,s=this.current.fillColor,r=this.current.patternFill;let n=!1;r&&(t.save(),t.fillStyle=s.getPattern(t,this,ks(t),Ot.FILL),n=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),n&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=TA}eoClip(){this.pendingClip=x0}beginText(){this.current.textMatrix=o_,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const s of e)t.setTransform(...s.transform),t.translate(s.x,s.y),s.addToPath(t,s.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var s;const r=this.commonObjs.get(e),n=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(n.fontMatrix=r.fontMatrix||Sm,(n.fontMatrix[0]===0||n.fontMatrix[3]===0)&&be("Invalid font matrix for font "+e),t<0?(t=-t,n.fontDirection=-1):n.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;const a=r.loadedName||"sans-serif",o=((s=r.systemFontInfo)==null?void 0:s.css)||`"${a}", ${r.fallbackName}`;let l="normal";r.black?l="900":r.bold&&(l="bold");const c=r.italic?"italic":"normal";let h=t;t<m0?h=m0:t>g0&&(h=g0),this.current.fontSizeScale=t/h,this.ctx.font=`${c} ${l} ${h}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,s,r,n,a){this.current.textMatrix=[e,t,s,r,n,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,s,r){const n=this.ctx,a=this.current,o=a.font,l=a.textRenderingMode,c=a.fontSize/a.fontSizeScale,h=l&_t.FILL_STROKE_MASK,d=!!(l&_t.ADD_TO_PATH_FLAG),f=a.patternFill&&!o.missingFile;let p;(o.disableFontFace||d||f)&&(p=o.getPathGenerator(this.commonObjs,e)),o.disableFontFace||f?(n.save(),n.translate(t,s),n.beginPath(),p(n,c),r&&n.setTransform(...r),(h===_t.FILL||h===_t.FILL_STROKE)&&n.fill(),(h===_t.STROKE||h===_t.FILL_STROKE)&&n.stroke(),n.restore()):((h===_t.FILL||h===_t.FILL_STROKE)&&n.fillText(e,t,s),(h===_t.STROKE||h===_t.FILL_STROKE)&&n.strokeText(e,t,s)),d&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:We(n),x:t,y:s,fontSize:c,addToPath:p})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){s=!0;break}return Se(this,"isFontSubpixelAAEnabled",s)}showText(e){const t=this.current,s=t.font;if(s.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const n=this.ctx,a=t.fontSizeScale,o=t.charSpacing,l=t.wordSpacing,c=t.fontDirection,h=t.textHScale*c,d=e.length,f=s.vertical,p=f?1:-1,v=s.defaultVMetrics,m=r*t.fontMatrix[0],y=t.textRenderingMode===_t.FILL&&!s.disableFontFace&&!t.patternFill;n.save(),n.transform(...t.textMatrix),n.translate(t.x,t.y+t.textRise),c>0?n.scale(h,-1):n.scale(h,1);let g;if(t.patternFill){n.save();const I=t.fillColor.getPattern(n,this,ks(n),Ot.FILL);g=We(n),n.restore(),n.fillStyle=I}let b=t.lineWidth;const w=t.textMatrixScale;if(w===0||b===0){const I=t.textRenderingMode&_t.FILL_STROKE_MASK;(I===_t.STROKE||I===_t.FILL_STROKE)&&(b=this.getSinglePixelWidth())}else b/=w;if(a!==1&&(n.scale(a,a),b/=a),n.lineWidth=b,s.isInvalidPDFjsFont){const I=[];let P=0;for(const N of e)I.push(N.unicode),P+=N.width;n.fillText(I.join(""),0,0),t.x+=P*m*h,n.restore(),this.compose();return}let S=0,C;for(C=0;C<d;++C){const I=e[C];if(typeof I=="number"){S+=p*I*r/1e3;continue}let P=!1;const N=(I.isSpace?l:0)+o,F=I.fontChar,T=I.accent;let V,L,W=I.width;if(f){const U=I.vmetric||v,K=-(I.vmetric?U[1]:W*.5)*m,j=U[2]*m;W=U?-U[0]:W,V=K/a,L=(S+j)/a}else V=S/a,L=0;if(s.remeasure&&W>0){const U=n.measureText(F).width*1e3/r*a;if(W<U&&this.isFontSubpixelAAEnabled){const K=W/U;P=!0,n.save(),n.scale(K,1),V/=K}else W!==U&&(V+=(W-U)/2e3*r/a)}if(this.contentVisible&&(I.isInFont||s.missingFile)){if(y&&!T)n.fillText(F,V,L);else if(this.paintChar(F,V,L,g),T){const U=V+r*T.offset.x/a,K=L-r*T.offset.y/a;this.paintChar(T.fontChar,U,K,g)}}const k=f?W*m-N*c:W*m+N*c;S+=k,P&&n.restore()}f?t.y-=S:t.x+=S*h,n.restore(),this.compose()}showType3Text(e){const t=this.ctx,s=this.current,r=s.font,n=s.fontSize,a=s.fontDirection,o=r.vertical?1:-1,l=s.charSpacing,c=s.wordSpacing,h=s.textHScale*a,d=s.fontMatrix||Sm,f=e.length,p=s.textRenderingMode===_t.INVISIBLE;let v,m,y,g;if(!(p||n===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...s.textMatrix),t.translate(s.x,s.y),t.scale(h,a),v=0;v<f;++v){if(m=e[v],typeof m=="number"){g=o*m*n/1e3,this.ctx.translate(g,0),s.x+=g*h;continue}const b=(m.isSpace?c:0)+l,w=r.charProcOperatorList[m.operatorListId];if(!w){be(`Type3 character "${m.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=m,this.save(),t.scale(n,n),t.transform(...d),this.executeOperatorList(w),this.restore()),y=oe.applyTransform([m.width,0],d)[0]*n+b,t.translate(y,0),s.x+=y*h}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,s,r,n,a){this.ctx.rect(s,r,n-s,a-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const s=e[1],r=this.baseTransform||We(this.ctx),n={createCanvasGraphics:a=>new q_(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new AA(e,s,this.ctx,n,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,s){const r=oe.makeHexColor(e,t,s);this.ctx.strokeStyle=r,this.current.strokeColor=r}setFillRGBColor(e,t,s){const r=oe.makeHexColor(e,t,s);this.ctx.fillStyle=r,this.current.fillColor=r,this.current.patternFill=!1}_getPattern(e,t=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=SA(this.getObject(e)),this.cachedPatterns.set(e,s)),t&&(s.matrix=t),s}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const s=this._getPattern(e);t.fillStyle=s.getPattern(t,this,ks(t),Ot.SHADING);const r=ks(t);if(r){const{width:n,height:a}=t.canvas,[o,l,c,h]=oe.getAxialAlignedBoundingBox([0,0,n,a],r);this.ctx.fillRect(o,l,c-o,h-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Le("Should not call beginInlineImage")}beginImageData(){Le("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=We(this.ctx),t)){const s=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],s,r),this.current.updateRectMinMax(We(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||zf("TODO: Support non-isolated groups."),e.knockout&&be("Knockout groups not supported.");const s=We(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=oe.getAxialAlignedBoundingBox(e.bbox,We(t));const n=[0,0,t.canvas.width,t.canvas.height];r=oe.intersect(r,n)||[0,0,0,0];const a=Math.floor(r[0]),o=Math.floor(r[1]),l=Math.max(Math.ceil(r[2])-a,1),c=Math.max(Math.ceil(r[3])-o,1);this.current.startNewPathAndClipBox([0,0,l,c]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,l,c),f=d.context;f.translate(-a,-o),f.transform(...s),e.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:a,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,o),t.save()),Vo(t,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=We(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const n=oe.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(e,t,s,r,n){if(A(this,pa,ig).call(this),yc(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],o=t[3]-t[1];if(n&&this.annotationCanvasMap){s=s.slice(),s[4]-=t[0],s[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=o;const[l,c]=oe.singularValueDecompose2dScale(We(this.ctx)),{viewportScale:h}=this,d=Math.ceil(a*this.outputScaleX*h),f=Math.ceil(o*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:p,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(e,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(l,0,0,-c,0,o*c),yc(this.ctx)}else yc(this.ctx),this.ctx.rect(t[0],t[1],a,o),this.ctx.clip(),this.endPath()}this.current=new y0(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),A(this,pa,sg).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const s=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=PA(e)),r.compiled)){r.compiled(s);return}const n=this._createMaskCanvas(e),a=n.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(a,n.offsetX,n.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s=0,r=0,n,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const o=this.ctx;o.save();const l=We(o);o.transform(t,s,r,n,0,0);const c=this._createMaskCanvas(e);o.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let h=0,d=a.length;h<d;h+=2){const f=oe.transform(l,[t,s,r,n,a[h],a[h+1]]),[p,v]=oe.applyTransform([0,0],f);o.drawImage(c.canvas,p,v)}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,s=this.current.fillColor,r=this.current.patternFill;for(const n of e){const{data:a,width:o,height:l,transform:c}=n,h=this.cachedCanvases.getCanvas("maskCanvas",o,l),d=h.context;d.save();const f=this.getObject(a,n);_0(d,f),d.globalCompositeOperation="source-in",d.fillStyle=r?s.getPattern(d,this,ks(t),Ot.FILL):s,d.fillRect(0,0,o,l),d.restore(),t.save(),t.transform(...c),t.scale(1,-1),bc(t,h.canvas,0,0,o,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){be("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,s,r){if(!this.contentVisible)return;const n=this.getObject(e);if(!n){be("Dependent image isn't ready yet");return}const a=n.width,o=n.height,l=[];for(let c=0,h=r.length;c<h;c+=2)l.push({transform:[t,0,0,s,r[c],r[c+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(n,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:r}=e,n=this.cachedCanvases.getCanvas("inlineImage",s,r),a=n.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",n.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,s=e.height,r=this.ctx;if(this.save(),!Rt){const{filter:o}=r;o!=="none"&&o!==""&&(r.filter="none")}r.scale(1/t,-1/s);let n;if(e.bitmap)n=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)n=e;else{const o=this.cachedCanvases.getCanvas("inlineImage",t,s).context;w0(o,e),n=this.applyTransferMapsToCanvas(o)}const a=this._scaleImage(n,ks(r));r.imageSmoothingEnabled=k0(We(r),e.interpolate),bc(r,a.img,0,0,a.paintWidth,a.paintHeight,0,-s,t,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const s=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const n=e.width,a=e.height,o=this.cachedCanvases.getCanvas("inlineImage",n,a).context;w0(o,e),r=this.applyTransferMapsToCanvas(o)}for(const n of t)s.save(),s.transform(...n.transform),s.scale(1,-1),bc(s,r,n.x,n.y,n.w,n.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const s=this.ctx;this.pendingClip&&(t||(this.pendingClip===x0?s.clip("evenodd"):s.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=We(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:r,d:n}=this.ctx.getTransform();let a,o;if(s===0&&r===0){const l=Math.abs(t),c=Math.abs(n);if(l===c)if(e===0)a=o=1/l;else{const h=l*e;a=o=h<1?1/h:1}else if(e===0)a=1/l,o=1/c;else{const h=l*e,d=c*e;a=h<1?1/h:1,o=d<1?1/d:1}}else{const l=Math.abs(t*n-s*r),c=Math.hypot(t,s),h=Math.hypot(r,n);if(e===0)a=h/l,o=c/l;else{const d=e*l;a=h>d?h/d:1,o=c>d?c/d:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:s}=this.current,[r,n]=this.getScaleForStroking();if(t.lineWidth=s||1,r===1&&n===1){t.stroke();return}const a=t.getLineDash();if(e&&t.save(),t.scale(r,n),a.length>0){const o=Math.max(r,n);t.setLineDash(a.map(l=>l/o)),t.lineDashOffset/=o}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};pa=new WeakSet,ig=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},sg=function(){if(this.pageColors){const i=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(i!=="none"){const e=this.ctx.filter;this.ctx.filter=i,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}};let ph=NA;for(const i in Bi)ph.prototype[i]!==void 0&&(ph.prototype[Bi[i]]=ph.prototype[i]);var $d,Vd;class qr{static get workerPort(){return u(this,$d)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");x(this,$d,e)}static get workerSrc(){return u(this,Vd)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");x(this,Vd,e)}}$d=new WeakMap,Vd=new WeakMap,E(qr,$d,null),E(qr,Vd,"");const wc={DATA:1,ERROR:2},Ye={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ri(i){switch(i instanceof Error||typeof i=="object"&&i!==null||Le('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Qn(i.message);case"MissingPDFException":return new Yn(i.message);case"PasswordException":return new Em(i.message,i.code);case"UnexpectedResponseException":return new Wf(i.message,i.status);case"UnknownErrorException":return new Cm(i.message,i.details);default:return new Cm(i.message,i.toString())}}var Rn,K_,X_,_c;class gl{constructor(e,t,s){E(this,Rn),this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=r=>{const n=r.data;if(n.targetName!==this.sourceName)return;if(n.stream){A(this,Rn,X_).call(this,n);return}if(n.callback){const o=n.callbackId,l=this.callbackCapabilities[o];if(!l)throw new Error(`Cannot resolve callback ${o}`);if(delete this.callbackCapabilities[o],n.callback===wc.DATA)l.resolve(n.data);else if(n.callback===wc.ERROR)l.reject(ri(n.reason));else throw new Error("Unexpected callback case");return}const a=this.actionHandler[n.action];if(!a)throw new Error(`Unknown action from worker: ${n.action}`);if(n.callbackId){const o=this.sourceName,l=n.sourceName;new Promise(function(c){c(a(n.data))}).then(function(c){s.postMessage({sourceName:o,targetName:l,callback:wc.DATA,callbackId:n.callbackId,data:c})},function(c){s.postMessage({sourceName:o,targetName:l,callback:wc.ERROR,callbackId:n.callbackId,reason:ri(c)})});return}if(n.streamId){A(this,Rn,K_).call(this,n);return}a(n.data)},s.addEventListener("message",this._onComObjOnMessage)}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const r=this.callbackId++,n=Promise.withResolvers();this.callbackCapabilities[r]=n;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},s)}catch(a){n.reject(a)}return n.promise}sendWithStream(e,t,s,r){const n=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const h=Promise.withResolvers();return this.streamControllers[n]={controller:c,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:e,streamId:n,data:t,desiredSize:c.desiredSize},r),h.promise},pull:c=>{const h=Promise.withResolvers();return this.streamControllers[n].pullCall=h,l.postMessage({sourceName:a,targetName:o,stream:Ye.PULL,streamId:n,desiredSize:c.desiredSize}),h.promise},cancel:c=>{st(c instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[n].cancelCall=h,this.streamControllers[n].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:Ye.CANCEL,streamId:n,reason:ri(c)}),h.promise}},s)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}Rn=new WeakSet,K_=function(i){const e=i.streamId,t=this.sourceName,s=i.sourceName,r=this.comObj,n=this,a=this.actionHandler[i.action],o={enqueue(l,c=1,h){if(this.isCancelled)return;const d=this.desiredSize;this.desiredSize-=c,d>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:t,targetName:s,stream:Ye.ENQUEUE,streamId:e,chunk:l},h)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:t,targetName:s,stream:Ye.CLOSE,streamId:e}),delete n.streamSinks[e])},error(l){st(l instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:t,targetName:s,stream:Ye.ERROR,streamId:e,reason:ri(l)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:i.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[e]=o,new Promise(function(l){l(a(i.data,o))}).then(function(){r.postMessage({sourceName:t,targetName:s,stream:Ye.START_COMPLETE,streamId:e,success:!0})},function(l){r.postMessage({sourceName:t,targetName:s,stream:Ye.START_COMPLETE,streamId:e,reason:ri(l)})})},X_=function(i){const e=i.streamId,t=this.sourceName,s=i.sourceName,r=this.comObj,n=this.streamControllers[e],a=this.streamSinks[e];switch(i.stream){case Ye.START_COMPLETE:i.success?n.startCall.resolve():n.startCall.reject(ri(i.reason));break;case Ye.PULL_COMPLETE:i.success?n.pullCall.resolve():n.pullCall.reject(ri(i.reason));break;case Ye.PULL:if(!a){r.postMessage({sourceName:t,targetName:s,stream:Ye.PULL_COMPLETE,streamId:e,success:!0});break}a.desiredSize<=0&&i.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=i.desiredSize,new Promise(function(o){var l;o((l=a.onPull)==null?void 0:l.call(a))}).then(function(){r.postMessage({sourceName:t,targetName:s,stream:Ye.PULL_COMPLETE,streamId:e,success:!0})},function(o){r.postMessage({sourceName:t,targetName:s,stream:Ye.PULL_COMPLETE,streamId:e,reason:ri(o)})});break;case Ye.ENQUEUE:if(st(n,"enqueue should have stream controller"),n.isClosed)break;n.controller.enqueue(i.chunk);break;case Ye.CLOSE:if(st(n,"close should have stream controller"),n.isClosed)break;n.isClosed=!0,n.controller.close(),A(this,Rn,_c).call(this,n,e);break;case Ye.ERROR:st(n,"error should have stream controller"),n.controller.error(ri(i.reason)),A(this,Rn,_c).call(this,n,e);break;case Ye.CANCEL_COMPLETE:i.success?n.cancelCall.resolve():n.cancelCall.reject(ri(i.reason)),A(this,Rn,_c).call(this,n,e);break;case Ye.CANCEL:if(!a)break;new Promise(function(o){var l;o((l=a.onCancel)==null?void 0:l.call(a,ri(i.reason)))}).then(function(){r.postMessage({sourceName:t,targetName:s,stream:Ye.CANCEL_COMPLETE,streamId:e,success:!0})},function(o){r.postMessage({sourceName:t,targetName:s,stream:Ye.CANCEL_COMPLETE,streamId:e,reason:ri(o)})}),a.sinkCapability.reject(ri(i.reason)),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},_c=async function(i,e){var t,s,r;await Promise.allSettled([(t=i.startCall)==null?void 0:t.promise,(s=i.pullCall)==null?void 0:s.promise,(r=i.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var ma,mh;class FA{constructor({parsedData:e,rawData:t}){E(this,ma),E(this,mh),x(this,ma,e),x(this,mh,t)}getRaw(){return u(this,mh)}get(e){return u(this,ma).get(e)??null}getAll(){return Fv(u(this,ma))}has(e){return u(this,ma).has(e)}}ma=new WeakMap,mh=new WeakMap;const or=Symbol("INTERNAL");var gh,vh,bh,vl;class DA{constructor(e,{name:t,intent:s,usage:r}){E(this,gh,!1),E(this,vh,!1),E(this,bh,!1),E(this,vl,!0),x(this,gh,!!(e&yi.DISPLAY)),x(this,vh,!!(e&yi.PRINT)),this.name=t,this.intent=s,this.usage=r}get visible(){if(u(this,bh))return u(this,vl);if(!u(this,vl))return!1;const{print:e,view:t}=this.usage;return u(this,gh)?(t==null?void 0:t.viewState)!=="OFF":u(this,vh)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==or&&Le("Internal method `_setVisible` called."),x(this,bh,s),x(this,vl,t)}}gh=new WeakMap,vh=new WeakMap,bh=new WeakMap,vl=new WeakMap;var rn,Pe,bl,yl,Gd,rg;class OA{constructor(e,t=yi.DISPLAY){if(E(this,Gd),E(this,rn,null),E(this,Pe,new Map),E(this,bl,null),E(this,yl,null),this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,x(this,yl,e.order);for(const s of e.groups)u(this,Pe).set(s.id,new DA(t,s));if(e.baseState==="OFF")for(const s of u(this,Pe).values())s._setVisible(or,!1);for(const s of e.on)u(this,Pe).get(s)._setVisible(or,!0);for(const s of e.off)u(this,Pe).get(s)._setVisible(or,!1);x(this,bl,this.getHash())}}isVisible(e){if(u(this,Pe).size===0)return!0;if(!e)return zf("Optional content group not defined."),!0;if(e.type==="OCG")return u(this,Pe).has(e.id)?u(this,Pe).get(e.id).visible:(be(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return A(this,Gd,rg).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!u(this,Pe).has(t))return be(`Optional content group not found: ${t}`),!0;if(u(this,Pe).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!u(this,Pe).has(t))return be(`Optional content group not found: ${t}`),!0;if(!u(this,Pe).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!u(this,Pe).has(t))return be(`Optional content group not found: ${t}`),!0;if(!u(this,Pe).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!u(this,Pe).has(t))return be(`Optional content group not found: ${t}`),!0;if(u(this,Pe).get(t).visible)return!1}return!0}return be(`Unknown optional content policy ${e.policy}.`),!0}return be(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0){const s=u(this,Pe).get(e);if(!s){be(`Optional content group not found: ${e}`);return}s._setVisible(or,!!t,!0),x(this,rn,null)}setOCGState({state:e,preserveRB:t}){let s;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const n=u(this,Pe).get(r);if(n)switch(s){case"ON":n._setVisible(or,!0);break;case"OFF":n._setVisible(or,!1);break;case"Toggle":n._setVisible(or,!n.visible);break}}x(this,rn,null)}get hasInitialVisibility(){return u(this,bl)===null||this.getHash()===u(this,bl)}getOrder(){return u(this,Pe).size?u(this,yl)?u(this,yl).slice():[...u(this,Pe).keys()]:null}getGroups(){return u(this,Pe).size>0?Fv(u(this,Pe)):null}getGroup(e){return u(this,Pe).get(e)||null}getHash(){if(u(this,rn)!==null)return u(this,rn);const e=new j_;for(const[t,s]of u(this,Pe))e.update(`${t}:${s.visible}`);return x(this,rn,e.hexdigest())}}rn=new WeakMap,Pe=new WeakMap,bl=new WeakMap,yl=new WeakMap,Gd=new WeakSet,rg=function(i){const e=i.length;if(e<2)return!0;const t=i[0];for(let s=1;s<e;s++){const r=i[s];let n;if(Array.isArray(r))n=A(this,Gd,rg).call(this,r);else if(u(this,Pe).has(r))n=u(this,Pe).get(r).visible;else return be(`Optional content group not found: ${r}`),!0;switch(t){case"And":if(!n)return!1;break;case"Or":if(n)return!0;break;case"Not":return!n;default:return!0}}return t==="And"};class zA{constructor(e,{disableRange:t=!1,disableStream:s=!1}){st(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:n,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(n==null?void 0:n.length)>0){const l=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(n){return n._begin!==e?!1:(n._enqueue(s),!0)});st(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,r,n;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(n=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||n.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){st(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new WA(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new BA(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class WA{constructor(e,t,s=!1,r=null){this._stream=e,this._done=s||!1,this._filename=Bv(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const n of this._queuedChunks)this._loaded+=n.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class BA{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function jA(i){let e=!0,t=s("filename\\*","i").exec(i);if(t){t=t[1];let h=o(t);return h=unescape(h),h=l(h),h=c(h),n(h)}if(t=a(i),t){const h=c(t);return n(h)}if(t=s("filename","i").exec(i),t){t=t[1];let h=o(t);return h=c(h),n(h)}function s(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function r(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),p=Bf(d);d=f.decode(p),e=!1}catch{}}return d}function n(h){return e&&/[\x80-\xff]/.test(h)&&(h=r("utf-8",h),e&&(h=r("iso-8859-1",h))),h}function a(h){const d=[];let f;const p=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(h))!==null;){let[,m,y,g]=f;if(m=parseInt(m,10),m in d){if(m===0)break;continue}d[m]=[y,g]}const v=[];for(let m=0;m<d.length&&m in d;++m){let[y,g]=d[m];g=o(g),y&&(g=unescape(g),m===0&&(g=l(g))),v.push(g)}return v.join("")}function o(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function l(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),p=h.slice(d+1).replace(/^[^']*'/,"");return r(f,p)}function c(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,v){if(p==="q"||p==="Q")return v=v.replaceAll("_"," "),v=v.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,y){return String.fromCharCode(parseInt(y,16))}),r(f,v);try{v=atob(v)}catch{}return r(f,v)})}return""}function Hv({getResponseHeader:i,isHttp:e,rangeChunkSize:t,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},n=parseInt(i("Content-Length"),10);return!Number.isInteger(n)||(r.suggestedLength=n,n<=2*t)||s||!e||i("Accept-Ranges")!=="bytes"||(i("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function $v(i){const e=i("Content-Disposition");if(e){let t=jA(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Bv(t))return t}return null}function Vf(i,e){return i===404||i===0&&e.startsWith("file:")?new Yn('Missing PDF "'+e+'".'):new Wf(`Unexpected server response (${i}) while retrieving PDF "${e}".`,i)}function Y_(i){return i===200||i===206}function Q_(i,e,t){return{method:"GET",headers:i,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function Z_(i){const e=new Headers;for(const t in i){const s=i[t];s!==void 0&&e.append(t,s)}return e}function J_(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(be(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class S0{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return st(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new UA(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new HA(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class UA{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=Z_(this._stream.httpHeaders);const s=t.url;fetch(s,Q_(this._headers,this._withCredentials,this._abortController)).then(r=>{if(!Y_(r.status))throw Vf(r.status,s);this._reader=r.body.getReader(),this._headersCapability.resolve();const n=l=>r.headers.get(l),{allowRangeRequests:a,suggestedLength:o}=Hv({getResponseHeader:n,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=o||this._contentLength,this._filename=$v(n),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Qn("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._headersCapability.promise;const{value:t,done:s}=await this._reader.read();return s?{value:t,done:s}:(this._loaded+=t.byteLength,(e=this.onProgress)==null||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:J_(t),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class HA{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController,this._headers=Z_(this._stream.httpHeaders),this._headers.append("Range",`bytes=${t}-${s-1}`);const n=r.url;fetch(n,Q_(this._headers,this._withCredentials,this._abortController)).then(a=>{if(!Y_(a.status))throw Vf(a.status,n);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._readCapability.promise;const{value:t,done:s}=await this._reader.read();return s?{value:t,done:s}:(this._loaded+=t.byteLength,(e=this.onProgress)==null||e.call(this,{loaded:this._loaded}),{value:J_(t),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Ep=200,Cp=206;function $A(i){const e=i.response;return typeof e!="string"?e:Bf(e).buffer}class VA{constructor(e,t={}){this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,s){const r={begin:e,end:t};for(const n in s)r[n]=s[n];return this.request(r)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const n in this.httpHeaders){const a=this.httpHeaders[n];a!==void 0&&t.setRequestHeader(n,a)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=Cp):r.expectedStatus=Ep,t.responseType="arraybuffer",e.onError&&(t.onerror=function(n){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var s;const r=this.pendingRequests[e];r&&((s=r.onProgress)==null||s.call(r,t))}onStateChange(e,t){var s,r,n;const a=this.pendingRequests[e];if(!a)return;const o=a.xhr;if(o.readyState>=2&&a.onHeadersReceived&&(a.onHeadersReceived(),delete a.onHeadersReceived),o.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],o.status===0&&this.isHttp){(s=a.onError)==null||s.call(a,o.status);return}const l=o.status||Ep;if(!(l===Ep&&a.expectedStatus===Cp)&&l!==a.expectedStatus){(r=a.onError)==null||r.call(a,o.status);return}const c=$A(o);if(l===Cp){const h=o.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);a.onDone({begin:parseInt(d[1],10),chunk:c})}else c?a.onDone({begin:0,chunk:c}):(n=a.onError)==null||n.call(a,o.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class GA{constructor(e){this._source=e,this._manager=new VA(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return st(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new qA(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new KA(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class qA{constructor(e,t){this._manager=e;const s={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(s),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),s=a=>t.getResponseHeader(a),{allowRangeRequests:r,suggestedLength:n}=Hv({getResponseHeader:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=n||this._contentLength,this._filename=$v(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Vf(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class KA{constructor(e,t,s){this._manager=e;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,s,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=Vf(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const e1=/^file:\/\/\/[a-zA-Z]:\//;function XA(i){const e=ys.get("url"),t=e.parse(i);return t.protocol==="file:"||t.host?t:/^[a-z]:[/\\]/i.test(i)?e.parse(`file:///${i}`):(t.host||(t.protocol="file:"),t)}class YA{constructor(e){this.source=e,this.url=XA(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return st(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new JA(this):new QA(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=this.isFsUrl?new eE(this,e,t):new ZA(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class t1{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(e=this.onProgress)==null||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Qn("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class i1{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(e=this.onProgress)==null||e.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function qd(i,e){return{protocol:i.protocol,auth:i.auth,host:i.hostname,port:i.port,path:i.path,method:"GET",headers:e}}class QA extends t1{constructor(e){super(e);const t=s=>{if(s.statusCode===404){const o=new Yn(`Missing PDF "${this._url}".`);this._storedError=o,this._headersCapability.reject(o);return}this._headersCapability.resolve(),this._setReadableStream(s);const r=o=>this._readableStream.headers[o.toLowerCase()],{allowRangeRequests:n,suggestedLength:a}=Hv({getResponseHeader:r,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=n,this._contentLength=a||this._contentLength,this._filename=$v(r)};if(this._request=null,this._url.protocol==="http:"){const s=ys.get("http");this._request=s.request(qd(this._url,e.httpHeaders),t)}else{const s=ys.get("https");this._request=s.request(qd(this._url,e.httpHeaders),t)}this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class ZA extends i1{constructor(e,t,s){super(e),this._httpHeaders={};for(const n in e.httpHeaders){const a=e.httpHeaders[n];a!==void 0&&(this._httpHeaders[n]=a)}this._httpHeaders.Range=`bytes=${t}-${s-1}`;const r=n=>{if(n.statusCode===404){const a=new Yn(`Missing PDF "${this._url}".`);this._storedError=a;return}this._setReadableStream(n)};if(this._request=null,this._url.protocol==="http:"){const n=ys.get("http");this._request=n.request(qd(this._url,this._httpHeaders),r)}else{const n=ys.get("https");this._request=n.request(qd(this._url,this._httpHeaders),r)}this._request.on("error",n=>{this._storedError=n}),this._request.end()}}class JA extends t1{constructor(e){super(e);let t=decodeURIComponent(this._url.path);e1.test(this._url.href)&&(t=t.replace(/^\//,""));const s=ys.get("fs");s.promises.lstat(t).then(r=>{this._contentLength=r.size,this._setReadableStream(s.createReadStream(t)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=new Yn(`Missing PDF "${t}".`)),this._storedError=r,this._headersCapability.reject(r)})}}class eE extends i1{constructor(e,t,s){super(e);let r=decodeURIComponent(this._url.path);e1.test(this._url.href)&&(r=r.replace(/^\//,""));const n=ys.get("fs");this._setReadableStream(n.createReadStream(r,{start:t,end:s-1}))}}const tE=1e5,jt=30,iE=.8;var A0,nn,ti,yh,wh,In,Ar,Kd,Xd,ga,nu,wl,Tn,au,Yd,_l,fo,Qd,Zd,va,Ga,Zr,ou,po,s1,E0,ng,xn,_h,r1,C0;const Ni=class kl{constructor({textContentSource:e,container:t,viewport:s}){E(this,po),E(this,nn,Promise.withResolvers()),E(this,ti,null),E(this,yh,!1),E(this,wh,!!((A0=globalThis.FontInspector)!=null&&A0.enabled)),E(this,In,null),E(this,Ar,null),E(this,Kd,0),E(this,Xd,0),E(this,ga,null),E(this,nu,null),E(this,wl,0),E(this,Tn,0),E(this,au,Object.create(null)),E(this,Yd,[]),E(this,_l,null),E(this,fo,[]),E(this,Qd,new WeakMap),E(this,Zd,null);var r;if(e instanceof ReadableStream)x(this,_l,e);else if(typeof e=="object")x(this,_l,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');x(this,ti,x(this,nu,t)),x(this,Tn,s.scale*(globalThis.devicePixelRatio||1)),x(this,wl,s.rotation),x(this,Ar,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:n,pageHeight:a,pageX:o,pageY:l}=s.rawDims;x(this,Zd,[1,0,0,-1,-o,l+a]),x(this,Xd,n),x(this,Kd,a),A(r=kl,xn,r1).call(r),Gn(t,s),u(this,nn).promise.catch(()=>{}).then(()=>{u(kl,ou).delete(this),x(this,Ar,null),x(this,au,null)})}render(){const e=()=>{u(this,ga).read().then(({value:t,done:s})=>{if(s){u(this,nn).resolve();return}u(this,In)??x(this,In,t.lang),Object.assign(u(this,au),t.styles),A(this,po,s1).call(this,t.items),e()},u(this,nn).reject)};return x(this,ga,u(this,_l).getReader()),u(kl,ou).add(this),e(),u(this,nn).promise}update({viewport:e,onBefore:t=null}){var s;const r=e.scale*(globalThis.devicePixelRatio||1),n=e.rotation;if(n!==u(this,wl)&&(t==null||t(),x(this,wl,n),Gn(u(this,nu),{rotation:n})),r!==u(this,Tn)){t==null||t(),x(this,Tn,r);const a={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:A(s=kl,xn,_h).call(s,u(this,In))};for(const o of u(this,fo))a.properties=u(this,Qd).get(o),a.div=o,A(this,po,ng).call(this,a)}}cancel(){var e;const t=new Qn("TextLayer task cancelled.");(e=u(this,ga))==null||e.cancel(t).catch(()=>{}),x(this,ga,null),u(this,nn).reject(t)}get textDivs(){return u(this,fo)}get textContentItemsStr(){return u(this,Yd)}static cleanup(){if(!(u(this,ou).size>0)){u(this,va).clear();for(const{canvas:e}of u(this,Ga).values())e.remove();u(this,Ga).clear()}}};nn=new WeakMap,ti=new WeakMap,yh=new WeakMap,wh=new WeakMap,In=new WeakMap,Ar=new WeakMap,Kd=new WeakMap,Xd=new WeakMap,ga=new WeakMap,nu=new WeakMap,wl=new WeakMap,Tn=new WeakMap,au=new WeakMap,Yd=new WeakMap,_l=new WeakMap,fo=new WeakMap,Qd=new WeakMap,Zd=new WeakMap,va=new WeakMap,Ga=new WeakMap,Zr=new WeakMap,ou=new WeakMap,po=new WeakSet,s1=function(i){var e,t;if(u(this,yh))return;(t=u(this,Ar)).ctx??(t.ctx=A(e=Ni,xn,_h).call(e,u(this,In)));const s=u(this,fo),r=u(this,Yd);for(const n of i){if(s.length>tE){be("Ignoring additional textDivs for performance reasons."),x(this,yh,!0);return}if(n.str===void 0){if(n.type==="beginMarkedContentProps"||n.type==="beginMarkedContent"){const a=u(this,ti);x(this,ti,document.createElement("span")),u(this,ti).classList.add("markedContent"),n.id!==null&&u(this,ti).setAttribute("id",`${n.id}`),a.append(u(this,ti))}else n.type==="endMarkedContent"&&x(this,ti,u(this,ti).parentNode);continue}r.push(n.str),A(this,po,E0).call(this,n)}},E0=function(i){var e;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:i.str!=="",hasEOL:i.hasEOL,fontSize:0};u(this,fo).push(t);const r=oe.transform(u(this,Zd),i.transform);let n=Math.atan2(r[1],r[0]);const a=u(this,au)[i.fontName];a.vertical&&(n+=Math.PI/2);const o=u(this,wh)&&a.fontSubstitution||a.fontFamily,l=Math.hypot(r[2],r[3]),c=l*A(e=Ni,xn,C0).call(e,o,u(this,In));let h,d;n===0?(h=r[4],d=r[5]-c):(h=r[4]+c*Math.sin(n),d=r[5]-c*Math.cos(n));const f="calc(var(--scale-factor)*",p=t.style;u(this,ti)===u(this,nu)?(p.left=`${(100*h/u(this,Xd)).toFixed(2)}%`,p.top=`${(100*d/u(this,Kd)).toFixed(2)}%`):(p.left=`${f}${h.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(u(Ni,Zr)*l).toFixed(2)}px)`,p.fontFamily=o,s.fontSize=l,t.setAttribute("role","presentation"),t.textContent=i.str,t.dir=i.dir,u(this,wh)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||i.fontName),n!==0&&(s.angle=n*(180/Math.PI));let v=!1;if(i.str.length>1)v=!0;else if(i.str!==" "&&i.transform[0]!==i.transform[3]){const m=Math.abs(i.transform[0]),y=Math.abs(i.transform[3]);m!==y&&Math.max(m,y)/Math.min(m,y)>1.5&&(v=!0)}if(v&&(s.canvasWidth=a.vertical?i.height:i.width),u(this,Qd).set(t,s),u(this,Ar).div=t,u(this,Ar).properties=s,A(this,po,ng).call(this,u(this,Ar)),s.hasText&&u(this,ti).append(t),s.hasEOL){const m=document.createElement("br");m.setAttribute("role","presentation"),u(this,ti).append(m)}},ng=function(i){const{div:e,properties:t,ctx:s,prevFontSize:r,prevFontFamily:n}=i,{style:a}=e;let o="";if(u(Ni,Zr)>1&&(o=`scale(${1/u(Ni,Zr)})`),t.canvasWidth!==0&&t.hasText){const{fontFamily:l}=a,{canvasWidth:c,fontSize:h}=t;(r!==h||n!==l)&&(s.font=`${h*u(this,Tn)}px ${l}`,i.prevFontSize=h,i.prevFontFamily=l);const{width:d}=s.measureText(e.textContent);d>0&&(o=`scaleX(${c*u(this,Tn)/d}) ${o}`)}t.angle!==0&&(o=`rotate(${t.angle}deg) ${o}`),o.length>0&&(a.transform=o)},xn=new WeakSet,_h=function(i=null){let e=u(this,Ga).get(i||(i=""));if(!e){const t=document.createElement("canvas");t.className="hiddenCanvasElement",t.lang=i,document.body.append(t),e=t.getContext("2d",{alpha:!1,willReadFrequently:!0}),u(this,Ga).set(i,e)}return e},r1=function(){if(u(this,Zr)!==null)return;const i=document.createElement("div");i.style.opacity=0,i.style.lineHeight=1,i.style.fontSize="1px",i.textContent="X",document.body.append(i),x(this,Zr,i.getBoundingClientRect().height),i.remove()},C0=function(i,e){const t=u(this,va).get(i);if(t)return t;const s=A(this,xn,_h).call(this,e),r=s.font;s.canvas.width=s.canvas.height=jt,s.font=`${jt}px ${i}`;const n=s.measureText("");let a=n.fontBoundingBoxAscent,o=Math.abs(n.fontBoundingBoxDescent);if(a){const h=a/(a+o);return u(this,va).set(i,h),s.canvas.width=s.canvas.height=0,s.font=r,h}s.strokeStyle="red",s.clearRect(0,0,jt,jt),s.strokeText("g",0,0);let l=s.getImageData(0,0,jt,jt).data;o=0;for(let h=l.length-1-3;h>=0;h-=4)if(l[h]>0){o=Math.ceil(h/4/jt);break}s.clearRect(0,0,jt,jt),s.strokeText("A",0,jt),l=s.getImageData(0,0,jt,jt).data,a=0;for(let h=0,d=l.length;h<d;h+=4)if(l[h]>0){a=jt-Math.floor(h/4/jt);break}s.canvas.width=s.canvas.height=0,s.font=r;const c=a?a/(a+o):iE;return u(this,va).set(i,c),c},E(Ni,xn),E(Ni,va,new Map),E(Ni,Ga,new Map),E(Ni,Zr,null),E(Ni,ou,new Set);let Jd=Ni;function sE(){g_("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:i,container:e,viewport:t,...s}=arguments[0],r=Object.keys(s);r.length>0&&be("Ignoring `renderTextLayer` parameters: "+r.join(", "));const n=new Jd({textContentSource:i,container:e,viewport:t}),{textDivs:a,textContentItemsStr:o}=n;return{promise:n.render(),textDivs:a,textContentItemsStr:o}}function rE(){g_("`updateTextLayer`, please use `TextLayer` instead.")}class Wu{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function r(n){var a;if(!n)return;let o=null;const l=n.name;if(l==="#text")o=n.value;else if(Wu.shouldBuildText(l))(a=n==null?void 0:n.attributes)!=null&&a.textContent?o=n.attributes.textContent:n.value&&(o=n.value);else return;if(o!==null&&t.push({str:o}),!!n.children)for(const c of n.children)r(c)}return r(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const nE=65536,aE=100,oE=5e3,lE=Rt?vA:tA,uE=Rt?bA:p_,cE=Rt?gA:eA,hE=Rt?yA:m_;function dE(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const e=new mE,{docId:t}=e,s=i.url?fE(i.url):null,r=i.data?pE(i.data):null,n=i.httpHeaders||null,a=i.withCredentials===!0,o=i.password??null,l=i.range instanceof o1?i.range:null,c=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:nE;let h=i.worker instanceof Sh?i.worker:null;const d=i.verbosity,f=typeof i.docBaseUrl=="string"&&!Wv(i.docBaseUrl)?i.docBaseUrl:null,p=typeof i.cMapUrl=="string"?i.cMapUrl:null,v=i.cMapPacked!==!1,m=i.CMapReaderFactory||uE,y=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,g=i.StandardFontDataFactory||hE,b=i.stopAtErrors!==!0,w=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,S=i.isEvalSupported!==!1,C=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!Rt,I=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,P=typeof i.disableFontFace=="boolean"?i.disableFontFace:Rt,N=i.fontExtraProperties===!0,F=i.enableXfa===!0,T=i.ownerDocument||globalThis.document,V=i.disableRange===!0,L=i.disableStream===!0,W=i.disableAutoFetch===!0,k=i.pdfBug===!0,U=i.enableHWA===!0,K=l?l.length:i.length??NaN,j=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!Rt&&!P,G=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:m===p_&&g===m_&&p&&y&&tl(p,document.baseURI)&&tl(y,document.baseURI),H=i.canvasFactory||new lE({ownerDocument:T,enableHWA:U}),Q=i.filterFactory||new cE({docId:t,ownerDocument:T}),z=null;US(d);const D={canvasFactory:H,filterFactory:Q};if(G||(D.cMapReaderFactory=new m({baseUrl:p,isCompressed:v}),D.standardFontDataFactory=new g({baseUrl:y})),!h){const J={verbosity:d,port:qr.workerPort};h=J.port?Sh.fromPort(J):new Sh(J),e._worker=h}const se={docId:t,apiVersion:"4.4.168",data:r,password:o,disableAutoFetch:W,rangeChunkSize:c,length:K,docBaseUrl:f,enableXfa:F,evaluatorOptions:{maxImageSize:w,disableFontFace:P,ignoreErrors:b,isEvalSupported:S,isOffscreenCanvasSupported:C,canvasMaxAreaInBytes:I,fontExtraProperties:N,useSystemFonts:j,cMapUrl:G?p:null,standardFontDataUrl:G?y:null}},ie={disableFontFace:P,fontExtraProperties:N,ownerDocument:T,pdfBug:k,styleElement:z,loadingParams:{disableAutoFetch:W,enableXfa:F}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const J=h.messageHandler.sendWithPromise("GetDocRequest",se,r?[r.buffer]:null);let ve;if(l)ve=new zA(l,{disableRange:V,disableStream:L});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");ve=(fe=>Rt?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&tl(fe.url)?new S0(fe):new YA(fe):tl(fe.url)?new S0(fe):new GA(fe))({url:s,length:K,httpHeaders:n,withCredentials:a,rangeChunkSize:c,disableRange:V,disableStream:L})}return J.then(fe=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const ye=new gl(t,fe,h.port),Ee=new yE(ye,e,ve,ie,D);e._transport=Ee,ye.send("Ready",null)})}).catch(e._capability.reject),e}function fE(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch{if(Rt&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function pE(i){if(Rt&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return Bf(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function M0(i){return typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0}var ag;const n1=class a1{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Mi(a1,ag)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,s;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,r}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};ag=new WeakMap,E(n1,ag,0);let mE=n1;class o1{constructor(e,t,s=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const s of this._rangeListeners)s(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){Le("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class gE{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Se(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var an,Er,ls,qa,ef;class vE{constructor(e,t,s,r=!1){E(this,ls),E(this,an,null),E(this,Er,!1),this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=r?new n0:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new l1,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:n=!1}={}){return new Vu({viewBox:this.view,scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:n})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Se(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:s="display",annotationMode:r=kr.ENABLE,transform:n=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:h=null}){var d,f;(d=this._stats)==null||d.time("Overall");const p=this._transport.getRenderingIntent(s,r,h),{renderingIntent:v,cacheKey:m}=p;x(this,Er,!1),A(this,ls,ef).call(this),o||(o=this._transport.getOptionalContentConfig(v));let y=this._intentStates.get(m);y||(y=Object.create(null),this._intentStates.set(m,y)),y.streamReaderCancelTimeout&&(clearTimeout(y.streamReaderCancelTimeout),y.streamReaderCancelTimeout=null);const g=!!(v&yi.PRINT);y.displayReadyCapability||(y.displayReadyCapability=Promise.withResolvers(),y.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(p));const b=C=>{var I;y.renderTasks.delete(w),(this._maybeCleanupAfterRender||g)&&x(this,Er,!0),A(this,ls,qa).call(this,!g),C?(w.capability.reject(C),this._abortOperatorList({intentState:y,reason:C instanceof Error?C:new Error(C)})):w.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(I=globalThis.Stats)!=null&&I.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},w=new _E({callback:b,params:{canvasContext:e,viewport:t,transform:n,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:y.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!g,pdfBug:this._pdfBug,pageColors:c});(y.renderTasks||(y.renderTasks=new Set)).add(w);const S=w.task;return Promise.all([y.displayReadyCapability.promise,o]).then(([C,I])=>{var P;if(this.destroyed){b();return}if((P=this._stats)==null||P.time("Rendering"),!(I.renderingIntent&v))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");w.initializeGraphics({transparency:C,optionalContentConfig:I}),w.operatorListChanged()}).catch(b),S}getOperatorList({intent:e="display",annotationMode:t=kr.ENABLE,printAnnotationStorage:s=null}={}){var r;function n(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const a=this._transport.getRenderingIntent(e,t,s,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=n,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(r=this._stats)==null||r.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Wu.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,r){function n(){a.read().then(function({value:l,done:c}){if(c){s(o);return}o.lang??(o.lang=l.lang),Object.assign(o.styles,l.styles),o.items.push(...l.items),n()},r)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};n()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),x(this,Er,!1),A(this,ls,ef).call(this),Promise.all(e)}cleanup(e=!1){x(this,Er,!0);const t=A(this,ls,qa).call(this,!1);return e&&t&&this._stats&&(this._stats=new n0),t}_startRenderPage(e,t){var s,r;const n=this._intentStates.get(t);n&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=n.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let s=0,r=e.length;s<r;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&A(this,ls,qa).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s}){const{map:r,transfer:n}=s,a=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r},n).getReader(),o=this._intentStates.get(t);o.streamReader=a;const l=()=>{a.read().then(({value:c,done:h})=>{if(h){o.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(c,o),l())},c=>{if(o.streamReader=null,!this._transport.destroyed){if(o.operatorList){o.operatorList.lastChunk=!0;for(const h of o.renderTasks)h.operatorListChanged();A(this,ls,qa).call(this,!0)}if(o.displayReadyCapability)o.displayReadyCapability.reject(c);else if(o.opListReadCapability)o.opListReadCapability.reject(c);else throw c}})};l()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof zv){let r=aE;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Qn(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,n]of this._intentStates)if(n===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}an=new WeakMap,Er=new WeakMap,ls=new WeakSet,qa=function(i=!1){if(A(this,ls,ef).call(this),!u(this,Er)||this.destroyed)return!1;if(i)return x(this,an,setTimeout(()=>{x(this,an,null),A(this,ls,qa).call(this,!1)},oE)),!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),x(this,Er,!1),!0},ef=function(){u(this,an)&&(clearTimeout(u(this,an)),x(this,an,null))};var ba,og;class bE{constructor(){E(this,ba,new Set),E(this,og,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};u(this,og).then(()=>{for(const r of u(this,ba))r.call(this,s)})}addEventListener(e,t){u(this,ba).add(t)}removeEventListener(e,t){u(this,ba).delete(t)}terminate(){u(this,ba).clear()}}ba=new WeakMap,og=new WeakMap;const Bs={isWorkerDisabled:!1,fakeWorkerId:0};Rt&&(Bs.isWorkerDisabled=!0,qr.workerSrc||(qr.workerSrc="./pdf.worker.mjs")),Bs.isSameOrigin=function(i,e){let t;try{if(t=new URL(i),!t.origin||t.origin==="null")return!1}catch{return!1}const s=new URL(e,t);return t.origin===s.origin},Bs.createCDNWrapper=function(i){const e=`await import("${i}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};var Sn,xl,kh,lu,xh;const lg=class Ps{constructor({name:e=null,port:t=null,verbosity:s=HS()}={}){E(this,xl);var r;if(this.name=e,this.destroyed=!1,this.verbosity=s,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((r=u(Ps,Sn))!=null&&r.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(u(Ps,Sn)||x(Ps,Sn,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return Rt?Promise.all([ys.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new gl("main","worker",e),this._messageHandler.on("ready",function(){}),A(this,xl,kh).call(this)}_initialize(){if(Bs.isWorkerDisabled||u(Ps,lu,xh)){this._setupFakeWorker();return}let{workerSrc:e}=Ps;try{Bs.isSameOrigin(window.location.href,e)||(e=Bs.createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new gl("main","worker",t),r=()=>{n.abort(),s.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},n=new AbortController;t.addEventListener("error",()=>{this._webWorker||r()},{signal:n.signal}),s.on("test",o=>{if(n.abort(),this.destroyed||!o){r();return}this._messageHandler=s,this._port=t,this._webWorker=t,A(this,xl,kh).call(this)}),s.on("ready",o=>{if(n.abort(),this.destroyed){r();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const o=new Uint8Array;s.send("test",o,[o.buffer])};a();return}catch{zf("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Bs.isWorkerDisabled||(be("Setting up fake worker."),Bs.isWorkerDisabled=!0),Ps._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new bE;this._port=t;const s=`fake${Bs.fakeWorkerId++}`,r=new gl(s+"_worker",s,t);e.setup(r,t),this._messageHandler=new gl(s,s+"_worker",t),A(this,xl,kh).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=u(Ps,Sn))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var t;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const s=(t=u(this,Sn))==null?void 0:t.get(e.port);if(s){if(s._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return s}return new Ps(e)}static get workerSrc(){if(qr.workerSrc)return qr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Se(this,"_setupFakeWorkerGlobal",(async()=>u(this,lu,xh)?u(this,lu,xh):(await import(this.workerSrc)).WorkerMessageHandler)())}};Sn=new WeakMap,xl=new WeakSet,kh=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},lu=new WeakSet,xh=function(){var i;try{return((i=globalThis.pdfjsWorker)==null?void 0:i.WorkerMessageHandler)||null}catch{return null}},E(lg,lu),E(lg,Sn);let Sh=lg;var Cr,Rs,Sl,Al,Is,ya,El;class yE{constructor(e,t,s,r,n){E(this,ya),E(this,Cr,new Map),E(this,Rs,new Map),E(this,Sl,new Map),E(this,Al,new Map),E(this,Is,null),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new l1,this.fontLoader=new pA({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=n.canvasFactory,this.filterFactory=n.filterFactory,this.cMapReaderFactory=n.cMapReaderFactory,this.standardFontDataFactory=n.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Se(this,"annotationStorage",new Uv)}getRenderingIntent(e,t=kr.ENABLE,s=null,r=!1){let n=yi.DISPLAY,a=Zm;switch(e){case"any":n=yi.ANY;break;case"display":break;case"print":n=yi.PRINT;break;default:be(`getRenderingIntent - invalid intent: ${e}`)}switch(t){case kr.DISABLE:n+=yi.ANNOTATIONS_DISABLE;break;case kr.ENABLE:break;case kr.ENABLE_FORMS:n+=yi.ANNOTATIONS_FORMS;break;case kr.ENABLE_STORAGE:n+=yi.ANNOTATIONS_STORAGE,a=(n&yi.PRINT&&s instanceof H_?s:this.annotationStorage).serializable;break;default:be(`getRenderingIntent - invalid annotationMode: ${t}`)}return r&&(n+=yi.OPLIST),{renderingIntent:n,cacheKey:`${n}_${a.hash}`,annotationStorageSerializable:a}}destroy(){var e;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(e=u(this,Is))==null||e.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const r of u(this,Rs).values())t.push(r._destroy());u(this,Rs).clear(),u(this,Sl).clear(),u(this,Al).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const s=this.messageHandler.sendWithPromise("Terminate",null);return t.push(s),Promise.all(t).then(()=>{var r;this.commonObjs.clear(),this.fontLoader.clear(),u(this,Cr).clear(),this.filterFactory.destroy(),Jd.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Qn("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,r)=>{st(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=n=>{this._lastProgress={loaded:n.loaded,total:n.total}},r.onPull=()=>{this._fullReader.read().then(function({value:n,done:a}){if(a){r.close();return}st(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(n),1,[n])}).catch(n=>{r.error(n)})},r.onCancel=n=>{this._fullReader.cancel(n),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",s=>{const r=Promise.withResolvers(),n=this._fullReader;return n.headersReady.then(()=>{var a;(!n.isStreamingSupported||!n.isRangeSupported)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),n.onProgress=o=>{var l;(l=t.onProgress)==null||l.call(t,{loaded:o.loaded,total:o.total})}),r.resolve({isStreamingSupported:n.isStreamingSupported,isRangeSupported:n.isRangeSupported,contentLength:n.contentLength})},r.reject),r.promise}),e.on("GetRangeReader",(s,r)=>{st(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(s.begin,s.end);if(!n){r.close();return}r.onPull=()=>{n.read().then(function({value:a,done:o}){if(o){r.close();return}st(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{n.cancel(a),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new gE(s,this))}),e.on("DocException",function(s){let r;switch(s.name){case"PasswordException":r=new Em(s.message,s.code);break;case"InvalidPDFException":r=new l_(s.message);break;case"MissingPDFException":r=new Yn(s.message);break;case"UnexpectedResponseException":r=new Wf(s.message,s.status);break;case"UnknownErrorException":r=new Cm(s.message,s.details);break;default:Le("DocException - expected a valid Error.")}t._capability.reject(r)}),e.on("PasswordRequest",s=>{if(x(this,Is,Promise.withResolvers()),t.onPassword){const r=n=>{n instanceof Error?u(this,Is).reject(n):u(this,Is).resolve({password:n})};try{t.onPassword(r,s.code)}catch(n){u(this,Is).reject(n)}}else u(this,Is).reject(new Em(s.message,s.code));return u(this,Is).promise}),e.on("DataLoaded",s=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{this.destroyed||u(this,Rs).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,r,n])=>{var a;if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":const{disableFontFace:o,fontExtraProperties:l,pdfBug:c}=this._params;if("error"in n){const p=n.error;be(`Error during font loading: ${p}`),this.commonObjs.resolve(s,p);break}const h=c&&(a=globalThis.FontInspector)!=null&&a.enabled?(p,v)=>globalThis.FontInspector.fontAdded(p,v):null,d=new mA(n,{disableFontFace:o,inspectFont:h});this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!l&&d.data&&(d.data=null),this.commonObjs.resolve(s,d)});break;case"CopyLocalImage":const{imageRef:f}=n;st(f,"The imageRef must be defined.");for(const p of u(this,Rs).values())for(const[,v]of p.objs)if((v==null?void 0:v.ref)===f)return v.dataLen?(this.commonObjs.resolve(s,structuredClone(v)),v.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,n);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([s,r,n,a])=>{var o;if(this.destroyed)return;const l=u(this,Rs).get(r);if(!l.objs.has(s)){if(l._intentStates.size===0){(o=a==null?void 0:a.bitmap)==null||o.close();return}switch(n){case"Image":l.objs.resolve(s,a),(a==null?void 0:a.dataLen)>zS&&(l._maybeCleanupAfterRender=!0);break;case"Pattern":l.objs.resolve(s,a);break;default:throw new Error(`Got unknown object type ${n}`)}}}),e.on("DocProgress",s=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBuiltInCMap",s=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(s):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",s=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(s):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e;this.annotationStorage.size<=0&&be("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:s}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((e=this._fullReader)==null?void 0:e.filename)??null},s).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=u(this,Sl).get(t);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(n=>{if(this.destroyed)throw new Error("Transport destroyed");n.refStr&&u(this,Al).set(n.refStr,e);const a=new vE(t,n,this,this._params.pdfBug);return u(this,Rs).set(t,a),a});return u(this,Sl).set(t,r),r}getPageIndex(e){return M0(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return A(this,ya,El).call(this,"GetFieldObjects")}hasJSActions(){return A(this,ya,El).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return A(this,ya,El).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return A(this,ya,El).call(this,"GetOptionalContentConfig").then(t=>new OA(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=u(this,Cr).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(r=>{var n,a;return{info:r[0],metadata:r[1]?new FA(r[1]):null,contentDispositionFilename:((n=this._fullReader)==null?void 0:n.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return u(this,Cr).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of u(this,Rs).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),u(this,Cr).clear(),this.filterFactory.destroy(!0),Jd.cleanup()}}cachedPageNumber(e){if(!M0(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return u(this,Al).get(t)??null}}Cr=new WeakMap,Rs=new WeakMap,Sl=new WeakMap,Al=new WeakMap,Is=new WeakMap,ya=new WeakSet,El=function(i,e=null){const t=u(this,Cr).get(i);if(t)return t;const s=this.messageHandler.sendWithPromise(i,e);return u(this,Cr).set(i,s),s};const Ah=Symbol("INITIAL_DATA");var is,Eh,ug;class l1{constructor(){E(this,Eh),E(this,is,Object.create(null))}get(e,t=null){if(t){const r=A(this,Eh,ug).call(this,e);return r.promise.then(()=>t(r.data)),null}const s=u(this,is)[e];if(!s||s.data===Ah)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=u(this,is)[e];return!!t&&t.data!==Ah}resolve(e,t=null){const s=A(this,Eh,ug).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in u(this,is)){const{data:s}=u(this,is)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}x(this,is,Object.create(null))}*[Symbol.iterator](){for(const e in u(this,is)){const{data:t}=u(this,is)[e];t!==Ah&&(yield[e,t])}}}is=new WeakMap,Eh=new WeakSet,ug=function(i){var e;return(e=u(this,is))[i]||(e[i]={...Promise.withResolvers(),data:Ah})};var on;class wE{constructor(e){E(this,on,null),x(this,on,e),this.onContinue=null}get promise(){return u(this,on).capability.promise}cancel(e=0){u(this,on).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=u(this,on).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=u(this,on);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}on=new WeakMap;var ln,Ka;const u1=class Cl{constructor({callback:e,params:t,objs:s,commonObjs:r,annotationCanvasMap:n,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null}){E(this,ln,null),this.callback=e,this.params=t,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=n,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new wE(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var s,r;if(this.cancelled)return;if(this._canvas){if(u(Cl,Ka).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(Cl,Ka).add(this._canvas)}this._pdfBug&&(s=globalThis.StepperManager)!=null&&s.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:a,transform:o,background:l}=this.params;this.gfx=new ph(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:a,transparency:e,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,(r=this.graphicsReadyCallback)==null||r.call(this)}cancel(e=null,t=0){var s;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),u(this,ln)&&(window.cancelAnimationFrame(u(this,ln)),x(this,ln,null)),u(Cl,Ka).delete(this._canvas),this.callback(e||new zv(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?x(this,ln,window.requestAnimationFrame(()=>{x(this,ln,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(Cl,Ka).delete(this._canvas),this.callback())))}};ln=new WeakMap,Ka=new WeakMap,E(u1,Ka,new WeakSet);let _E=u1;const kE="4.4.168",xE="19fbc8998";function L0(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function Go(i){return Math.max(0,Math.min(255,255*i))}class P0{static CMYK_G([e,t,s,r]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Go(e),[e,e,e]}static G_HTML([e]){const t=L0(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(Go)}static RGB_HTML(e){return`#${e.map(L0).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,s+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,s,r]){return[Go(1-Math.min(1,e+r)),Go(1-Math.min(1,s+r)),Go(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const r=1-e,n=1-t,a=1-s,o=Math.min(r,n,a);return["CMYK",r,n,a,o]}}class c1{static setupStorage(e,t,s,r,n){const a=r.getValue(t,{value:null});switch(s.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),n==="print")break;e.addEventListener("input",o=>{r.setValue(t,{value:o.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(a.value===s.attributes.xfaOn?e.setAttribute("checked",!0):a.value===s.attributes.xfaOff&&e.removeAttribute("checked"),n==="print")break;e.addEventListener("change",o=>{r.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),n==="print")break;e.addEventListener("input",o=>{r.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of s.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const l=o.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;r.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:r,linkService:n}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${r}`);for(const[l,c]of Object.entries(a))if(c!=null)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!o||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,c)}o&&n.addLinkAttributes(e,a.href,a.newWindow),s&&a.dataId&&this.setupStorage(e,a.dataId,t,s)}static render(e){var t,s;const r=e.annotationStorage,n=e.linkService,a=e.xfaHtml,o=e.intent||"display",l=document.createElement(a.name);a.attributes&&this.setAttributes({html:l,element:a,intent:o,linkService:n});const c=o!=="richText",h=e.div;if(h.append(l),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;h.style.transform=p}c&&h.setAttribute("class","xfaLayer xfaFont");const d=[];if(a.children.length===0){if(a.value){const p=document.createTextNode(a.value);l.append(p),c&&Wu.shouldBuildText(a.name)&&d.push(p)}return{textDivs:d}}const f=[[a,-1,l]];for(;f.length>0;){const[p,v,m]=f.at(-1);if(v+1===p.children.length){f.pop();continue}const y=p.children[++f.at(-1)[1]];if(y===null)continue;const{name:g}=y;if(g==="#text"){const w=document.createTextNode(y.value);d.push(w),m.append(w);continue}const b=(t=y==null?void 0:y.attributes)!=null&&t.xmlns?document.createElementNS(y.attributes.xmlns,g):document.createElement(g);if(m.append(b),y.attributes&&this.setAttributes({html:b,element:y,storage:r,intent:o,linkService:n}),((s=y.children)==null?void 0:s.length)>0)f.push([y,-1,b]);else if(y.value){const w=document.createTextNode(y.value);c&&Wu.shouldBuildText(g)&&d.push(w),b.append(w)}}for(const p of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:d}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Ku=1e3,SE=9,qn=new WeakSet;function er(i){return{width:i[2]-i[0],height:i[3]-i[1]}}class AE{static create(e){switch(e.data.annotationType){case Je.LINK:return new p1(e);case Je.TEXT:return new CE(e);case Je.WIDGET:switch(e.data.fieldType){case"Tx":return new ME(e);case"Btn":return e.data.radioButton?new m1(e):e.data.checkBox?new PE(e):new RE(e);case"Ch":return new IE(e);case"Sig":return new LE(e)}return new Zn(e);case Je.POPUP:return new hg(e);case Je.FREETEXT:return new b1(e);case Je.LINE:return new NE(e);case Je.SQUARE:return new FE(e);case Je.CIRCLE:return new DE(e);case Je.POLYLINE:return new y1(e);case Je.CARET:return new zE(e);case Je.INK:return new w1(e);case Je.POLYGON:return new OE(e);case Je.HIGHLIGHT:return new WE(e);case Je.UNDERLINE:return new BE(e);case Je.SQUIGGLY:return new jE(e);case Je.STRIKEOUT:return new UE(e);case Je.STAMP:return new _1(e);case Je.FILEATTACHMENT:return new HE(e);default:return new nt(e)}}}var un,Ml,Ll,Ch,cg;const EE=class h1{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){E(this,Ch),E(this,un,null),E(this,Ml,!1),E(this,Ll,null),this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:s}){return!!(e!=null&&e.str||t!=null&&t.str||s!=null&&s.str)}get hasPopupData(){return h1._hasPopupData(this.data)}updateEdited(e){var t;if(!this.container)return;u(this,un)||x(this,un,{rect:this.data.rect.slice(0)});const{rect:s}=e;s&&A(this,Ch,cg).call(this,s),(t=u(this,Ll))==null||t.popup.updateEdited(e)}resetEdited(){var e;u(this,un)&&(A(this,Ch,cg).call(this,u(this,un).rect),(e=u(this,Ll))==null||e.popup.resetEdited(),x(this,un,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:r}}=this,n=document.createElement("section");n.setAttribute("data-annotation-id",t.id),this instanceof Zn||(n.tabIndex=Ku);const{style:a}=n;if(a.zIndex=this.parent.zIndex++,t.popupRef&&n.setAttribute("aria-haspopup","dialog"),t.alternativeText&&(n.title=t.alternativeText),t.noRotate&&n.classList.add("norotate"),!t.rect||this instanceof hg){const{rotation:m}=t;return!t.hasOwnCanvas&&m!==0&&this.setRotation(m,n),n}const{width:o,height:l}=er(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const m=t.borderStyle.horizontalCornerRadius,y=t.borderStyle.verticalCornerRadius;if(m>0||y>0){const b=`calc(${m}px * var(--scale-factor)) / calc(${y}px * var(--scale-factor))`;a.borderRadius=b}else if(this instanceof m1){const b=`calc(${o}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;a.borderRadius=b}switch(t.borderStyle.style){case Ho.SOLID:a.borderStyle="solid";break;case Ho.DASHED:a.borderStyle="dashed";break;case Ho.BEVELED:be("Unimplemented border style: beveled");break;case Ho.INSET:be("Unimplemented border style: inset");break;case Ho.UNDERLINE:a.borderBottomStyle="solid";break}const g=t.borderColor||null;g?(x(this,Ml,!0),a.borderColor=oe.makeHexColor(g[0]|0,g[1]|0,g[2]|0)):a.borderWidth=0}const c=oe.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:p}=r.rawDims;a.left=`${100*(c[0]-f)/h}%`,a.top=`${100*(c[1]-p)/d}%`;const{rotation:v}=t;return t.hasOwnCanvas||v===0?(a.width=`${100*o/h}%`,a.height=`${100*l/d}%`):this.setRotation(v,n),n}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims,{width:n,height:a}=er(this.data.rect);let o,l;e%180===0?(o=100*n/s,l=100*a/r):(o=100*a/s,l=100*n/r),t.style.width=`${o}%`,t.style.height=`${l}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,r)=>{const n=r.detail[t],a=n[0],o=n.slice(1);r.target.style[s]=P0[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[s]:P0[`${a}_rgb`](o)})};return Se(this,"_commonActions",{display:t=>{const{display:s}=t.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const r of Object.keys(t.detail)){const n=e[r]||s[r];n==null||n(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[r,n]of Object.entries(t)){const a=s[r];if(a){const o={detail:{[r]:n},target:e};a(o),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,r,n]=this.data.rect.map(m=>Math.fround(m));if(e.length===8){const[m,y,g,b]=e.subarray(2,6);if(r===m&&n===y&&t===g&&s===b)return}const{style:a}=this.container;let o;if(u(this,Ml)){const{borderColor:m,borderWidth:y}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${m}" stroke-width="${y}">`],this.container.classList.add("hasBorder")}const l=r-t,c=n-s,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=h.createElement("defs");d.append(f);const p=h.createElement("clipPath"),v=`clippath_${this.data.id}`;p.setAttribute("id",v),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let m=2,y=e.length;m<y;m+=8){const g=e[m],b=e[m+1],w=e[m+2],S=e[m+3],C=h.createElement("rect"),I=(w-t)/l,P=(n-b)/c,N=(g-w)/l,F=(b-S)/c;C.setAttribute("x",I),C.setAttribute("y",P),C.setAttribute("width",N),C.setAttribute("height",F),p.append(C),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${I}" y="${P}" width="${N}" height="${F}"/>`)}u(this,Ml)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(d),this.container.style.clipPath=`url(#${v})`}_createPopup(){const{container:e,data:t}=this;e.setAttribute("aria-haspopup","dialog");const s=x(this,Ll,new hg({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(s.render())}render(){Le("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:n,id:a,exportValues:o}of r){if(n===-1||a===t)continue;const l=typeof o=="string"?o:null,c=document.querySelector(`[data-element-id="${a}"]`);if(c&&!qn.has(c)){be(`_getElementsByName - element not allowed: ${a}`);continue}s.push({id:a,exportValue:l,domElement:c})}return s}for(const r of document.getElementsByName(e)){const{exportValue:n}=r,a=r.getAttribute("data-element-id");a!==t&&qn.has(r)&&s.push({id:a,exportValue:n,domElement:r})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};un=new WeakMap,Ml=new WeakMap,Ll=new WeakMap,Ch=new WeakSet,cg=function(i){const{container:{style:e},data:{rect:t,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:n,pageX:a,pageY:o}}}}=this;t==null||t.splice(0,4,...i);const{width:l,height:c}=er(i);e.left=`${100*(i[0]-a)/r}%`,e.top=`${100*(n-i[3]+o)/n}%`,s===0?(e.width=`${100*l/r}%`,e.height=`${100*c/n}%`):this.setRotation(s)};let nt=EE;var us,Nn,d1,f1;class p1 extends nt{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!(t!=null&&t.ignoreBorder),createQuadrilaterals:!0}),E(this,us),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let r=!1;return e.url?(t.addLinkAttributes(s,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(s,e.action),r=!0):e.attachment?(A(this,us,d1).call(this,s,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(A(this,us,f1).call(this,s,e.setOCGState),r=!0):e.dest?(this._bindLink(s,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),r=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&A(this,us,Nn).call(this)}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),A(this,us,Nn).call(this)}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(t.actions)){const n=s.get(r);n&&(e[n]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),A(this,us,Nn).call(this)}_bindResetFormAction(e,t){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),A(this,us,Nn).call(this),!this._fieldObjects){be('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{var r;s==null||s();const{fields:n,refs:a,include:o}=t,l=[];if(n.length!==0||a.length!==0){const d=new Set(a);for(const f of n){const p=this._fieldObjects[f]||[];for(const{id:v}of p)d.add(v)}for(const f of Object.values(this._fieldObjects))for(const p of f)d.has(p.id)===o&&l.push(p)}else for(const d of Object.values(this._fieldObjects))l.push(...d);const c=this.annotationStorage,h=[];for(const d of l){const{id:f}=d;switch(h.push(f),d.type){case"text":{const v=d.defaultValue||"";c.setValue(f,{value:v});break}case"checkbox":case"radiobutton":{const v=d.defaultValue===d.exportValues;c.setValue(f,{value:v});break}case"combobox":case"listbox":{const v=d.defaultValue||"";c.setValue(f,{value:v});break}default:continue}const p=document.querySelector(`[data-element-id="${f}"]`);if(p){if(!qn.has(p)){be(`_bindResetFormAction - element not allowed: ${f}`);continue}}else continue;p.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((r=this.linkService.eventBus)==null||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}us=new WeakSet,Nn=function(){this.container.setAttribute("data-internal-link","")},d1=function(i,e,t=null){i.href=this.linkService.getAnchorUrl(""),e.description&&(i.title=e.description),i.onclick=()=>{var s;return(s=this.downloadManager)==null||s.openOrDownloadData(e.content,e.filename,t),!1},A(this,us,Nn).call(this)},f1=function(i,e){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>(this.linkService.executeSetOCGState(e),!1),A(this,us,Nn).call(this)};class CE extends nt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Zn extends nt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Jt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,r,n){s.includes("mouse")?e.addEventListener(s,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:n(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(s,a=>{var o;if(s==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}n&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:n(a)}}))})}_setEventListeners(e,t,s,r){var n,a,o;for(const[l,c]of s)(c==="Action"||(n=this.data.actions)!=null&&n[c])&&((c==="Focus"||c==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,c,r),c==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):c==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":oe.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||SE,n=e.style;let a;const o=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-o),h=Math.round(c/(yp*r))||1,d=c/h;a=Math.min(r,l(d/yp))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(r,l(c/yp))}n.fontSize=`calc(${a}px * var(--scale-factor))`,n.color=oe.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(n.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class ME extends Zn{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,r){const n=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=s),n.setValue(a.id,{[r]:s})}render(){var e,t;const s=this.annotationStorage,r=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=s.getValue(r,{value:this.data.fieldValue});let o=a.value||"";const l=s.getValue(r,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let c=a.formattedValue||((e=this.data.textContent)==null?void 0:e.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const h={userValue:o,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=c??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",c??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),qn.add(n),n.setAttribute("data-element-id",r),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Ku,this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",f=>{s.setValue(r,{value:f.target.value}),this.setPropertyOnSiblings(n,"value",f.target.value,"value"),h.formattedValue=null}),n.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue??"";n.value=h.userValue=p,h.formattedValue=null});let d=f=>{const{formattedValue:p}=h;p!=null&&(f.target.value=p),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",p=>{var v;if(h.focused)return;const{target:m}=p;h.userValue&&(m.value=h.userValue),h.lastCommittedValue=m.value,h.commitKey=1,(v=this.data.actions)!=null&&v.Focus||(h.focused=!0)}),n.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const v={value(m){h.userValue=m.detail.value??"",s.setValue(r,{value:h.userValue.toString()}),m.target.value=h.userValue},formattedValue(m){const{formattedValue:y}=m.detail;h.formattedValue=y,y!=null&&m.target!==document.activeElement&&(m.target.value=y),s.setValue(r,{formattedValue:y})},selRange(m){m.target.setSelectionRange(...m.detail.selRange)},charLimit:m=>{var y;const{charLimit:g}=m.detail,{target:b}=m;if(g===0){b.removeAttribute("maxLength");return}b.setAttribute("maxLength",g);let w=h.userValue;!w||w.length<=g||(w=w.slice(0,g),b.value=h.userValue=w,s.setValue(r,{value:w}),(y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:w,willCommit:!0,commitKey:1,selStart:b.selectionStart,selEnd:b.selectionEnd}}))}};this._dispatchEventFromSandbox(v,p)}),n.addEventListener("keydown",p=>{var v;h.commitKey=1;let m=-1;if(p.key==="Escape"?m=0:p.key==="Enter"&&!this.data.multiLine?m=2:p.key==="Tab"&&(h.commitKey=3),m===-1)return;const{value:y}=p.target;h.lastCommittedValue!==y&&(h.lastCommittedValue=y,h.userValue=y,(v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:y,willCommit:!0,commitKey:m,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const f=d;d=null,n.addEventListener("blur",p=>{var v,m;if(!h.focused||!p.relatedTarget)return;(v=this.data.actions)!=null&&v.Blur||(h.focused=!1);const{value:y}=p.target;h.userValue=y,h.lastCommittedValue!==y&&((m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:y,willCommit:!0,commitKey:h.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}})),f(p)}),(t=this.data.actions)!=null&&t.Keystroke&&n.addEventListener("beforeinput",p=>{var v;h.lastCommittedValue=null;const{data:m,target:y}=p,{value:g,selectionStart:b,selectionEnd:w}=y;let S=b,C=w;switch(p.inputType){case"deleteWordBackward":{const I=g.substring(0,b).match(/\w*[^\w]*$/);I&&(S-=I[0].length);break}case"deleteWordForward":{const I=g.substring(b).match(/^[^\w]*\w*/);I&&(C+=I[0].length);break}case"deleteContentBackward":b===w&&(S-=1);break;case"deleteContentForward":b===w&&(C+=1);break}p.preventDefault(),(v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:g,change:m||"",willCommit:!1,selStart:S,selEnd:C}})}),this._setEventListeners(n,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(d&&n.addEventListener("blur",d),this.data.comb){const f=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${f}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class LE extends Zn{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class PE extends Zn{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const n=document.createElement("input");return qn.add(n),n.setAttribute("data-element-id",s),n.disabled=t.readOnly,this._setRequired(n,this.data.required),n.type="checkbox",n.name=t.fieldName,r&&n.setAttribute("checked",!0),n.setAttribute("exportValue",t.exportValue),n.tabIndex=Ku,n.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const c of this._getElementsByName(o,s)){const h=l&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=h),e.setValue(c.id,{value:h})}e.setValue(s,{value:l})}),n.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(n.addEventListener("updatefromsandbox",a=>{const o={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(s,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(n,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class m1 extends Zn{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(s,{value:r})),r)for(const a of this._getElementsByName(t.fieldName,s))e.setValue(a.id,{value:!1});const n=document.createElement("input");if(qn.add(n),n.setAttribute("data-element-id",s),n.disabled=t.readOnly,this._setRequired(n,this.data.required),n.type="radio",n.name=t.fieldName,r&&n.setAttribute("checked",!0),n.tabIndex=Ku,n.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const c of this._getElementsByName(o,s))e.setValue(c.id,{value:!1});e.setValue(s,{value:l})}),n.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;n.addEventListener("updatefromsandbox",o=>{const l={value:c=>{const h=a===c.detail.value;for(const d of this._getElementsByName(c.target.name)){const f=h&&d.id===s;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(n,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class RE extends p1{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class IE extends Zn{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");qn.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=Ku;let n=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of r.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,s.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),n=!1),r.append(d)}let a=null;if(n){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),r.prepend(h),a=()=>{h.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}const o=h=>{const d=h?"value":"textContent",{options:f,multiple:p}=r;return p?Array.prototype.filter.call(f,v=>v.selected).map(v=>v[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let l=o(!1);const c=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",h=>{const d={value(f){a==null||a();const p=f.detail.value,v=new Set(Array.isArray(p)?p:[p]);for(const m of r.options)m.selected=v.has(m.value);e.setValue(t,{value:o(!0)}),l=o(!1)},multipleSelection(f){r.multiple=!0},remove(f){const p=r.options,v=f.detail.remove;p[v].selected=!1,r.remove(v),p.length>0&&Array.prototype.findIndex.call(p,m=>m.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:o(!0),items:c(f)}),l=o(!1)},clear(f){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),l=o(!1)},insert(f){const{index:p,displayValue:v,exportValue:m}=f.detail.insert,y=r.children[p],g=document.createElement("option");g.textContent=v,g.value=m,y?y.before(g):r.append(g),e.setValue(t,{value:o(!0),items:c(f)}),l=o(!1)},items(f){const{items:p}=f.detail;for(;r.length!==0;)r.remove(0);for(const v of p){const{displayValue:m,exportValue:y}=v,g=document.createElement("option");g.textContent=m,g.value=y,r.append(g)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:o(!0),items:c(f)}),l=o(!1)},indices(f){const p=new Set(f.detail.indices);for(const v of f.target.options)v.selected=p.has(v.index);e.setValue(t,{value:o(!0)}),l=o(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),r.addEventListener("input",h=>{var d;const f=o(!0),p=o(!1);e.setValue(t,{value:f}),h.preventDefault(),(d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:p,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):r.addEventListener("input",function(h){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class hg extends nt{constructor(e){const{data:t,elements:s}=e;super(e,{isRenderable:nt._hasPopupData(t)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new TE({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const s of this.elements)s.popup=e,t.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(s=>`${c_}${s}`).join(",")),this.container}}var uu,dg,fg,cu,wa,Ke,br,_a,tf,sf,hu,lr,ss,Mr,rf,Lr,Mh,cn,ka,tt,Lh,Mp,R0,g1,v1,I0,nf,af,pg;class TE{constructor({container:e,color:t,elements:s,titleObj:r,modificationDate:n,contentsObj:a,richText:o,parent:l,rect:c,parentRect:h,open:d}){E(this,tt),E(this,uu,A(this,tt,v1).bind(this)),E(this,dg,A(this,tt,pg).bind(this)),E(this,fg,A(this,tt,af).bind(this)),E(this,cu,A(this,tt,nf).bind(this)),E(this,wa,null),E(this,Ke,null),E(this,br,null),E(this,_a,null),E(this,tf,null),E(this,sf,null),E(this,hu,null),E(this,lr,!1),E(this,ss,null),E(this,Mr,null),E(this,rf,null),E(this,Lr,null),E(this,Mh,null),E(this,cn,null),E(this,ka,!1);var f;x(this,Ke,e),x(this,Mh,r),x(this,br,a),x(this,Lr,o),x(this,sf,l),x(this,wa,t),x(this,rf,c),x(this,hu,h),x(this,tf,s),x(this,_a,v_.toDateObject(n)),this.trigger=s.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",u(this,cu)),p.addEventListener("mouseenter",u(this,fg)),p.addEventListener("mouseleave",u(this,dg)),p.classList.add("popupTriggerArea");for(const p of s)(f=p.container)==null||f.addEventListener("keydown",u(this,uu));u(this,Ke).hidden=!0,d&&A(this,tt,nf).call(this)}render(){if(u(this,ss))return;const e=x(this,ss,document.createElement("div"));if(e.className="popup",u(this,wa)){const n=e.style.outlineColor=oe.makeHexColor(...u(this,wa));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${n} 30%, white)`:e.style.backgroundColor=oe.makeHexColor(...u(this,wa).map(a=>Math.floor(.7*(255-a)+a)))}const t=document.createElement("span");t.className="header";const s=document.createElement("h1");if(t.append(s),{dir:s.dir,str:s.textContent}=u(this,Mh),e.append(t),u(this,_a)){const n=document.createElement("span");n.classList.add("popupDate"),n.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),n.setAttribute("data-l10n-args",JSON.stringify({date:u(this,_a).toLocaleDateString(),time:u(this,_a).toLocaleTimeString()})),t.append(n)}const r=u(this,tt,Lh);if(r)c1.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const n=this._formatContents(u(this,br));e.append(n)}u(this,Ke).append(e)}_formatContents({str:e,dir:t}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let n=0,a=r.length;n<a;++n){const o=r[n];s.append(document.createTextNode(o)),n<a-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:e,popupContent:t}){var s;u(this,cn)||x(this,cn,{contentsObj:u(this,br),richText:u(this,Lr)}),e&&x(this,Mr,null),t&&(x(this,Lr,A(this,tt,g1).call(this,t)),x(this,br,null)),(s=u(this,ss))==null||s.remove(),x(this,ss,null)}resetEdited(){var e;u(this,cn)&&({contentsObj:Mi(this,br)._,richText:Mi(this,Lr)._}=u(this,cn),x(this,cn,null),(e=u(this,ss))==null||e.remove(),x(this,ss,null),x(this,Mr,null))}forceHide(){x(this,ka,this.isVisible),u(this,ka)&&(u(this,Ke).hidden=!0)}maybeShow(){u(this,ka)&&(u(this,ss)||A(this,tt,af).call(this),x(this,ka,!1),u(this,Ke).hidden=!1)}get isVisible(){return u(this,Ke).hidden===!1}}uu=new WeakMap,dg=new WeakMap,fg=new WeakMap,cu=new WeakMap,wa=new WeakMap,Ke=new WeakMap,br=new WeakMap,_a=new WeakMap,tf=new WeakMap,sf=new WeakMap,hu=new WeakMap,lr=new WeakMap,ss=new WeakMap,Mr=new WeakMap,rf=new WeakMap,Lr=new WeakMap,Mh=new WeakMap,cn=new WeakMap,ka=new WeakMap,tt=new WeakSet,Lh=function(){const i=u(this,Lr),e=u(this,br);return i!=null&&i.str&&(!(e!=null&&e.str)||e.str===i.str)&&u(this,Lr).html||null},Mp=function(){var i,e,t;return((t=(e=(i=u(this,tt,Lh))==null?void 0:i.attributes)==null?void 0:e.style)==null?void 0:t.fontSize)||0},R0=function(){var i,e,t;return((t=(e=(i=u(this,tt,Lh))==null?void 0:i.attributes)==null?void 0:e.style)==null?void 0:t.color)||null},g1=function(i){const e=[],t={str:i,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:u(this,tt,R0),fontSize:u(this,tt,Mp)?`calc(${u(this,tt,Mp)}px * var(--scale-factor))`:""}};for(const r of i.split(`
`))e.push({name:"span",value:r,attributes:s});return t},v1=function(i){i.altKey||i.shiftKey||i.ctrlKey||i.metaKey||(i.key==="Enter"||i.key==="Escape"&&u(this,lr))&&A(this,tt,nf).call(this)},I0=function(){if(u(this,Mr)!==null)return;const{page:{view:i},viewport:{rawDims:{pageWidth:e,pageHeight:t,pageX:s,pageY:r}}}=u(this,sf);let n=!!u(this,hu),a=n?u(this,hu):u(this,rf);for(const f of u(this,tf))if(!a||oe.intersect(f.data.rect,a)!==null){a=f.data.rect,n=!0;break}const o=oe.normalizeRect([a[0],i[3]-a[1]+i[1],a[2],i[3]-a[3]+i[1]]),l=n?a[2]-a[0]+5:0,c=o[0]+l,h=o[1];x(this,Mr,[100*(c-s)/e,100*(h-r)/t]);const{style:d}=u(this,Ke);d.left=`${u(this,Mr)[0]}%`,d.top=`${u(this,Mr)[1]}%`},nf=function(){x(this,lr,!u(this,lr)),u(this,lr)?(A(this,tt,af).call(this),u(this,Ke).addEventListener("click",u(this,cu)),u(this,Ke).addEventListener("keydown",u(this,uu))):(A(this,tt,pg).call(this),u(this,Ke).removeEventListener("click",u(this,cu)),u(this,Ke).removeEventListener("keydown",u(this,uu)))},af=function(){u(this,ss)||this.render(),this.isVisible?u(this,lr)&&u(this,Ke).classList.add("focused"):(A(this,tt,I0).call(this),u(this,Ke).hidden=!1,u(this,Ke).style.zIndex=parseInt(u(this,Ke).style.zIndex)+1e3)},pg=function(){u(this,Ke).classList.remove("focused"),!(u(this,lr)||!this.isVisible)&&(u(this,Ke).hidden=!0,u(this,Ke).style.zIndex=parseInt(u(this,Ke).style.zIndex)-1e3)};class b1 extends nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=xe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var Ph;class NE extends nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),E(this,Ph,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:t,height:s}=er(e.rect),r=this.svgFactory.create(t,s,!0),n=x(this,Ph,this.svgFactory.createElement("svg:line"));return n.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),n.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),n.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),n.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),n.setAttribute("stroke-width",e.borderStyle.width||1),n.setAttribute("stroke","transparent"),n.setAttribute("fill","transparent"),r.append(n),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Ph)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ph=new WeakMap;var Rh;class FE extends nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),E(this,Rh,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:t,height:s}=er(e.rect),r=this.svgFactory.create(t,s,!0),n=e.borderStyle.width,a=x(this,Rh,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",n/2),a.setAttribute("y",n/2),a.setAttribute("width",t-n),a.setAttribute("height",s-n),a.setAttribute("stroke-width",n||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Rh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rh=new WeakMap;var Ih;class DE extends nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),E(this,Ih,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:t,height:s}=er(e.rect),r=this.svgFactory.create(t,s,!0),n=e.borderStyle.width,a=x(this,Ih,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",t/2),a.setAttribute("cy",s/2),a.setAttribute("rx",t/2-n/2),a.setAttribute("ry",s/2-n/2),a.setAttribute("stroke-width",n||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Ih)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ih=new WeakMap;var Th;class y1 extends nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),E(this,Th,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:s,popupRef:r}}=this;if(!t)return this.container;const{width:n,height:a}=er(e),o=this.svgFactory.create(n,a,!0);let l=[];for(let h=0,d=t.length;h<d;h+=2){const f=t[h]-e[0],p=e[3]-t[h+1];l.push(`${f},${p}`)}l=l.join(" ");const c=x(this,Th,this.svgFactory.createElement(this.svgElementName));return c.setAttribute("points",l),c.setAttribute("stroke-width",s.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Th)}addHighlightArea(){this.container.classList.add("highlightArea")}}Th=new WeakMap;class OE extends y1{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class zE extends nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Nh;class w1 extends nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),E(this,Nh,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=xe.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:t,borderStyle:s,popupRef:r}}=this,{width:n,height:a}=er(e),o=this.svgFactory.create(n,a,!0);for(const l of t){let c=[];for(let d=0,f=l.length;d<f;d+=2){const p=l[d]-e[0],v=e[3]-l[d+1];c.push(`${p},${v}`)}c=c.join(" ");const h=this.svgFactory.createElement(this.svgElementName);u(this,Nh).push(h),h.setAttribute("points",c),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),!r&&this.hasPopupData&&this._createPopup(),o.append(h)}return this.container.append(o),this.container}getElementsToTriggerPopup(){return u(this,Nh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Nh=new WeakMap;class WE extends nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class BE extends nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class jE extends nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class UE extends nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class _1 extends nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Fh,Dh,mg;class HE extends nt{constructor(e){var t;super(e,{isRenderable:!0}),E(this,Dh),E(this,Fh,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(t=this.linkService.eventBus)==null||t.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let s;t.hasAppearance||t.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),s.addEventListener("dblclick",A(this,Dh,mg).bind(this)),x(this,Fh,s);const{isMac:r}=Jt.platform;return e.addEventListener("keydown",n=>{n.key==="Enter"&&(r?n.metaKey:n.ctrlKey)&&A(this,Dh,mg).call(this)}),!t.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return u(this,Fh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Fh=new WeakMap,Dh=new WeakSet,mg=function(){var i;(i=this.downloadManager)==null||i.openOrDownloadData(this.content,this.filename)};var of,Xa,Pl,Rl,k1,gg;class $E{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:r,page:n,viewport:a}){E(this,Rl),E(this,of,null),E(this,Xa,null),E(this,Pl,new Map),this.div=e,x(this,of,t),x(this,Xa,s),this.page=n,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r}async render(e){var t;const{annotations:s}=e,r=this.div;Gn(r,this.viewport);const n=new Map,a={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Ov,annotationStorage:e.annotationStorage||new Uv,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of s){if(o.noHTML)continue;const l=o.annotationType===Je.POPUP;if(l){const d=n.get(o.id);if(!d)continue;a.elements=d}else{const{width:d,height:f}=er(o.rect);if(d<=0||f<=0)continue}a.data=o;const c=AE.create(a);if(!c.isRenderable)continue;if(!l&&o.popupRef){const d=n.get(o.popupRef);d?d.push(c):n.set(o.popupRef,[c])}const h=c.render();o.hidden&&(h.style.visibility="hidden"),A(this,Rl,k1).call(this,h,o.id),c.annotationEditorType>0&&(u(this,Pl).set(c.data.id,c),(t=this._annotationEditorUIManager)==null||t.renderAnnotationElement(c))}A(this,Rl,gg).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Gn(t,{rotation:e.rotation}),A(this,Rl,gg).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(u(this,Pl).values())}getEditableAnnotation(e){return u(this,Pl).get(e)}}of=new WeakMap,Xa=new WeakMap,Pl=new WeakMap,Rl=new WeakSet,k1=function(i,e){var t;const s=i.firstChild||i;s.id=`${c_}${e}`,this.div.append(i),(t=u(this,of))==null||t.moveElementInDOM(this.div,i,s,!1)},gg=function(){if(!u(this,Xa))return;const i=this.div;for(const[e,t]of u(this,Xa)){const s=i.querySelector(`[data-annotation-id="${e}"]`);if(!s)continue;t.className="annotationContent";const{firstChild:r}=s;r?r.nodeName==="CANVAS"?r.replaceWith(t):r.classList.contains("annotationContent")?r.after(t):r.before(t):s.append(t)}u(this,Xa).clear()};const Oh=/\r\n?|\n/g;var zh,Wh,Bh,jh,Uh,cs,_i,Hh,ki,du,ii,x1,S1,A1,lf,Fn,uf,$h,E1,vg,C1;const Ts=class mt extends Re{constructor(e){super({...e,name:"freeTextEditor"}),E(this,ii),E(this,zh,this.editorDivBlur.bind(this)),E(this,Wh,this.editorDivFocus.bind(this)),E(this,Bh,this.editorDivInput.bind(this)),E(this,jh,this.editorDivKeydown.bind(this)),E(this,Uh,this.editorDivPaste.bind(this)),E(this,cs),E(this,_i,""),E(this,Hh,`${this.id}-editor`),E(this,ki),E(this,du,null),x(this,cs,e.color||mt._defaultColor||Re._defaultLineColor),x(this,ki,e.fontSize||mt._defaultFontSize)}static get _keyboardManager(){const e=mt.prototype,t=n=>n.isEmpty(),s=zu.TRANSLATE_SMALL,r=zu.TRANSLATE_BIG;return Se(this,"_keyboardManager",new Gu([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}]]))}static initialize(e,t){Re.initialize(e,t,{strings:["pdfjs-free-text-default-content"]});const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case me.FREETEXT_SIZE:mt._defaultFontSize=t;break;case me.FREETEXT_COLOR:mt._defaultColor=t;break}}updateParams(e,t){switch(e){case me.FREETEXT_SIZE:A(this,ii,x1).call(this,t);break;case me.FREETEXT_COLOR:A(this,ii,S1).call(this,t);break}}static get defaultPropertiesToUpdate(){return[[me.FREETEXT_SIZE,mt._defaultFontSize],[me.FREETEXT_COLOR,mt._defaultColor||Re._defaultLineColor]]}get propertiesToUpdate(){return[[me.FREETEXT_SIZE,u(this,ki)],[me.FREETEXT_COLOR,u(this,cs)]]}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-mt._internalPadding*e,-(mt._internalPadding+u(this,ki))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(xe.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant");const e=this._uiManager._signal;this.editorDiv.addEventListener("keydown",u(this,jh),{signal:e}),this.editorDiv.addEventListener("focus",u(this,Wh),{signal:e}),this.editorDiv.addEventListener("blur",u(this,zh),{signal:e}),this.editorDiv.addEventListener("input",u(this,Bh),{signal:e}),this.editorDiv.addEventListener("paste",u(this,Uh),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,Hh)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",u(this,jh)),this.editorDiv.removeEventListener("focus",u(this,Wh)),this.editorDiv.removeEventListener("blur",u(this,zh)),this.editorDiv.removeEventListener("input",u(this,Bh)),this.editorDiv.removeEventListener("paste",u(this,Uh)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),(e=this._initialOptions)!=null&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=u(this,_i),t=x(this,_i,A(this,ii,A1).call(this).trimEnd());if(e===t)return;const s=r=>{if(x(this,_i,r),!r){this.remove();return}A(this,ii,$h).call(this),this._uiManager.rebuild(this),A(this,ii,lf).call(this)};this.addCommands({cmd:()=>{s(t)},undo:()=>{s(e)},mustExec:!1}),A(this,ii,lf).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){mt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,Hh)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),Re._l10nPromise.get("pdfjs-free-text-default-content").then(r=>{var n;return(n=this.editorDiv)==null?void 0:n.setAttribute("default-content",r)}),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${u(this,ki)}px * var(--scale-factor))`,s.color=u(this,cs),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Od(this,this.div,["dblclick","keydown"]),this.width){const[r,n]=this.parentDimensions;if(this.annotationElementId){const{position:a}=u(this,du);let[o,l]=this.getInitialTranslation();[o,l]=this.pageTranslationToScreen(o,l);const[c,h]=this.pageDimensions,[d,f]=this.pageTranslation;let p,v;switch(this.rotation){case 0:p=e+(a[0]-d)/c,v=t+this.height-(a[1]-f)/h;break;case 90:p=e+(a[0]-d)/c,v=t-(a[1]-f)/h,[o,l]=[l,-o];break;case 180:p=e-this.width+(a[0]-d)/c,v=t-(a[1]-f)/h,[o,l]=[-o,-l];break;case 270:p=e+(a[0]-d-this.height*h)/c,v=t+(a[1]-f-this.width*c)/h,[o,l]=[-l,o];break}this.setAt(p*r,v*n,o,l)}else this.setAt(e*r,t*n,this.width*r,this.height*n);A(this,ii,$h).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var t,s,r;const n=e.clipboardData||window.clipboardData,{types:a}=n;if(a.length===1&&a[0]==="text/plain")return;e.preventDefault();const o=A(t=mt,Fn,vg).call(t,n.getData("text")||"").replaceAll(Oh,`
`);if(!o)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const c=l.getRangeAt(0);if(!o.includes(`
`)){c.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:h,startOffset:d}=c,f=[],p=[];if(h.nodeType===Node.TEXT_NODE){const y=h.parentElement;if(p.push(h.nodeValue.slice(d).replaceAll(Oh,"")),y!==this.editorDiv){let g=f;for(const b of this.editorDiv.childNodes){if(b===y){g=p;continue}g.push(A(s=mt,Fn,uf).call(s,b))}}f.push(h.nodeValue.slice(0,d).replaceAll(Oh,""))}else if(h===this.editorDiv){let y=f,g=0;for(const b of this.editorDiv.childNodes)g++===d&&(y=p),y.push(A(r=mt,Fn,uf).call(r,b))}x(this,_i,`${f.join(`
`)}${o}${p.join(`
`)}`),A(this,ii,$h).call(this);const v=new Range;let m=f.reduce((y,g)=>y+g.length,0);for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const g=y.nodeValue.length;if(m<=g){v.setStart(y,m),v.setEnd(y,m);break}m-=g}l.removeAllRanges(),l.addRange(v)}get contentDiv(){return this.editorDiv}static deserialize(e,t,s){var r;let n=null;if(e instanceof b1){const{data:{defaultAppearanceData:{fontSize:o,fontColor:l},rect:c,rotation:h,id:d},textContent:f,textPosition:p,parent:{page:{pageNumber:v}}}=e;if(!f||f.length===0)return null;n=e={annotationType:xe.FREETEXT,color:Array.from(l),fontSize:o,value:f.join(`
`),position:p,pageIndex:v-1,rect:c.slice(0),rotation:h,id:d,deleted:!1}}const a=super.deserialize(e,t,s);return x(a,ki,e.fontSize),x(a,cs,oe.makeHexColor(...e.color)),x(a,_i,A(r=mt,Fn,vg).call(r,e.value)),a.annotationElementId=e.id||null,x(a,du,n),a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const t=mt._internalPadding*this.parentScale,s=this.getRect(t,t),r=Re._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:u(this,cs)),n={annotationType:xe.FREETEXT,color:r,fontSize:u(this,ki),value:A(this,ii,E1).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?n:this.annotationElementId&&!A(this,ii,C1).call(this,n)?null:(n.id=this.annotationElementId,n)}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:s}=t;s.fontSize=`calc(${u(this,ki)}px * var(--scale-factor))`,s.color=u(this,cs),t.replaceChildren();for(const n of u(this,_i).split(`
`)){const a=document.createElement("div");a.append(n?document.createTextNode(n):document.createElement("br")),t.append(a)}const r=mt._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:u(this,_i)}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};zh=new WeakMap,Wh=new WeakMap,Bh=new WeakMap,jh=new WeakMap,Uh=new WeakMap,cs=new WeakMap,_i=new WeakMap,Hh=new WeakMap,ki=new WeakMap,du=new WeakMap,ii=new WeakSet,x1=function(i){const e=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--scale-factor))`,this.translate(0,-(s-u(this,ki))*this.parentScale),x(this,ki,s),A(this,ii,lf).call(this)},t=u(this,ki);this.addCommands({cmd:e.bind(this,i),undo:e.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:me.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},S1=function(i){const e=s=>{x(this,cs,this.editorDiv.style.color=s)},t=u(this,cs);this.addCommands({cmd:e.bind(this,i),undo:e.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:me.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},A1=function(){var i;const e=[];this.editorDiv.normalize();for(const t of this.editorDiv.childNodes)e.push(A(i=Ts,Fn,uf).call(i,t));return e.join(`
`)},lf=function(){const[i,e]=this.parentDimensions;let t;if(this.isAttachedToDOM)t=this.div.getBoundingClientRect();else{const{currentLayer:s,div:r}=this,n=r.style.display,a=r.classList.contains("hidden");r.classList.remove("hidden"),r.style.display="hidden",s.div.append(this.div),t=r.getBoundingClientRect(),r.remove(),r.style.display=n,r.classList.toggle("hidden",a)}this.rotation%180===this.parentRotation%180?(this.width=t.width/i,this.height=t.height/e):(this.width=t.height/i,this.height=t.width/e),this.fixAndSetPosition()},Fn=new WeakSet,uf=function(i){return(i.nodeType===Node.TEXT_NODE?i.nodeValue:i.innerText).replaceAll(Oh,"")},$h=function(){if(this.editorDiv.replaceChildren(),!!u(this,_i))for(const i of u(this,_i).split(`
`)){const e=document.createElement("div");e.append(i?document.createTextNode(i):document.createElement("br")),this.editorDiv.append(e)}},E1=function(){return u(this,_i).replaceAll(""," ")},vg=function(i){return i.replaceAll(" ","")},C1=function(i){const{value:e,fontSize:t,color:s,pageIndex:r}=u(this,du);return this._hasBeenMoved||i.value!==e||i.fontSize!==t||i.color.some((n,a)=>n!==s[a])||i.pageIndex!==r},E(Ts,Fn),ge(Ts,"_freeTextDefaultContent",""),ge(Ts,"_internalPadding",0),ge(Ts,"_defaultColor",null),ge(Ts,"_defaultFontSize",10),ge(Ts,"_type","freetext"),ge(Ts,"_editorType",xe.FREETEXT);let VE=Ts;var cf,hn,Ji,ds,M1,kc,L1,P1,bg;class yg{constructor(e,t=0,s=0,r=!0){E(this,ds),E(this,cf),E(this,hn,[]),E(this,Ji,[]);let n=1/0,a=-1/0,o=1/0,l=-1/0;const c=10**-4;for(const{x:y,y:g,width:b,height:w}of e){const S=Math.floor((y-t)/c)*c,C=Math.ceil((y+b+t)/c)*c,I=Math.floor((g-t)/c)*c,P=Math.ceil((g+w+t)/c)*c,N=[S,I,P,!0],F=[C,I,P,!1];u(this,hn).push(N,F),n=Math.min(n,S),a=Math.max(a,C),o=Math.min(o,I),l=Math.max(l,P)}const h=a-n+2*s,d=l-o+2*s,f=n-s,p=o-s,v=u(this,hn).at(r?-1:-2),m=[v[0],v[2]];for(const y of u(this,hn)){const[g,b,w]=y;y[0]=(g-f)/h,y[1]=(b-p)/d,y[2]=(w-p)/d}x(this,cf,{x:f,y:p,width:h,height:d,lastPoint:m})}getOutlines(){u(this,hn).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of u(this,hn))t[3]?(e.push(...A(this,ds,bg).call(this,t)),A(this,ds,L1).call(this,t)):(A(this,ds,P1).call(this,t),e.push(...A(this,ds,bg).call(this,t)));return A(this,ds,M1).call(this,e)}}cf=new WeakMap,hn=new WeakMap,Ji=new WeakMap,ds=new WeakSet,M1=function(i){const e=[],t=new Set;for(const n of i){const[a,o,l]=n;e.push([a,o,n],[a,l,n])}e.sort((n,a)=>n[1]-a[1]||n[0]-a[0]);for(let n=0,a=e.length;n<a;n+=2){const o=e[n][2],l=e[n+1][2];o.push(l),l.push(o),t.add(o),t.add(l)}const s=[];let r;for(;t.size>0;){const n=t.values().next().value;let[a,o,l,c,h]=n;t.delete(n);let d=a,f=o;for(r=[a,l],s.push(r);;){let p;if(t.has(c))p=c;else if(t.has(h))p=h;else break;t.delete(p),[a,o,l,c,h]=p,d!==a&&(r.push(d,f,a,f===o?o:l),d=a),f=f===o?l:o}r.push(d,f)}return new GE(s,u(this,cf))},kc=function(i){const e=u(this,Ji);let t=0,s=e.length-1;for(;t<=s;){const r=t+s>>1,n=e[r][0];if(n===i)return r;n<i?t=r+1:s=r-1}return s+1},L1=function([,i,e]){const t=A(this,ds,kc).call(this,i);u(this,Ji).splice(t,0,[i,e])},P1=function([,i,e]){const t=A(this,ds,kc).call(this,i);for(let s=t;s<u(this,Ji).length;s++){const[r,n]=u(this,Ji)[s];if(r!==i)break;if(r===i&&n===e){u(this,Ji).splice(s,1);return}}for(let s=t-1;s>=0;s--){const[r,n]=u(this,Ji)[s];if(r!==i)break;if(r===i&&n===e){u(this,Ji).splice(s,1);return}}},bg=function(i){const[e,t,s]=i,r=[[e,t,s]],n=A(this,ds,kc).call(this,s);for(let a=0;a<n;a++){const[o,l]=u(this,Ji)[a];for(let c=0,h=r.length;c<h;c++){const[,d,f]=r[c];if(!(l<=d||f<=o)){if(d>=o){if(f>l)r[c][1]=l;else{if(h===1)return[];r.splice(c,1),c--,h--}continue}r[c][2]=o,f>l&&r.push([e,l,f])}}}return r};class R1{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(e,t){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof xg}}var Vh,Il;class GE extends R1{constructor(e,t){super(),E(this,Vh),E(this,Il),x(this,Il,e),x(this,Vh,t)}toSVGPath(){const e=[];for(const t of u(this,Il)){let[s,r]=t;e.push(`M${s} ${r}`);for(let n=2;n<t.length;n+=2){const a=t[n],o=t[n+1];a===s?(e.push(`V${o}`),r=o):o===r&&(e.push(`H${a}`),s=a)}e.push("Z")}return e.join(" ")}serialize([e,t,s,r],n){const a=[],o=s-e,l=r-t;for(const c of u(this,Il)){const h=new Array(c.length);for(let d=0;d<c.length;d+=2)h[d]=e+c[d]*o,h[d+1]=r-c[d+1]*l;a.push(h)}return a}get box(){return u(this,Vh)}}Vh=new WeakMap,Il=new WeakMap;var Os,ur,Tl,Nl,Ns,ke,mo,go,Gh,qh,Fl,Dl,dn,Kh,Lp,wg,Xh,_g;const xa=class kg{constructor({x:e,y:t},s,r,n,a,o=0){E(this,Xh),E(this,Os),E(this,ur,[]),E(this,Tl),E(this,Nl),E(this,Ns,[]),E(this,ke,new Float64Array(18)),E(this,mo),E(this,go),E(this,Gh),E(this,qh),E(this,Fl),E(this,Dl),E(this,dn,[]),x(this,Os,s),x(this,Dl,n*r),x(this,Nl,a),u(this,ke).set([NaN,NaN,NaN,NaN,e,t],6),x(this,Tl,o),x(this,qh,u(kg,Kh)*r),x(this,Gh,u(kg,wg)*r),x(this,Fl,r),u(this,dn).push(e,t)}get free(){return!0}isEmpty(){return isNaN(u(this,ke)[8])}add({x:e,y:t}){var s;x(this,mo,e),x(this,go,t);const[r,n,a,o]=u(this,Os);let[l,c,h,d]=u(this,ke).subarray(8,12);const f=e-h,p=t-d,v=Math.hypot(f,p);if(v<u(this,Gh))return!1;const m=v-u(this,qh),y=m/v,g=y*f,b=y*p;let w=l,S=c;l=h,c=d,h+=g,d+=b,(s=u(this,dn))==null||s.push(e,t);const C=-b/m,I=g/m,P=C*u(this,Dl),N=I*u(this,Dl);return u(this,ke).set(u(this,ke).subarray(2,8),0),u(this,ke).set([h+P,d+N],4),u(this,ke).set(u(this,ke).subarray(14,18),12),u(this,ke).set([h-P,d-N],16),isNaN(u(this,ke)[6])?(u(this,Ns).length===0&&(u(this,ke).set([l+P,c+N],2),u(this,Ns).push(NaN,NaN,NaN,NaN,(l+P-r)/a,(c+N-n)/o),u(this,ke).set([l-P,c-N],14),u(this,ur).push(NaN,NaN,NaN,NaN,(l-P-r)/a,(c-N-n)/o)),u(this,ke).set([w,S,l,c,h,d],6),!this.isEmpty()):(u(this,ke).set([w,S,l,c,h,d],6),Math.abs(Math.atan2(S-c,w-l)-Math.atan2(b,g))<Math.PI/2?([l,c,h,d]=u(this,ke).subarray(2,6),u(this,Ns).push(NaN,NaN,NaN,NaN,((l+h)/2-r)/a,((c+d)/2-n)/o),[l,c,w,S]=u(this,ke).subarray(14,18),u(this,ur).push(NaN,NaN,NaN,NaN,((w+l)/2-r)/a,((S+c)/2-n)/o),!0):([w,S,l,c,h,d]=u(this,ke).subarray(0,6),u(this,Ns).push(((w+5*l)/6-r)/a,((S+5*c)/6-n)/o,((5*l+h)/6-r)/a,((5*c+d)/6-n)/o,((l+h)/2-r)/a,((c+d)/2-n)/o),[h,d,l,c,w,S]=u(this,ke).subarray(12,18),u(this,ur).push(((w+5*l)/6-r)/a,((S+5*c)/6-n)/o,((5*l+h)/6-r)/a,((5*c+d)/6-n)/o,((l+h)/2-r)/a,((c+d)/2-n)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=u(this,Ns),t=u(this,ur),s=u(this,ke).subarray(4,6),r=u(this,ke).subarray(16,18),[n,a,o,l]=u(this,Os),[c,h,d,f]=A(this,Xh,_g).call(this);if(isNaN(u(this,ke)[6])&&!this.isEmpty())return`M${(u(this,ke)[2]-n)/o} ${(u(this,ke)[3]-a)/l} L${(u(this,ke)[4]-n)/o} ${(u(this,ke)[5]-a)/l} L${c} ${h} L${d} ${f} L${(u(this,ke)[16]-n)/o} ${(u(this,ke)[17]-a)/l} L${(u(this,ke)[14]-n)/o} ${(u(this,ke)[15]-a)/l} Z`;const p=[];p.push(`M${e[4]} ${e[5]}`);for(let v=6;v<e.length;v+=6)isNaN(e[v])?p.push(`L${e[v+4]} ${e[v+5]}`):p.push(`C${e[v]} ${e[v+1]} ${e[v+2]} ${e[v+3]} ${e[v+4]} ${e[v+5]}`);p.push(`L${(s[0]-n)/o} ${(s[1]-a)/l} L${c} ${h} L${d} ${f} L${(r[0]-n)/o} ${(r[1]-a)/l}`);for(let v=t.length-6;v>=6;v-=6)isNaN(t[v])?p.push(`L${t[v+4]} ${t[v+5]}`):p.push(`C${t[v]} ${t[v+1]} ${t[v+2]} ${t[v+3]} ${t[v+4]} ${t[v+5]}`);return p.push(`L${t[4]} ${t[5]} Z`),p.join(" ")}getOutlines(){var e;const t=u(this,Ns),s=u(this,ur),r=u(this,ke),n=r.subarray(4,6),a=r.subarray(16,18),[o,l,c,h]=u(this,Os),d=new Float64Array((((e=u(this,dn))==null?void 0:e.length)??0)+2);for(let b=0,w=d.length-2;b<w;b+=2)d[b]=(u(this,dn)[b]-o)/c,d[b+1]=(u(this,dn)[b+1]-l)/h;d[d.length-2]=(u(this,mo)-o)/c,d[d.length-1]=(u(this,go)-l)/h;const[f,p,v,m]=A(this,Xh,_g).call(this);if(isNaN(r[6])&&!this.isEmpty()){const b=new Float64Array(36);return b.set([NaN,NaN,NaN,NaN,(r[2]-o)/c,(r[3]-l)/h,NaN,NaN,NaN,NaN,(r[4]-o)/c,(r[5]-l)/h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,v,m,NaN,NaN,NaN,NaN,(r[16]-o)/c,(r[17]-l)/h,NaN,NaN,NaN,NaN,(r[14]-o)/c,(r[15]-l)/h],0),new xg(b,d,u(this,Os),u(this,Fl),u(this,Tl),u(this,Nl))}const y=new Float64Array(u(this,Ns).length+24+u(this,ur).length);let g=t.length;for(let b=0;b<g;b+=2){if(isNaN(t[b])){y[b]=y[b+1]=NaN;continue}y[b]=t[b],y[b+1]=t[b+1]}y.set([NaN,NaN,NaN,NaN,(n[0]-o)/c,(n[1]-l)/h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,v,m,NaN,NaN,NaN,NaN,(a[0]-o)/c,(a[1]-l)/h],g),g+=24;for(let b=s.length-6;b>=6;b-=6)for(let w=0;w<6;w+=2){if(isNaN(s[b+w])){y[g]=y[g+1]=NaN,g+=2;continue}y[g]=s[b+w],y[g+1]=s[b+w+1],g+=2}return y.set([NaN,NaN,NaN,NaN,s[4],s[5]],g),new xg(y,d,u(this,Os),u(this,Fl),u(this,Tl),u(this,Nl))}};Os=new WeakMap,ur=new WeakMap,Tl=new WeakMap,Nl=new WeakMap,Ns=new WeakMap,ke=new WeakMap,mo=new WeakMap,go=new WeakMap,Gh=new WeakMap,qh=new WeakMap,Fl=new WeakMap,Dl=new WeakMap,dn=new WeakMap,Kh=new WeakMap,Lp=new WeakMap,wg=new WeakMap,Xh=new WeakSet,_g=function(){const i=u(this,ke).subarray(4,6),e=u(this,ke).subarray(16,18),[t,s,r,n]=u(this,Os);return[(u(this,mo)+(i[0]-e[0])/2-t)/r,(u(this,go)+(i[1]-e[1])/2-s)/n,(u(this,mo)+(e[0]-i[0])/2-t)/r,(u(this,go)+(e[1]-i[1])/2-s)/n]},E(xa,Kh,8),E(xa,Lp,2),E(xa,wg,u(xa,Kh)+u(xa,Lp));let I1=xa;var Ol,Ya,Pr,Yh,mi,Qh,Qe,Fi,zl,Wl,T1;class xg extends R1{constructor(e,t,s,r,n,a){super(),E(this,Fi),E(this,Ol),E(this,Ya,null),E(this,Pr),E(this,Yh),E(this,mi),E(this,Qh),E(this,Qe),x(this,Qe,e),x(this,mi,t),x(this,Ol,s),x(this,Qh,r),x(this,Pr,n),x(this,Yh,a),A(this,Fi,T1).call(this,a);const{x:o,y:l,width:c,height:h}=u(this,Ya);for(let d=0,f=e.length;d<f;d+=2)e[d]=(e[d]-o)/c,e[d+1]=(e[d+1]-l)/h;for(let d=0,f=t.length;d<f;d+=2)t[d]=(t[d]-o)/c,t[d+1]=(t[d+1]-l)/h}toSVGPath(){const e=[`M${u(this,Qe)[4]} ${u(this,Qe)[5]}`];for(let t=6,s=u(this,Qe).length;t<s;t+=6){if(isNaN(u(this,Qe)[t])){e.push(`L${u(this,Qe)[t+4]} ${u(this,Qe)[t+5]}`);continue}e.push(`C${u(this,Qe)[t]} ${u(this,Qe)[t+1]} ${u(this,Qe)[t+2]} ${u(this,Qe)[t+3]} ${u(this,Qe)[t+4]} ${u(this,Qe)[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,s,r],n){const a=s-e,o=r-t;let l,c;switch(n){case 0:l=A(this,Fi,zl).call(this,u(this,Qe),e,r,a,-o),c=A(this,Fi,zl).call(this,u(this,mi),e,r,a,-o);break;case 90:l=A(this,Fi,Wl).call(this,u(this,Qe),e,t,a,o),c=A(this,Fi,Wl).call(this,u(this,mi),e,t,a,o);break;case 180:l=A(this,Fi,zl).call(this,u(this,Qe),s,t,-a,o),c=A(this,Fi,zl).call(this,u(this,mi),s,t,-a,o);break;case 270:l=A(this,Fi,Wl).call(this,u(this,Qe),s,r,-a,-o),c=A(this,Fi,Wl).call(this,u(this,mi),s,r,-a,-o);break}return{outline:Array.from(l),points:[Array.from(c)]}}get box(){return u(this,Ya)}getNewOutline(e,t){const{x:s,y:r,width:n,height:a}=u(this,Ya),[o,l,c,h]=u(this,Ol),d=n*c,f=a*h,p=s*c+o,v=r*h+l,m=new I1({x:u(this,mi)[0]*d+p,y:u(this,mi)[1]*f+v},u(this,Ol),u(this,Qh),e,u(this,Yh),t??u(this,Pr));for(let y=2;y<u(this,mi).length;y+=2)m.add({x:u(this,mi)[y]*d+p,y:u(this,mi)[y+1]*f+v});return m.getOutlines()}}Ol=new WeakMap,Ya=new WeakMap,Pr=new WeakMap,Yh=new WeakMap,mi=new WeakMap,Qh=new WeakMap,Qe=new WeakMap,Fi=new WeakSet,zl=function(i,e,t,s,r){const n=new Float64Array(i.length);for(let a=0,o=i.length;a<o;a+=2)n[a]=e+i[a]*s,n[a+1]=t+i[a+1]*r;return n},Wl=function(i,e,t,s,r){const n=new Float64Array(i.length);for(let a=0,o=i.length;a<o;a+=2)n[a]=e+i[a+1]*s,n[a+1]=t+i[a]*r;return n},T1=function(i){const e=u(this,Qe);let t=e[4],s=e[5],r=t,n=s,a=t,o=s,l=t,c=s;const h=i?Math.max:Math.min;for(let m=6,y=e.length;m<y;m+=6){if(isNaN(e[m]))r=Math.min(r,e[m+4]),n=Math.min(n,e[m+5]),a=Math.max(a,e[m+4]),o=Math.max(o,e[m+5]),c<e[m+5]?(l=e[m+4],c=e[m+5]):c===e[m+5]&&(l=h(l,e[m+4]));else{const g=oe.bezierBoundingBox(t,s,...e.slice(m,m+6));r=Math.min(r,g[0]),n=Math.min(n,g[1]),a=Math.max(a,g[2]),o=Math.max(o,g[3]),c<g[3]?(l=g[2],c=g[3]):c===g[3]&&(l=h(l,g[2]))}t=e[m+4],s=e[m+5]}const d=r-u(this,Pr),f=n-u(this,Pr),p=a-r+2*u(this,Pr),v=o-n+2*u(this,Pr);x(this,Ya,{x:d,y:f,width:p,height:v,lastPoint:[l,c]})};var hf,df,rs,Sa,fu,ut,ff,Bl,Zh,pf,fs,pu,qe,Sg,Ag,N1,fn,F1,yr;const D1=class pn{constructor({editor:e=null,uiManager:t=null}){E(this,qe),E(this,hf,A(this,qe,N1).bind(this)),E(this,df,A(this,qe,F1).bind(this)),E(this,rs,null),E(this,Sa,null),E(this,fu),E(this,ut,null),E(this,ff,!1),E(this,Bl,!1),E(this,Zh,null),E(this,pf),E(this,fs,null),E(this,pu);var s;e?(x(this,Bl,!1),x(this,pu,me.HIGHLIGHT_COLOR),x(this,Zh,e)):(x(this,Bl,!0),x(this,pu,me.HIGHLIGHT_DEFAULT_COLOR)),x(this,fs,(e==null?void 0:e._uiManager)||t),x(this,pf,u(this,fs)._eventBus),x(this,fu,(e==null?void 0:e.color)||((s=u(this,fs))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return Se(this,"_keyboardManager",new Gu([[["Escape","mac+Escape"],pn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],pn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],pn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],pn.prototype._moveToPrevious],[["Home","mac+Home"],pn.prototype._moveToBeginning],[["End","mac+End"],pn.prototype._moveToEnd]]))}renderButton(){const e=x(this,rs,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=u(this,fs)._signal;e.addEventListener("click",A(this,qe,fn).bind(this),{signal:t}),e.addEventListener("keydown",u(this,hf),{signal:t});const s=x(this,Sa,document.createElement("span"));return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=u(this,fu),e.append(s),e}renderMainDropdown(){const e=x(this,ut,A(this,qe,Sg).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===u(this,rs)){A(this,qe,fn).call(this,e);return}const t=e.target.getAttribute("data-color");t&&A(this,qe,Ag).call(this,t,e)}_moveToNext(e){var t,s;if(!u(this,qe,yr)){A(this,qe,fn).call(this,e);return}if(e.target===u(this,rs)){(t=u(this,ut).firstChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=u(this,ut))==null?void 0:t.firstChild)||e.target===u(this,rs)){u(this,qe,yr)&&this._hideDropdownFromKeyboard();return}u(this,qe,yr)||A(this,qe,fn).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!u(this,qe,yr)){A(this,qe,fn).call(this,e);return}(t=u(this,ut).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!u(this,qe,yr)){A(this,qe,fn).call(this,e);return}(t=u(this,ut).lastChild)==null||t.focus()}hideDropdown(){var e;(e=u(this,ut))==null||e.classList.add("hidden"),window.removeEventListener("pointerdown",u(this,df))}_hideDropdownFromKeyboard(){var e;if(!u(this,Bl)){if(!u(this,qe,yr)){(e=u(this,Zh))==null||e.unselect();return}this.hideDropdown(),u(this,rs).focus({preventScroll:!0,focusVisible:u(this,ff)})}}updateColor(e){if(u(this,Sa)&&(u(this,Sa).style.backgroundColor=e),!u(this,ut))return;const t=u(this,fs).highlightColors.values();for(const s of u(this,ut).children)s.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=u(this,rs))==null||e.remove(),x(this,rs,null),x(this,Sa,null),(t=u(this,ut))==null||t.remove(),x(this,ut,null)}};hf=new WeakMap,df=new WeakMap,rs=new WeakMap,Sa=new WeakMap,fu=new WeakMap,ut=new WeakMap,ff=new WeakMap,Bl=new WeakMap,Zh=new WeakMap,pf=new WeakMap,fs=new WeakMap,pu=new WeakMap,qe=new WeakSet,Sg=function(){const i=document.createElement("div"),e=u(this,fs)._signal;i.addEventListener("contextmenu",Zt,{signal:e}),i.className="dropdown",i.role="listbox",i.setAttribute("aria-multiselectable",!1),i.setAttribute("aria-orientation","vertical"),i.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[t,s]of u(this,fs).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=t,r.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${t}`);const n=document.createElement("span");r.append(n),n.className="swatch",n.style.backgroundColor=s,r.setAttribute("aria-selected",s===u(this,fu)),r.addEventListener("click",A(this,qe,Ag).bind(this,s),{signal:e}),i.append(r)}return i.addEventListener("keydown",u(this,hf),{signal:e}),i},Ag=function(i,e){e.stopPropagation(),u(this,pf).dispatch("switchannotationeditorparams",{source:this,type:u(this,pu),value:i})},N1=function(i){D1._keyboardManager.exec(this,i)},fn=function(i){if(u(this,qe,yr)){this.hideDropdown();return}if(x(this,ff,i.detail===0),window.addEventListener("pointerdown",u(this,df),{signal:u(this,fs)._signal}),u(this,ut)){u(this,ut).classList.remove("hidden");return}const e=x(this,ut,A(this,qe,Sg).call(this));u(this,rs).append(e)},F1=function(i){var e;(e=u(this,ut))!=null&&e.contains(i.target)||this.hideDropdown()},yr=function(){return u(this,ut)&&!u(this,ut).classList.contains("hidden")};let O1=D1;var mu,mf,Dn,Qa,gu,zi,gf,vf,vo,ns,Ht,xi,Eg,vu,Za,ct,jl,Us,Jh,Fe,Cg,Mg,z1,W1,T0,Lg,Ul,Hs,bo,B1,ed,bu,j1,U1,H1,$1;const Ut=class St extends Re{constructor(e){super({...e,name:"highlightEditor"}),E(this,Fe),E(this,mu,null),E(this,mf,0),E(this,Dn),E(this,Qa,null),E(this,gu,null),E(this,zi,null),E(this,gf,null),E(this,vf,0),E(this,vo,null),E(this,ns,null),E(this,Ht,null),E(this,xi,!1),E(this,Eg,A(this,Fe,B1).bind(this)),E(this,vu,null),E(this,Za),E(this,ct,null),E(this,jl,""),E(this,Us),E(this,Jh,""),this.color=e.color||St._defaultColor,x(this,Us,e.thickness||St._defaultThickness),x(this,Za,e.opacity||St._defaultOpacity),x(this,Dn,e.boxes||null),x(this,Jh,e.methodOfCreation||""),x(this,jl,e.text||""),this._isDraggable=!1,e.highlightId>-1?(x(this,xi,!0),A(this,Fe,Mg).call(this,e),A(this,Fe,Ul).call(this)):(x(this,mu,e.anchorNode),x(this,mf,e.anchorOffset),x(this,gf,e.focusNode),x(this,vf,e.focusOffset),A(this,Fe,Cg).call(this),A(this,Fe,Ul).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=St.prototype;return Se(this,"_keyboardManager",new Gu([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,xi)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:u(this,Us),methodOfCreation:u(this,Jh)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,t){var s;Re.initialize(e,t),St._defaultColor||(St._defaultColor=((s=t.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(e,t){switch(e){case me.HIGHLIGHT_DEFAULT_COLOR:St._defaultColor=t;break;case me.HIGHLIGHT_THICKNESS:St._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return u(this,vu)}updateParams(e,t){switch(e){case me.HIGHLIGHT_COLOR:A(this,Fe,z1).call(this,t);break;case me.HIGHLIGHT_THICKNESS:A(this,Fe,W1).call(this,t);break}}static get defaultPropertiesToUpdate(){return[[me.HIGHLIGHT_DEFAULT_COLOR,St._defaultColor],[me.HIGHLIGHT_THICKNESS,St._defaultThickness]]}get propertiesToUpdate(){return[[me.HIGHLIGHT_COLOR,this.color||St._defaultColor],[me.HIGHLIGHT_THICKNESS,u(this,Us)||St._defaultThickness],[me.HIGHLIGHT_FREE,u(this,xi)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(x(this,gu,new O1({editor:this})),e.addColorPicker(u(this,gu))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(A(this,Fe,bu).call(this))}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,A(this,Fe,bu).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){A(this,Fe,Lg).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,Fe,Ul).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var t;let s=!1;this.parent&&!e?A(this,Fe,Lg).call(this):e&&(A(this,Fe,Ul).call(this,e),s=!this.parent&&((t=this.div)==null?void 0:t.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),s&&this.select()}rotate(e){var t,s,r;const{drawLayer:n}=this.parent;let a;u(this,xi)?(e=(e-this.rotation+360)%360,a=A(t=St,Hs,bo).call(t,u(this,ns).box,e)):a=A(s=St,Hs,bo).call(s,this,e),n.rotate(u(this,Ht),e),n.rotate(u(this,ct),e),n.updateBox(u(this,Ht),a),n.updateBox(u(this,ct),A(r=St,Hs,bo).call(r,u(this,zi).box,e))}render(){if(this.div)return this.div;const e=super.render();u(this,jl)&&(e.setAttribute("aria-label",u(this,jl)),e.setAttribute("role","mark")),u(this,xi)?e.classList.add("free"):this.div.addEventListener("keydown",u(this,Eg),{signal:this._uiManager._signal});const t=x(this,vo,document.createElement("div"));e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=u(this,Qa);const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),Od(this,u(this,vo),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.parent.drawLayer.addClass(u(this,ct),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(u(this,ct),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:A(this,Fe,ed).call(this,!0);break;case 1:case 3:A(this,Fe,ed).call(this,!1);break}}select(){var e,t;super.select(),u(this,ct)&&((e=this.parent)==null||e.drawLayer.removeClass(u(this,ct),"hovered"),(t=this.parent)==null||t.drawLayer.addClass(u(this,ct),"selected"))}unselect(){var e;super.unselect(),u(this,ct)&&((e=this.parent)==null||e.drawLayer.removeClass(u(this,ct),"selected"),u(this,xi)||A(this,Fe,ed).call(this,!1))}get _mustFixPosition(){return!u(this,xi)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(u(this,Ht),e),this.parent.drawLayer.show(u(this,ct),e))}static startHighlighting(e,t,{target:s,x:r,y:n}){const{x:a,y:o,width:l,height:c}=s.getBoundingClientRect(),h=m=>{A(this,Hs,H1).call(this,e,m)},d=e._signal,f={capture:!0,passive:!1,signal:d},p=m=>{m.preventDefault(),m.stopPropagation()},v=m=>{s.removeEventListener("pointermove",h),window.removeEventListener("blur",v),window.removeEventListener("pointerup",v),window.removeEventListener("pointerdown",p,f),window.removeEventListener("contextmenu",Zt),A(this,Hs,$1).call(this,e,m)};window.addEventListener("blur",v,{signal:d}),window.addEventListener("pointerup",v,{signal:d}),window.addEventListener("pointerdown",p,f),window.addEventListener("contextmenu",Zt,{signal:d}),s.addEventListener("pointermove",h,{signal:d}),this._freeHighlight=new I1({x:r,y:n},[a,o,l,c],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(e,t,s){var r;const n=super.deserialize(e,t,s),{rect:[a,o,l,c],color:h,quadPoints:d}=e;n.color=oe.makeHexColor(...h),x(n,Za,e.opacity);const[f,p]=n.pageDimensions;n.width=(l-a)/f,n.height=(c-o)/p;const v=x(n,Dn,[]);for(let m=0;m<d.length;m+=8)v.push({x:(d[4]-l)/f,y:(c-(1-d[m+5]))/p,width:(d[m+2]-d[m])/f,height:(d[m+5]-d[m+1])/p});return A(r=n,Fe,Cg).call(r),n}serialize(e=!1){if(this.isEmpty()||e)return null;const t=this.getRect(0,0),s=Re._colorManager.convert(this.color);return{annotationType:xe.HIGHLIGHT,color:s,opacity:u(this,Za),thickness:u(this,Us),quadPoints:A(this,Fe,j1).call(this),outlines:A(this,Fe,U1).call(this,t),pageIndex:this.pageIndex,rect:t,rotation:A(this,Fe,bu).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};mu=new WeakMap,mf=new WeakMap,Dn=new WeakMap,Qa=new WeakMap,gu=new WeakMap,zi=new WeakMap,gf=new WeakMap,vf=new WeakMap,vo=new WeakMap,ns=new WeakMap,Ht=new WeakMap,xi=new WeakMap,Eg=new WeakMap,vu=new WeakMap,Za=new WeakMap,ct=new WeakMap,jl=new WeakMap,Us=new WeakMap,Jh=new WeakMap,Fe=new WeakSet,Cg=function(){const i=new yg(u(this,Dn),.001);x(this,ns,i.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=u(this,ns).box;const e=new yg(u(this,Dn),.0025,.001,this._uiManager.direction==="ltr");x(this,zi,e.getOutlines());const{lastPoint:t}=u(this,zi).box;x(this,vu,[(t[0]-this.x)/this.width,(t[1]-this.y)/this.height])},Mg=function({highlightOutlines:i,highlightId:e,clipPathId:t}){var s,r;if(x(this,ns,i),x(this,zi,i.getNewOutline(u(this,Us)/2+1.5,.0025)),e>=0)x(this,Ht,e),x(this,Qa,t),this.parent.drawLayer.finalizeLine(e,i),x(this,ct,this.parent.drawLayer.highlightOutline(u(this,zi)));else if(this.parent){const h=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(u(this,Ht),i),this.parent.drawLayer.updateBox(u(this,Ht),A(s=Ut,Hs,bo).call(s,u(this,ns).box,(h-this.rotation+360)%360)),this.parent.drawLayer.updateLine(u(this,ct),u(this,zi)),this.parent.drawLayer.updateBox(u(this,ct),A(r=Ut,Hs,bo).call(r,u(this,zi).box,h))}const{x:n,y:a,width:o,height:l}=i.box;switch(this.rotation){case 0:this.x=n,this.y=a,this.width=o,this.height=l;break;case 90:{const[h,d]=this.parentDimensions;this.x=a,this.y=1-n,this.width=o*d/h,this.height=l*h/d;break}case 180:this.x=1-n,this.y=1-a,this.width=o,this.height=l;break;case 270:{const[h,d]=this.parentDimensions;this.x=1-a,this.y=n,this.width=o*d/h,this.height=l*h/d;break}}const{lastPoint:c}=u(this,zi).box;x(this,vu,[(c[0]-n)/o,(c[1]-a)/l])},z1=function(i){const e=s=>{var r,n;this.color=s,(r=this.parent)==null||r.drawLayer.changeColor(u(this,Ht),s),(n=u(this,gu))==null||n.updateColor(s)},t=this.color;this.addCommands({cmd:e.bind(this,i),undo:e.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:me.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(i)},!0)},W1=function(i){const e=u(this,Us),t=s=>{x(this,Us,s),A(this,Fe,T0).call(this,s)};this.addCommands({cmd:t.bind(this,i),undo:t.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:me.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:i},!0)},T0=function(i){if(!u(this,xi))return;A(this,Fe,Mg).call(this,{highlightOutlines:u(this,ns).getNewOutline(i/2)}),this.fixAndSetPosition();const[e,t]=this.parentDimensions;this.setDims(this.width*e,this.height*t)},Lg=function(){u(this,Ht)===null||!this.parent||(this.parent.drawLayer.remove(u(this,Ht)),x(this,Ht,null),this.parent.drawLayer.remove(u(this,ct)),x(this,ct,null))},Ul=function(i=this.parent){u(this,Ht)===null&&({id:Mi(this,Ht)._,clipPathId:Mi(this,Qa)._}=i.drawLayer.highlight(u(this,ns),this.color,u(this,Za)),x(this,ct,i.drawLayer.highlightOutline(u(this,zi))),u(this,vo)&&(u(this,vo).style.clipPath=u(this,Qa)))},Hs=new WeakSet,bo=function({x:i,y:e,width:t,height:s},r){switch(r){case 90:return{x:1-e-s,y:i,width:s,height:t};case 180:return{x:1-i-t,y:1-e-s,width:t,height:s};case 270:return{x:e,y:1-i-t,width:s,height:t}}return{x:i,y:e,width:t,height:s}},B1=function(i){Ut._keyboardManager.exec(this,i)},ed=function(i){if(!u(this,mu))return;const e=window.getSelection();i?e.setPosition(u(this,mu),u(this,mf)):e.setPosition(u(this,gf),u(this,vf))},bu=function(){return u(this,xi)?this.rotation:0},j1=function(){if(u(this,xi))return null;const[i,e]=this.pageDimensions,t=u(this,Dn),s=new Float32Array(t.length*8);let r=0;for(const{x:n,y:a,width:o,height:l}of t){const c=n*i,h=(1-a-l)*e;s[r]=s[r+4]=c,s[r+1]=s[r+3]=h,s[r+2]=s[r+6]=c+o*i,s[r+5]=s[r+7]=h+l*e,r+=8}return s},U1=function(i){return u(this,ns).serialize(i,A(this,Fe,bu).call(this))},H1=function(i,e){this._freeHighlight.add(e)&&i.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},$1=function(i,e){this._freeHighlight.isEmpty()?i.drawLayer.removeFreeHighlight(this._freeHighlightId):i.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},E(Ut,Hs),ge(Ut,"_defaultColor",null),ge(Ut,"_defaultOpacity",1),ge(Ut,"_defaultThickness",12),ge(Ut,"_l10nPromise"),ge(Ut,"_type","highlight"),ge(Ut,"_editorType",xe.HIGHLIGHT),ge(Ut,"_freeHighlightId",-1),ge(Ut,"_freeHighlight",null),ge(Ut,"_freeHighlightClipId","");let N0=Ut;var Ja,eo,td,id,sd,yo,$s,cr,ji,Aa,to,Rr,io,so,mn,de,V1,G1,q1,K1,Pp,X1,Pg,F0,D0,O0,z0,W0,An,Rg,bf,yf,wo,Ig,xc,ro,Y1,Rp,Q1,Z1,Tg,Sc,yu;const gi=class Di extends Re{constructor(e){super({...e,name:"inkEditor"}),E(this,de),E(this,Ja,0),E(this,eo,0),E(this,td,this.canvasPointermove.bind(this)),E(this,id,this.canvasPointerleave.bind(this)),E(this,sd,this.canvasPointerup.bind(this)),E(this,yo,this.canvasPointerdown.bind(this)),E(this,$s,null),E(this,cr,new Path2D),E(this,ji,!1),E(this,Aa,!1),E(this,to,!1),E(this,Rr,null),E(this,io,0),E(this,so,0),E(this,mn,null),this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,t){Re.initialize(e,t)}static updateDefaultParams(e,t){switch(e){case me.INK_THICKNESS:Di._defaultThickness=t;break;case me.INK_COLOR:Di._defaultColor=t;break;case me.INK_OPACITY:Di._defaultOpacity=t/100;break}}updateParams(e,t){switch(e){case me.INK_THICKNESS:A(this,de,V1).call(this,t);break;case me.INK_COLOR:A(this,de,G1).call(this,t);break;case me.INK_OPACITY:A(this,de,q1).call(this,t);break}}static get defaultPropertiesToUpdate(){return[[me.INK_THICKNESS,Di._defaultThickness],[me.INK_COLOR,Di._defaultColor||Re._defaultLineColor],[me.INK_OPACITY,Math.round(Di._defaultOpacity*100)]]}get propertiesToUpdate(){return[[me.INK_THICKNESS,this.thickness||Di._defaultThickness],[me.INK_COLOR,this.color||Di._defaultColor||Re._defaultLineColor],[me.INK_OPACITY,Math.round(100*(this.opacity??Di._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(A(this,de,bf).call(this),A(this,de,yf).call(this)),this.isAttachedToDOM||(this.parent.add(this),A(this,de,wo).call(this)),A(this,de,yu).call(this)))}remove(){var e;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,u(this,$s)&&(clearTimeout(u(this,$s)),x(this,$s,null)),(e=u(this,Rr))==null||e.disconnect(),x(this,Rr,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,t]=this.parentDimensions,s=this.width*e,r=this.height*t;this.setDimensions(s,r)}enableEditMode(){u(this,ji)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",u(this,yo),{signal:this._uiManager._signal}))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",u(this,yo)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){u(this,ji)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),x(this,ji,!0),this.div.classList.add("disabled"),A(this,de,yu).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||u(this,ji)||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),A(this,de,X1).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),A(this,de,Pg).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),A(this,de,Rg).call(this,e)}canvasPointerleave(e){A(this,de,Rg).call(this,e)}get isResizable(){return!this.isEmpty()&&u(this,ji)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[s,r,n,a]=A(this,de,K1).call(this);if(this.setAt(s,r,0,0),this.setDims(n,a),A(this,de,bf).call(this),this.width){const[o,l]=this.parentDimensions;this.setAspectRatio(this.width*o,this.height*l),this.setAt(e*o,t*l,this.width*o,this.height*l),x(this,to,!0),A(this,de,wo).call(this),this.setDims(this.width*o,this.height*l),A(this,de,An).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return A(this,de,yf).call(this),this.div}setDimensions(e,t){const s=Math.round(e),r=Math.round(t);if(u(this,io)===s&&u(this,so)===r)return;x(this,io,s),x(this,so,r),this.canvas.style.visibility="hidden";const[n,a]=this.parentDimensions;this.width=e/n,this.height=t/a,this.fixAndSetPosition(),u(this,ji)&&A(this,de,Ig).call(this,e,t),A(this,de,wo).call(this),A(this,de,An).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(e,t,s){var r,n,a;if(e instanceof w1)return null;const o=super.deserialize(e,t,s);o.thickness=e.thickness,o.color=oe.makeHexColor(...e.color),o.opacity=e.opacity;const[l,c]=o.pageDimensions,h=o.width*l,d=o.height*c,f=o.parentScale,p=e.thickness/2;x(o,ji,!0),x(o,io,Math.round(h)),x(o,so,Math.round(d));const{paths:v,rect:m,rotation:y}=e;for(let{bezier:b}of v){b=A(r=Di,ro,Q1).call(r,b,m,y);const w=[];o.paths.push(w);let S=f*(b[0]-p),C=f*(b[1]-p);for(let P=2,N=b.length;P<N;P+=6){const F=f*(b[P]-p),T=f*(b[P+1]-p),V=f*(b[P+2]-p),L=f*(b[P+3]-p),W=f*(b[P+4]-p),k=f*(b[P+5]-p);w.push([[S,C],[F,T],[V,L],[W,k]]),S=W,C=k}const I=A(this,ro,Y1).call(this,w);o.bezierPath2D.push(I)}const g=A(n=o,de,Tg).call(n);return x(o,eo,Math.max(Re.MIN_SIZE,g[2]-g[0])),x(o,Ja,Math.max(Re.MIN_SIZE,g[3]-g[1])),A(a=o,de,Ig).call(a,h,d),o}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),t=Re._colorManager.convert(this.ctx.strokeStyle);return{annotationType:xe.INK,color:t,thickness:this.thickness,opacity:this.opacity,paths:A(this,de,Z1).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};Ja=new WeakMap,eo=new WeakMap,td=new WeakMap,id=new WeakMap,sd=new WeakMap,yo=new WeakMap,$s=new WeakMap,cr=new WeakMap,ji=new WeakMap,Aa=new WeakMap,to=new WeakMap,Rr=new WeakMap,io=new WeakMap,so=new WeakMap,mn=new WeakMap,de=new WeakSet,V1=function(i){const e=s=>{this.thickness=s,A(this,de,yu).call(this)},t=this.thickness;this.addCommands({cmd:e.bind(this,i),undo:e.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:me.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},G1=function(i){const e=s=>{this.color=s,A(this,de,An).call(this)},t=this.color;this.addCommands({cmd:e.bind(this,i),undo:e.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:me.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},q1=function(i){const e=s=>{this.opacity=s,A(this,de,An).call(this)};i/=100;const t=this.opacity;this.addCommands({cmd:e.bind(this,i),undo:e.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:me.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},K1=function(){const{parentRotation:i,parentDimensions:[e,t]}=this;switch(i){case 90:return[0,t,t,e];case 180:return[e,t,e,t];case 270:return[e,0,t,e];default:return[0,0,e,t]}},Pp=function(){const{ctx:i,color:e,opacity:t,thickness:s,parentScale:r,scaleFactor:n}=this;i.lineWidth=s*r/n,i.lineCap="round",i.lineJoin="round",i.miterLimit=10,i.strokeStyle=`${e}${lA(t)}`},X1=function(i,e){const t=this._uiManager._signal;this.canvas.addEventListener("contextmenu",Zt,{signal:t}),this.canvas.addEventListener("pointerleave",u(this,id),{signal:t}),this.canvas.addEventListener("pointermove",u(this,td),{signal:t}),this.canvas.addEventListener("pointerup",u(this,sd),{signal:t}),this.canvas.removeEventListener("pointerdown",u(this,yo)),this.isEditing=!0,u(this,to)||(x(this,to,!0),A(this,de,wo).call(this),this.thickness||(this.thickness=gi._defaultThickness),this.color||(this.color=gi._defaultColor||Re._defaultLineColor),this.opacity??(this.opacity=gi._defaultOpacity)),this.currentPath.push([i,e]),x(this,Aa,!1),A(this,de,Pp).call(this),x(this,mn,()=>{A(this,de,O0).call(this),u(this,mn)&&window.requestAnimationFrame(u(this,mn))}),window.requestAnimationFrame(u(this,mn))},Pg=function(i,e){const[t,s]=this.currentPath.at(-1);if(this.currentPath.length>1&&i===t&&e===s)return;const r=this.currentPath;let n=u(this,cr);if(r.push([i,e]),x(this,Aa,!0),r.length<=2){n.moveTo(...r[0]),n.lineTo(i,e);return}r.length===3&&(x(this,cr,n=new Path2D),n.moveTo(...r[0])),A(this,de,z0).call(this,n,...r.at(-3),...r.at(-2),i,e)},F0=function(){if(this.currentPath.length===0)return;const i=this.currentPath.at(-1);u(this,cr).lineTo(...i)},D0=function(i,e){x(this,mn,null),i=Math.min(Math.max(i,0),this.canvas.width),e=Math.min(Math.max(e,0),this.canvas.height),A(this,de,Pg).call(this,i,e),A(this,de,F0).call(this);let t;if(this.currentPath.length!==1)t=A(this,de,W0).call(this);else{const o=[i,e];t=[[o,o.slice(),o.slice(),o]]}const s=u(this,cr),r=this.currentPath;this.currentPath=[],x(this,cr,new Path2D);const n=()=>{this.allRawPaths.push(r),this.paths.push(t),this.bezierPath2D.push(s),this._uiManager.rebuild(this)},a=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(A(this,de,bf).call(this),A(this,de,yf).call(this)),A(this,de,yu).call(this))};this.addCommands({cmd:n,undo:a,mustExec:!0})},O0=function(){if(!u(this,Aa))return;x(this,Aa,!1);const i=Math.ceil(this.thickness*this.parentScale),e=this.currentPath.slice(-3),t=e.map(n=>n[0]),s=e.map(n=>n[1]);Math.min(...t)-i,Math.max(...t)+i,Math.min(...s)-i,Math.max(...s)+i;const{ctx:r}=this;r.save(),r.clearRect(0,0,this.canvas.width,this.canvas.height);for(const n of this.bezierPath2D)r.stroke(n);r.stroke(u(this,cr)),r.restore()},z0=function(i,e,t,s,r,n,a){const o=(e+s)/2,l=(t+r)/2,c=(s+n)/2,h=(r+a)/2;i.bezierCurveTo(o+2*(s-o)/3,l+2*(r-l)/3,c+2*(s-c)/3,h+2*(r-h)/3,c,h)},W0=function(){const i=this.currentPath;if(i.length<=2)return[[i[0],i[0],i.at(-1),i.at(-1)]];const e=[];let t,[s,r]=i[0];for(t=1;t<i.length-2;t++){const[d,f]=i[t],[p,v]=i[t+1],m=(d+p)/2,y=(f+v)/2,g=[s+2*(d-s)/3,r+2*(f-r)/3],b=[m+2*(d-m)/3,y+2*(f-y)/3];e.push([[s,r],g,b,[m,y]]),[s,r]=[m,y]}const[n,a]=i[t],[o,l]=i[t+1],c=[s+2*(n-s)/3,r+2*(a-r)/3],h=[o+2*(n-o)/3,l+2*(a-l)/3];return e.push([[s,r],c,h,[o,l]]),e},An=function(){if(this.isEmpty()){A(this,de,xc).call(this);return}A(this,de,Pp).call(this);const{canvas:i,ctx:e}=this;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,i.width,i.height),A(this,de,xc).call(this);for(const t of this.bezierPath2D)e.stroke(t)},Rg=function(i){this.canvas.removeEventListener("pointerleave",u(this,id)),this.canvas.removeEventListener("pointermove",u(this,td)),this.canvas.removeEventListener("pointerup",u(this,sd)),this.canvas.addEventListener("pointerdown",u(this,yo),{signal:this._uiManager._signal}),u(this,$s)&&clearTimeout(u(this,$s)),x(this,$s,setTimeout(()=>{x(this,$s,null),this.canvas.removeEventListener("contextmenu",Zt)},10)),A(this,de,D0).call(this,i.offsetX,i.offsetY),this.addToAnnotationStorage(),this.setInBackground()},bf=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},yf=function(){x(this,Rr,new ResizeObserver(i=>{const e=i[0].contentRect;e.width&&e.height&&this.setDimensions(e.width,e.height)})),u(this,Rr).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var i;(i=u(this,Rr))==null||i.disconnect(),x(this,Rr,null)},{once:!0})},wo=function(){if(!u(this,to))return;const[i,e]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*i),this.canvas.height=Math.ceil(this.height*e),A(this,de,xc).call(this)},Ig=function(i,e){const t=A(this,de,Sc).call(this),s=(i-t)/u(this,eo),r=(e-t)/u(this,Ja);this.scaleFactor=Math.min(s,r)},xc=function(){const i=A(this,de,Sc).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+i,this.translationY*this.scaleFactor+i)},ro=new WeakSet,Y1=function(i){const e=new Path2D;for(let t=0,s=i.length;t<s;t++){const[r,n,a,o]=i[t];t===0&&e.moveTo(...r),e.bezierCurveTo(n[0],n[1],a[0],a[1],o[0],o[1])}return e},Rp=function(i,e,t){const[s,r,n,a]=e;switch(t){case 0:for(let o=0,l=i.length;o<l;o+=2)i[o]+=s,i[o+1]=a-i[o+1];break;case 90:for(let o=0,l=i.length;o<l;o+=2){const c=i[o];i[o]=i[o+1]+s,i[o+1]=c+r}break;case 180:for(let o=0,l=i.length;o<l;o+=2)i[o]=n-i[o],i[o+1]+=r;break;case 270:for(let o=0,l=i.length;o<l;o+=2){const c=i[o];i[o]=n-i[o+1],i[o+1]=a-c}break;default:throw new Error("Invalid rotation")}return i},Q1=function(i,e,t){const[s,r,n,a]=e;switch(t){case 0:for(let o=0,l=i.length;o<l;o+=2)i[o]-=s,i[o+1]=a-i[o+1];break;case 90:for(let o=0,l=i.length;o<l;o+=2){const c=i[o];i[o]=i[o+1]-r,i[o+1]=c-s}break;case 180:for(let o=0,l=i.length;o<l;o+=2)i[o]=n-i[o],i[o+1]-=r;break;case 270:for(let o=0,l=i.length;o<l;o+=2){const c=i[o];i[o]=a-i[o+1],i[o+1]=n-c}break;default:throw new Error("Invalid rotation")}return i},Z1=function(i,e,t,s){var r,n;const a=[],o=this.thickness/2,l=i*e+o,c=i*t+o;for(const h of this.paths){const d=[],f=[];for(let p=0,v=h.length;p<v;p++){const[m,y,g,b]=h[p];if(m[0]===b[0]&&m[1]===b[1]&&v===1){const V=i*m[0]+l,L=i*m[1]+c;d.push(V,L),f.push(V,L);break}const w=i*m[0]+l,S=i*m[1]+c,C=i*y[0]+l,I=i*y[1]+c,P=i*g[0]+l,N=i*g[1]+c,F=i*b[0]+l,T=i*b[1]+c;p===0&&(d.push(w,S),f.push(w,S)),d.push(C,I,P,N,F,T),f.push(C,I),p===v-1&&f.push(F,T)}a.push({bezier:A(r=gi,ro,Rp).call(r,d,s,this.rotation),points:A(n=gi,ro,Rp).call(n,f,s,this.rotation)})}return a},Tg=function(){let i=1/0,e=-1/0,t=1/0,s=-1/0;for(const r of this.paths)for(const[n,a,o,l]of r){const c=oe.bezierBoundingBox(...n,...a,...o,...l);i=Math.min(i,c[0]),t=Math.min(t,c[1]),e=Math.max(e,c[2]),s=Math.max(s,c[3])}return[i,t,e,s]},Sc=function(){return u(this,ji)?Math.ceil(this.thickness*this.parentScale):0},yu=function(i=!1){if(this.isEmpty())return;if(!u(this,ji)){A(this,de,An).call(this);return}const e=A(this,de,Tg).call(this),t=A(this,de,Sc).call(this);x(this,eo,Math.max(Re.MIN_SIZE,e[2]-e[0])),x(this,Ja,Math.max(Re.MIN_SIZE,e[3]-e[1]));const s=Math.ceil(t+u(this,eo)*this.scaleFactor),r=Math.ceil(t+u(this,Ja)*this.scaleFactor),[n,a]=this.parentDimensions;this.width=s/n,this.height=r/a,this.setAspectRatio(s,r);const o=this.translationX,l=this.translationY;this.translationX=-e[0],this.translationY=-e[1],A(this,de,wo).call(this),A(this,de,An).call(this),x(this,io,s),x(this,so,r),this.setDims(s,r);const c=i?t/this.scaleFactor/2:0;this.translate(o-this.translationX-c,l-this.translationY-c)},E(gi,ro),ge(gi,"_defaultColor",null),ge(gi,"_defaultOpacity",1),ge(gi,"_defaultThickness",1),ge(gi,"_type","ink"),ge(gi,"_editorType",xe.INK);let qE=gi;var Et,Ct,En,Dr,On,Hl,Vs,Ir,Gs,gs,rd,Be,qo,Ko,nd,Ng,B0,j0,Ip,ad,U0;const od=class extends Re{constructor(e){super({...e,name:"stampEditor"}),E(this,Be),E(this,Et,null),E(this,Ct,null),E(this,En,null),E(this,Dr,null),E(this,On,null),E(this,Hl,""),E(this,Vs,null),E(this,Ir,null),E(this,Gs,null),E(this,gs,!1),E(this,rd,!1),x(this,Dr,e.bitmapUrl),x(this,On,e.bitmapFile)}static initialize(e,t){Re.initialize(e,t)}static get supportedTypes(){return Se(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(e=>`image/${e}`))}static get supportedTypesStr(){return Se(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(xe.STAMP,{bitmapFile:e.getAsFile()})}remove(){var e,t;u(this,Ct)&&(x(this,Et,null),this._uiManager.imageManager.deleteId(u(this,Ct)),(e=u(this,Vs))==null||e.remove(),x(this,Vs,null),(t=u(this,Ir))==null||t.disconnect(),x(this,Ir,null),u(this,Gs)&&(clearTimeout(u(this,Gs)),x(this,Gs,null))),super.remove()}rebuild(){if(!this.parent){u(this,Ct)&&A(this,Be,nd).call(this);return}super.rebuild(),this.div!==null&&(u(this,Ct)&&u(this,Vs)===null&&A(this,Be,nd).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(u(this,En)||u(this,Et)||u(this,Dr)||u(this,On)||u(this,Ct))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),u(this,Et)?A(this,Be,Ng).call(this):A(this,Be,nd).call(this),this.width){const[s,r]=this.parentDimensions;this.setAt(e*s,t*r,this.width*s,this.height*r)}return this.div}getImageForAltText(){return u(this,Vs)}static deserialize(e,t,s){if(e instanceof _1)return null;const r=super.deserialize(e,t,s),{rect:n,bitmapUrl:a,bitmapId:o,isSvg:l,accessibilityData:c}=e;o&&s.imageManager.isValidId(o)?x(r,Ct,o):x(r,Dr,a),x(r,gs,l);const[h,d]=r.pageDimensions;return r.width=(n[2]-n[0])/h,r.height=(n[3]-n[1])/d,c&&(r.altTextData=c),r}serialize(e=!1,t=null){if(this.isEmpty())return null;const s={annotationType:xe.STAMP,bitmapId:u(this,Ct),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:u(this,gs),structTreeParentId:this._structTreeParentId};if(e)return s.bitmapUrl=A(this,Be,ad).call(this,!0),s.accessibilityData=this.altTextData,s;const{decorative:r,altText:n}=this.altTextData;if(!r&&n&&(s.accessibilityData={type:"Figure",alt:n}),t===null)return s;t.stamps||(t.stamps=new Map);const a=u(this,gs)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!t.stamps.has(u(this,Ct)))t.stamps.set(u(this,Ct),{area:a,serialized:s}),s.bitmap=A(this,Be,ad).call(this,!1);else if(u(this,gs)){const o=t.stamps.get(u(this,Ct));a>o.area&&(o.area=a,o.serialized.bitmap.close(),o.serialized.bitmap=A(this,Be,ad).call(this,!1))}return s}};Et=new WeakMap,Ct=new WeakMap,En=new WeakMap,Dr=new WeakMap,On=new WeakMap,Hl=new WeakMap,Vs=new WeakMap,Ir=new WeakMap,Gs=new WeakMap,gs=new WeakMap,rd=new WeakMap,Be=new WeakSet,qo=function(i,e=!1){if(!i){this.remove();return}x(this,Et,i.bitmap),e||(x(this,Ct,i.id),x(this,gs,i.isSvg)),i.file&&x(this,Hl,i.file.name),A(this,Be,Ng).call(this)},Ko=function(){x(this,En,null),this._uiManager.enableWaiting(!1),u(this,Vs)&&this.div.focus()},nd=function(){if(u(this,Ct)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,Ct)).then(t=>A(this,Be,qo).call(this,t,!0)).finally(()=>A(this,Be,Ko).call(this));return}if(u(this,Dr)){const t=u(this,Dr);x(this,Dr,null),this._uiManager.enableWaiting(!0),x(this,En,this._uiManager.imageManager.getFromUrl(t).then(s=>A(this,Be,qo).call(this,s)).finally(()=>A(this,Be,Ko).call(this)));return}if(u(this,On)){const t=u(this,On);x(this,On,null),this._uiManager.enableWaiting(!0),x(this,En,this._uiManager.imageManager.getFromFile(t).then(s=>A(this,Be,qo).call(this,s)).finally(()=>A(this,Be,Ko).call(this)));return}const i=document.createElement("input");i.type="file",i.accept=od.supportedTypesStr;const e=this._uiManager._signal;x(this,En,new Promise(t=>{i.addEventListener("change",async()=>{if(!i.files||i.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(i.files[0]);A(this,Be,qo).call(this,s)}t()},{signal:e}),i.addEventListener("cancel",()=>{this.remove(),t()},{signal:e})}).finally(()=>A(this,Be,Ko).call(this))),i.click()},Ng=function(){const{div:i}=this;let{width:e,height:t}=u(this,Et);const[s,r]=this.pageDimensions,n=.75;if(this.width)e=this.width*s,t=this.height*r;else if(e>n*s||t>n*r){const c=Math.min(n*s/e,n*r/t);e*=c,t*=c}const[a,o]=this.parentDimensions;this.setDims(e*a/s,t*o/r),this._uiManager.enableWaiting(!1);const l=x(this,Vs,document.createElement("canvas"));i.append(l),i.hidden=!1,A(this,Be,Ip).call(this,e,t),A(this,Be,U0).call(this),u(this,rd)||(this.parent.addUndoableEditor(this),x(this,rd,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,Hl)&&l.setAttribute("aria-label",u(this,Hl))},B0=function(i,e){var t;const[s,r]=this.parentDimensions;this.width=i/s,this.height=e/r,this.setDims(i,e),(t=this._initialOptions)!=null&&t.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,u(this,Gs)!==null&&clearTimeout(u(this,Gs)),x(this,Gs,setTimeout(()=>{x(this,Gs,null),A(this,Be,Ip).call(this,i,e)},200))},j0=function(i,e){const{width:t,height:s}=u(this,Et);let r=t,n=s,a=u(this,Et);for(;r>2*i||n>2*e;){const o=r,l=n;r>2*i&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),n>2*e&&(n=n>=16384?Math.floor(n/2)-1:Math.ceil(n/2));const c=new OffscreenCanvas(r,n);c.getContext("2d").drawImage(a,0,0,o,l,0,0,r,n),a=c.transferToImageBitmap()}return a},Ip=function(i,e){i=Math.ceil(i),e=Math.ceil(e);const t=u(this,Vs);if(!t||t.width===i&&t.height===e)return;t.width=i,t.height=e;const s=u(this,gs)?u(this,Et):A(this,Be,j0).call(this,i,e);if(this._uiManager.hasMLManager&&!this.hasAltText()){const n=new OffscreenCanvas(i,e).getContext("2d");n.drawImage(s,0,0,s.width,s.height,0,0,i,e),this._uiManager.mlGuess({service:"image-to-text",request:{data:n.getImageData(0,0,i,e).data,width:i,height:e,channels:4}}).then(a=>{const o=(a==null?void 0:a.output)||"";this.parent&&o&&!this.hasAltText()&&(this.altTextData={altText:o,decorative:!1})})}const r=t.getContext("2d");r.filter=this._uiManager.hcmFilter,r.drawImage(s,0,0,s.width,s.height,0,0,i,e)},ad=function(i){if(i){if(u(this,gs)){const t=this._uiManager.imageManager.getSvgUrl(u(this,Ct));if(t)return t}const e=document.createElement("canvas");return{width:e.width,height:e.height}=u(this,Et),e.getContext("2d").drawImage(u(this,Et),0,0),e.toDataURL()}if(u(this,gs)){const[e,t]=this.pageDimensions,s=Math.round(this.width*e*Mo.PDF_TO_CSS_UNITS),r=Math.round(this.height*t*Mo.PDF_TO_CSS_UNITS),n=new OffscreenCanvas(s,r);return n.getContext("2d").drawImage(u(this,Et),0,0,u(this,Et).width,u(this,Et).height,0,0,s,r),n.transferToImageBitmap()}return structuredClone(u(this,Et))},U0=function(){this._uiManager._signal&&(x(this,Ir,new ResizeObserver(i=>{const e=i[0].contentRect;e.width&&e.height&&A(this,Be,B0).call(this,e.width,e.height)})),u(this,Ir).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var i;(i=u(this,Ir))==null||i.disconnect(),x(this,Ir,null)},{once:!0}))},ge(od,"_type","stamp"),ge(od,"_editorType",xe.STAMP);let KE=od;var Ea,$l,Fs,Ca,hr,dr,fr,vi,gn,wu,Vl,Vt,le,zn,bi,J1,Fg,Dg,Og,ld;const ud=class vn{constructor({uiManager:e,pageIndex:t,div:s,accessibilityManager:r,annotationLayer:n,drawLayer:a,textLayer:o,viewport:l,l10n:c}){E(this,bi),E(this,Ea),E(this,$l,!1),E(this,Fs,null),E(this,Ca,null),E(this,hr,null),E(this,dr,null),E(this,fr,null),E(this,vi,new Map),E(this,gn,!1),E(this,wu,!1),E(this,Vl,!1),E(this,Vt,null),E(this,le);const h=[...u(vn,zn).values()];if(!vn._initialized){vn._initialized=!0;for(const d of h)d.initialize(c,e)}e.registerEditorTypes(h),x(this,le,e),this.pageIndex=t,this.div=s,x(this,Ea,r),x(this,Fs,n),this.viewport=l,x(this,Vt,o),this.drawLayer=a,u(this,le).addLayer(this)}get isEmpty(){return u(this,vi).size===0}get isInvisible(){return this.isEmpty&&u(this,le).getMode()===xe.NONE}updateToolbar(e){u(this,le).updateToolbar(e)}updateMode(e=u(this,le).getMode()){switch(A(this,bi,ld).call(this),e){case xe.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case xe.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case xe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const s of u(vn,zn).values())t.toggle(`${s._type}Editing`,e===s._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=u(this,Vt))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(u(this,le).getMode()===xe.INK){if(!e){for(const t of u(this,vi).values())if(t.isEmpty()){t.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(e){u(this,le).setEditingState(e)}addCommands(e){u(this,le).addCommands(e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=u(this,Fs))==null||t.div.classList.toggle("disabled",!e)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const s of u(this,vi).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(u(this,le).removeChangedExistingAnnotation(s),e.add(s.annotationElementId));if(!u(this,Fs))return;const t=u(this,Fs).getEditableAnnotations();for(const s of t){if(s.hide(),u(this,le).isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const r=this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}}disable(){var e;x(this,Vl,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,s=new Map;for(const n of u(this,vi).values())if(n.disableEditing(),!!n.annotationElementId){if(n.serialize()!==null){t.set(n.annotationElementId,n);continue}else s.set(n.annotationElementId,n);(e=this.getEditableAnnotation(n.annotationElementId))==null||e.show(),n.remove()}if(u(this,Fs)){const n=u(this,Fs).getEditableAnnotations();for(const a of n){const{id:o}=a.data;if(u(this,le).isDeletedAnnotationElement(o))continue;let l=s.get(o);if(l){l.resetAnnotationElement(a),l.show(!1),a.show();continue}l=t.get(o),l&&(u(this,le).addChangedExistingAnnotation(l),l.renderAnnotationElement(a),l.show(!1)),a.show()}}A(this,bi,ld).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const n of u(vn,zn).values())r.remove(`${n._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),x(this,Vl,!1)}getEditableAnnotation(e){var t;return((t=u(this,Fs))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){u(this,le).getActive()!==e&&u(this,le).setActiveEditor(e)}enableTextSelection(){var e;this.div.tabIndex=-1,(e=u(this,Vt))!=null&&e.div&&!u(this,dr)&&(x(this,dr,A(this,bi,J1).bind(this)),u(this,Vt).div.addEventListener("pointerdown",u(this,dr),{signal:u(this,le)._signal}),u(this,Vt).div.classList.add("highlighting"))}disableTextSelection(){var e;this.div.tabIndex=0,(e=u(this,Vt))!=null&&e.div&&u(this,dr)&&(u(this,Vt).div.removeEventListener("pointerdown",u(this,dr)),x(this,dr,null),u(this,Vt).div.classList.remove("highlighting"))}enableClick(){if(u(this,hr))return;const e=u(this,le)._signal;x(this,hr,this.pointerdown.bind(this)),x(this,Ca,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",u(this,hr),{signal:e}),this.div.addEventListener("pointerup",u(this,Ca),{signal:e})}disableClick(){u(this,hr)&&(this.div.removeEventListener("pointerdown",u(this,hr)),this.div.removeEventListener("pointerup",u(this,Ca)),x(this,hr,null),x(this,Ca,null))}attach(e){u(this,vi).set(e.id,e);const{annotationElementId:t}=e;t&&u(this,le).isDeletedAnnotationElement(t)&&u(this,le).removeDeletedAnnotationElement(e)}detach(e){var t;u(this,vi).delete(e.id),(t=u(this,Ea))==null||t.removePointerInTextLayer(e.contentDiv),!u(this,Vl)&&e.annotationElementId&&u(this,le).addDeletedAnnotationElement(e)}remove(e){this.detach(e),u(this,le).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,u(this,wu)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(u(this,le).addDeletedAnnotationElement(e.annotationElementId),Re.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),u(this,le).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),u(this,le).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var t;if(!e.isAttachedToDOM)return;const{activeElement:s}=document;e.div.contains(s)&&!u(this,fr)&&(e._focusEventsAllowed=!1,x(this,fr,setTimeout(()=>{x(this,fr,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:u(this,le)._signal}),s.focus())},0))),e._structTreeParentId=(t=u(this,Ea))==null?void 0:t.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getNextId(){return u(this,le).getId()}get _signal(){return u(this,le)._signal}canCreateNewEmptyEditor(){var e;return(e=u(this,bi,Fg))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){u(this,le).updateToolbar(e),u(this,le).updateMode(e);const{offsetX:s,offsetY:r}=A(this,bi,Og).call(this),n=this.getNextId(),a=A(this,bi,Dg).call(this,{parent:this,id:n,x:s,y:r,uiManager:u(this,le),isCentered:!0,...t});a&&this.add(a)}deserialize(e){var t;return((t=u(vn,zn).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,u(this,le)))||null}createAndAddNewEditor(e,t,s={}){const r=this.getNextId(),n=A(this,bi,Dg).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:u(this,le),isCentered:t,...s});return n&&this.add(n),n}addNewEditor(){this.createAndAddNewEditor(A(this,bi,Og).call(this),!0)}setSelected(e){u(this,le).setSelected(e)}toggleSelected(e){u(this,le).toggleSelected(e)}isSelected(e){return u(this,le).isSelected(e)}unselect(e){u(this,le).unselect(e)}pointerup(e){const{isMac:t}=Jt.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&u(this,gn)){if(x(this,gn,!1),!u(this,$l)){x(this,$l,!0);return}if(u(this,le).getMode()===xe.STAMP){u(this,le).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(u(this,le).getMode()===xe.HIGHLIGHT&&this.enableTextSelection(),u(this,gn)){x(this,gn,!1);return}const{isMac:t}=Jt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;x(this,gn,!0);const s=u(this,le).getActive();x(this,$l,!s||s.isEmpty())}findNewParent(e,t,s){const r=u(this,le).findParent(t,s);return r===null||r===this?!1:(r.changeParent(e),!0)}destroy(){var e,t;((e=u(this,le).getActive())==null?void 0:e.parent)===this&&(u(this,le).commitOrRemove(),u(this,le).setActiveEditor(null)),u(this,fr)&&(clearTimeout(u(this,fr)),x(this,fr,null));for(const s of u(this,vi).values())(t=u(this,Ea))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,u(this,vi).clear(),u(this,le).removeLayer(this)}render({viewport:e}){this.viewport=e,Gn(this.div,e);for(const t of u(this,le).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){u(this,le).commitOrRemove(),A(this,bi,ld).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,Gn(this.div,{rotation:s}),t!==s)for(const r of u(this,vi).values())r.rotate(s);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return u(this,le).viewParameters.realScale}};Ea=new WeakMap,$l=new WeakMap,Fs=new WeakMap,Ca=new WeakMap,hr=new WeakMap,dr=new WeakMap,fr=new WeakMap,vi=new WeakMap,gn=new WeakMap,wu=new WeakMap,Vl=new WeakMap,Vt=new WeakMap,le=new WeakMap,zn=new WeakMap,bi=new WeakSet,J1=function(i){if(u(this,le).unselectAll(),i.target===u(this,Vt).div){const{isMac:e}=Jt.platform;if(i.button!==0||i.ctrlKey&&e)return;u(this,le).showAllEditors("highlight",!0,!0),u(this,Vt).div.classList.add("free"),N0.startHighlighting(this,u(this,le).direction==="ltr",i),u(this,Vt).div.addEventListener("pointerup",()=>{u(this,Vt).div.classList.remove("free")},{once:!0,signal:u(this,le)._signal}),i.preventDefault()}},Fg=function(){return u(ud,zn).get(u(this,le).getMode())},Dg=function(i){const e=u(this,bi,Fg);return e?new e.prototype.constructor(i):null},Og=function(){const{x:i,y:e,width:t,height:s}=this.div.getBoundingClientRect(),r=Math.max(0,i),n=Math.max(0,e),a=Math.min(window.innerWidth,i+t),o=Math.min(window.innerHeight,e+s),l=(r+a)/2-i,c=(n+o)/2-e,[h,d]=this.viewport.rotation%180===0?[l,c]:[c,l];return{offsetX:h,offsetY:d}},ld=function(){x(this,wu,!0);for(const i of u(this,vi).values())i.isEmpty()&&i.remove();x(this,wu,!1)},ge(ud,"_initialized",!1),E(ud,zn,new Map([VE,qE,KE,N0].map(i=>[i._editorType,i])));let XE=ud;var zs,cd,ot,bn,hd,zg,Gl,Wg,ek;const Ma=class Oi{constructor({pageIndex:e}){E(this,Gl),E(this,zs,null),E(this,cd,0),E(this,ot,new Map),E(this,bn,new Map),this.pageIndex=e}setParent(e){if(!u(this,zs)){x(this,zs,e);return}if(u(this,zs)!==e){if(u(this,ot).size>0)for(const t of u(this,ot).values())t.remove(),e.append(t);x(this,zs,e)}}static get _svgFactory(){return Se(this,"_svgFactory",new Ov)}highlight(e,t,s,r=!1){const n=Mi(this,cd)._++,a=A(this,Gl,Wg).call(this,e.box);a.classList.add("highlight"),e.free&&a.classList.add("free");const o=Oi._svgFactory.createElement("defs");a.append(o);const l=Oi._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",c),l.setAttribute("d",e.toSVGPath()),r&&u(this,bn).set(n,l);const h=A(this,Gl,ek).call(this,o,c),d=Oi._svgFactory.createElement("use");return a.append(d),a.setAttribute("fill",t),a.setAttribute("fill-opacity",s),d.setAttribute("href",`#${c}`),u(this,ot).set(n,a),{id:n,clipPathId:`url(#${h})`}}highlightOutline(e){const t=Mi(this,cd)._++,s=A(this,Gl,Wg).call(this,e.box);s.classList.add("highlightOutline");const r=Oi._svgFactory.createElement("defs");s.append(r);const n=Oi._svgFactory.createElement("path");r.append(n);const a=`path_p${this.pageIndex}_${t}`;n.setAttribute("id",a),n.setAttribute("d",e.toSVGPath()),n.setAttribute("vector-effect","non-scaling-stroke");let o;if(e.free){s.classList.add("free");const h=Oi._svgFactory.createElement("mask");r.append(h),o=`mask_p${this.pageIndex}_${t}`,h.setAttribute("id",o),h.setAttribute("maskUnits","objectBoundingBox");const d=Oi._svgFactory.createElement("rect");h.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");const f=Oi._svgFactory.createElement("use");h.append(f),f.setAttribute("href",`#${a}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}const l=Oi._svgFactory.createElement("use");s.append(l),l.setAttribute("href",`#${a}`),o&&l.setAttribute("mask",`url(#${o})`);const c=l.cloneNode();return s.append(c),l.classList.add("mainOutline"),c.classList.add("secondaryOutline"),u(this,ot).set(t,s),t}finalizeLine(e,t){const s=u(this,bn).get(e);u(this,bn).delete(e),this.updateBox(e,t.box),s.setAttribute("d",t.toSVGPath())}updateLine(e,t){u(this,ot).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}removeFreeHighlight(e){this.remove(e),u(this,bn).delete(e)}updatePath(e,t){u(this,bn).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var s;A(s=Oi,hd,zg).call(s,u(this,ot).get(e),t)}show(e,t){u(this,ot).get(e).classList.toggle("hidden",!t)}rotate(e,t){u(this,ot).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){u(this,ot).get(e).setAttribute("fill",t)}changeOpacity(e,t){u(this,ot).get(e).setAttribute("fill-opacity",t)}addClass(e,t){u(this,ot).get(e).classList.add(t)}removeClass(e,t){u(this,ot).get(e).classList.remove(t)}remove(e){u(this,zs)!==null&&(u(this,ot).get(e).remove(),u(this,ot).delete(e))}destroy(){x(this,zs,null);for(const e of u(this,ot).values())e.remove();u(this,ot).clear()}};zs=new WeakMap,cd=new WeakMap,ot=new WeakMap,bn=new WeakMap,hd=new WeakSet,zg=function(i,{x:e=0,y:t=0,width:s=1,height:r=1}={}){const{style:n}=i;n.top=`${100*t}%`,n.left=`${100*e}%`,n.width=`${100*s}%`,n.height=`${100*r}%`},Gl=new WeakSet,Wg=function(i){var e;const t=Ma._svgFactory.create(1,1,!0);return u(this,zs).append(t),t.setAttribute("aria-hidden",!0),A(e=Ma,hd,zg).call(e,t,i),t},ek=function(i,e){const t=Ma._svgFactory.createElement("clipPath");i.append(t);const s=`clip_${e}`;t.setAttribute("id",s),t.setAttribute("clipPathUnits","objectBoundingBox");const r=Ma._svgFactory.createElement("use");return t.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),s},E(Ma,hd);let YE=Ma;pe.AbortException;pe.AnnotationEditorLayer;pe.AnnotationEditorParamsType;pe.AnnotationEditorType;pe.AnnotationEditorUIManager;pe.AnnotationLayer;pe.AnnotationMode;pe.CMapCompressionType;pe.ColorPicker;pe.DOMSVGFactory;pe.DrawLayer;pe.FeatureTest;var QE=pe.GlobalWorkerOptions;pe.ImageKind;pe.InvalidPDFException;pe.MissingPDFException;pe.OPS;pe.Outliner;pe.PDFDataRangeTransport;pe.PDFDateString;pe.PDFWorker;pe.PasswordResponses;pe.PermissionFlag;pe.PixelsPerInch;pe.RenderingCancelledException;pe.TextLayer;pe.UnexpectedResponseException;pe.Util;pe.VerbosityLevel;pe.XfaLayer;pe.build;pe.createValidAbsoluteUrl;pe.fetchData;var ZE=pe.getDocument;pe.getFilenameFromUrl;pe.getPdfFilenameFromUrl;pe.getXfaPageViewport;pe.isDataScheme;pe.isPdfFile;pe.noContextMenu;pe.normalizeUnicode;pe.renderTextLayer;pe.setLayerDimensions;pe.shadow;pe.updateTextLayer;pe.version;function Ac(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var tk={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(i,e){(function(t){i.exports=t()})(function(){return function t(s,r,n){function a(c,h){if(!r[c]){if(!s[c]){var d=typeof Ac=="function"&&Ac;if(!h&&d)return d(c,!0);if(o)return o(c,!0);var f=new Error("Cannot find module '"+c+"'");throw f.code="MODULE_NOT_FOUND",f}var p=r[c]={exports:{}};s[c][0].call(p.exports,function(v){var m=s[c][1][v];return a(m||v)},p,p.exports,t,s,r,n)}return r[c].exports}for(var o=typeof Ac=="function"&&Ac,l=0;l<n.length;l++)a(n[l]);return a}({1:[function(t,s,r){var n=t("./utils"),a=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(l){for(var c,h,d,f,p,v,m,y=[],g=0,b=l.length,w=b,S=n.getTypeOf(l)!=="string";g<l.length;)w=b-g,d=S?(c=l[g++],h=g<b?l[g++]:0,g<b?l[g++]:0):(c=l.charCodeAt(g++),h=g<b?l.charCodeAt(g++):0,g<b?l.charCodeAt(g++):0),f=c>>2,p=(3&c)<<4|h>>4,v=1<w?(15&h)<<2|d>>6:64,m=2<w?63&d:64,y.push(o.charAt(f)+o.charAt(p)+o.charAt(v)+o.charAt(m));return y.join("")},r.decode=function(l){var c,h,d,f,p,v,m=0,y=0,g="data:";if(l.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");var b,w=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&w--,l.charAt(l.length-2)===o.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(b=a.uint8array?new Uint8Array(0|w):new Array(0|w);m<l.length;)c=o.indexOf(l.charAt(m++))<<2|(f=o.indexOf(l.charAt(m++)))>>4,h=(15&f)<<4|(p=o.indexOf(l.charAt(m++)))>>2,d=(3&p)<<6|(v=o.indexOf(l.charAt(m++))),b[y++]=c,p!==64&&(b[y++]=h),v!==64&&(b[y++]=d);return b}},{"./support":30,"./utils":32}],2:[function(t,s,r){var n=t("./external"),a=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function c(h,d,f,p,v){this.compressedSize=h,this.uncompressedSize=d,this.crc32=f,this.compression=p,this.compressedContent=v}c.prototype={getContentWorker:function(){var h=new a(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),d=this;return h.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new a(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(h,d,f){return h.pipe(new o).pipe(new l("uncompressedSize")).pipe(d.compressWorker(f)).pipe(new l("compressedSize")).withStreamInfo("compression",d)},s.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,s,r){var n=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,s,r){var n=t("./utils"),a=function(){for(var o,l=[],c=0;c<256;c++){o=c;for(var h=0;h<8;h++)o=1&o?3988292384^o>>>1:o>>>1;l[c]=o}return l}();s.exports=function(o,l){return o!==void 0&&o.length?n.getTypeOf(o)!=="string"?function(c,h,d,f){var p=a,v=f+d;c^=-1;for(var m=f;m<v;m++)c=c>>>8^p[255&(c^h[m])];return-1^c}(0|l,o,o.length,0):function(c,h,d,f){var p=a,v=f+d;c^=-1;for(var m=f;m<v;m++)c=c>>>8^p[255&(c^h.charCodeAt(m))];return-1^c}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(t,s,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,s,r){var n=null;n=typeof Promise<"u"?Promise:t("lie"),s.exports={Promise:n}},{lie:37}],7:[function(t,s,r){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=t("pako"),o=t("./utils"),l=t("./stream/GenericWorker"),c=n?"uint8array":"array";function h(d,f){l.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=f,this.meta={}}r.magic="\b\0",o.inherits(h,l),h.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(c,d.data),!1)},h.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(f){d.push({data:f,meta:d.meta})}},r.compressWorker=function(d){return new h("Deflate",d)},r.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,s,r){function n(p,v){var m,y="";for(m=0;m<v;m++)y+=String.fromCharCode(255&p),p>>>=8;return y}function a(p,v,m,y,g,b){var w,S,C=p.file,I=p.compression,P=b!==c.utf8encode,N=o.transformTo("string",b(C.name)),F=o.transformTo("string",c.utf8encode(C.name)),T=C.comment,V=o.transformTo("string",b(T)),L=o.transformTo("string",c.utf8encode(T)),W=F.length!==C.name.length,k=L.length!==T.length,U="",K="",j="",G=C.dir,H=C.date,Q={crc32:0,compressedSize:0,uncompressedSize:0};v&&!m||(Q.crc32=p.crc32,Q.compressedSize=p.compressedSize,Q.uncompressedSize=p.uncompressedSize);var z=0;v&&(z|=8),P||!W&&!k||(z|=2048);var D=0,se=0;G&&(D|=16),g==="UNIX"?(se=798,D|=function(J,ve){var fe=J;return J||(fe=ve?16893:33204),(65535&fe)<<16}(C.unixPermissions,G)):(se=20,D|=function(J){return 63&(J||0)}(C.dosPermissions)),w=H.getUTCHours(),w<<=6,w|=H.getUTCMinutes(),w<<=5,w|=H.getUTCSeconds()/2,S=H.getUTCFullYear()-1980,S<<=4,S|=H.getUTCMonth()+1,S<<=5,S|=H.getUTCDate(),W&&(K=n(1,1)+n(h(N),4)+F,U+="up"+n(K.length,2)+K),k&&(j=n(1,1)+n(h(V),4)+L,U+="uc"+n(j.length,2)+j);var ie="";return ie+=`
\0`,ie+=n(z,2),ie+=I.magic,ie+=n(w,2),ie+=n(S,2),ie+=n(Q.crc32,4),ie+=n(Q.compressedSize,4),ie+=n(Q.uncompressedSize,4),ie+=n(N.length,2),ie+=n(U.length,2),{fileRecord:d.LOCAL_FILE_HEADER+ie+N+U,dirRecord:d.CENTRAL_FILE_HEADER+n(se,2)+ie+n(V.length,2)+"\0\0\0\0"+n(D,4)+n(y,4)+N+U+V}}var o=t("../utils"),l=t("../stream/GenericWorker"),c=t("../utf8"),h=t("../crc32"),d=t("../signature");function f(p,v,m,y){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=m,this.encodeFileName=y,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(f,l),f.prototype.push=function(p){var v=p.meta.percent||0,m=this.entriesCount,y=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,l.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:m?(v+100*(m-y-1))/m:100}}))},f.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var v=this.streamFiles&&!p.file.dir;if(v){var m=a(p,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(p){this.accumulate=!1;var v=this.streamFiles&&!p.file.dir,m=a(p,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),v)this.push({data:function(y){return d.DATA_DESCRIPTOR+n(y.crc32,4)+n(y.compressedSize,4)+n(y.uncompressedSize,4)}(p),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var p=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var m=this.bytesWritten-p,y=function(g,b,w,S,C){var I=o.transformTo("string",C(S));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(g,2)+n(g,2)+n(b,4)+n(w,4)+n(I.length,2)+I}(this.dirRecords.length,m,p,this.zipComment,this.encodeFileName);this.push({data:y,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(p){this._sources.push(p);var v=this;return p.on("data",function(m){v.processChunk(m)}),p.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),p.on("error",function(m){v.error(m)}),this},f.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(p){var v=this._sources;if(!l.prototype.error.call(this,p))return!1;for(var m=0;m<v.length;m++)try{v[m].error(p)}catch{}return!0},f.prototype.lock=function(){l.prototype.lock.call(this);for(var p=this._sources,v=0;v<p.length;v++)p[v].lock()},s.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,s,r){var n=t("../compressions"),a=t("./ZipFileWorker");r.generateWorker=function(o,l,c){var h=new a(l.streamFiles,c,l.platform,l.encodeFileName),d=0;try{o.forEach(function(f,p){d++;var v=function(b,w){var S=b||w,C=n[S];if(!C)throw new Error(S+" is not a valid compression method !");return C}(p.options.compression,l.compression),m=p.options.compressionOptions||l.compressionOptions||{},y=p.dir,g=p.date;p._compressWorker(v,m).withStreamInfo("file",{name:f,dir:y,date:g,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(h)}),h.entriesCount=d}catch(f){h.error(f)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,s,r){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new n;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(n.prototype=t("./object")).loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.10.1",n.loadAsync=function(a,o){return new n().loadAsync(a,o)},n.external=t("./external"),s.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,s,r){var n=t("./utils"),a=t("./external"),o=t("./utf8"),l=t("./zipEntries"),c=t("./stream/Crc32Probe"),h=t("./nodejsUtils");function d(f){return new a.Promise(function(p,v){var m=f.decompressed.getContentWorker().pipe(new c);m.on("error",function(y){v(y)}).on("end",function(){m.streamInfo.crc32!==f.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}s.exports=function(f,p){var v=this;return p=n.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),h.isNode&&h.isStream(f)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",f,!0,p.optimizedBinaryString,p.base64).then(function(m){var y=new l(p);return y.load(m),y}).then(function(m){var y=[a.Promise.resolve(m)],g=m.files;if(p.checkCRC32)for(var b=0;b<g.length;b++)y.push(d(g[b]));return a.Promise.all(y)}).then(function(m){for(var y=m.shift(),g=y.files,b=0;b<g.length;b++){var w=g[b],S=w.fileNameStr,C=n.resolve(w.fileNameStr);v.file(C,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:p.createFolders}),w.dir||(v.file(C).unsafeOriginalName=S)}return y.zipComment.length&&(v.comment=y.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,s,r){var n=t("../utils"),a=t("../stream/GenericWorker");function o(l,c){a.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}n.inherits(o,a),o.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(h){c.push({data:h,meta:{percent:0}})}).on("error",function(h){c.isPaused?this.generatedError=h:c.error(h)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},s.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,s,r){var n=t("readable-stream").Readable;function a(o,l,c){n.call(this,l),this._helper=o;var h=this;o.on("data",function(d,f){h.push(d)||h._helper.pause(),c&&c(f)}).on("error",function(d){h.emit("error",d)}).on("end",function(){h.push(null)})}t("../utils").inherits(a,n),a.prototype._read=function(){this._helper.resume()},s.exports=a},{"../utils":32,"readable-stream":16}],14:[function(t,s,r){s.exports={isNode:typeof Buffer<"u",newBufferFrom:function(n,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,a);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,a)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var a=new Buffer(n);return a.fill(0),a},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(t,s,r){function n(C,I,P){var N,F=o.getTypeOf(I),T=o.extend(P||{},h);T.date=T.date||new Date,T.compression!==null&&(T.compression=T.compression.toUpperCase()),typeof T.unixPermissions=="string"&&(T.unixPermissions=parseInt(T.unixPermissions,8)),T.unixPermissions&&16384&T.unixPermissions&&(T.dir=!0),T.dosPermissions&&16&T.dosPermissions&&(T.dir=!0),T.dir&&(C=g(C)),T.createFolders&&(N=y(C))&&b.call(this,N,!0);var V=F==="string"&&T.binary===!1&&T.base64===!1;P&&P.binary!==void 0||(T.binary=!V),(I instanceof d&&I.uncompressedSize===0||T.dir||!I||I.length===0)&&(T.base64=!1,T.binary=!0,I="",T.compression="STORE",F="string");var L=null;L=I instanceof d||I instanceof l?I:v.isNode&&v.isStream(I)?new m(C,I):o.prepareContent(C,I,T.binary,T.optimizedBinaryString,T.base64);var W=new f(C,L,T);this.files[C]=W}var a=t("./utf8"),o=t("./utils"),l=t("./stream/GenericWorker"),c=t("./stream/StreamHelper"),h=t("./defaults"),d=t("./compressedObject"),f=t("./zipObject"),p=t("./generate"),v=t("./nodejsUtils"),m=t("./nodejs/NodejsStreamInputAdapter"),y=function(C){C.slice(-1)==="/"&&(C=C.substring(0,C.length-1));var I=C.lastIndexOf("/");return 0<I?C.substring(0,I):""},g=function(C){return C.slice(-1)!=="/"&&(C+="/"),C},b=function(C,I){return I=I!==void 0?I:h.createFolders,C=g(C),this.files[C]||n.call(this,C,null,{dir:!0,createFolders:I}),this.files[C]};function w(C){return Object.prototype.toString.call(C)==="[object RegExp]"}var S={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(C){var I,P,N;for(I in this.files)N=this.files[I],(P=I.slice(this.root.length,I.length))&&I.slice(0,this.root.length)===this.root&&C(P,N)},filter:function(C){var I=[];return this.forEach(function(P,N){C(P,N)&&I.push(N)}),I},file:function(C,I,P){if(arguments.length!==1)return C=this.root+C,n.call(this,C,I,P),this;if(w(C)){var N=C;return this.filter(function(T,V){return!V.dir&&N.test(T)})}var F=this.files[this.root+C];return F&&!F.dir?F:null},folder:function(C){if(!C)return this;if(w(C))return this.filter(function(F,T){return T.dir&&C.test(F)});var I=this.root+C,P=b.call(this,I),N=this.clone();return N.root=P.name,N},remove:function(C){C=this.root+C;var I=this.files[C];if(I||(C.slice(-1)!=="/"&&(C+="/"),I=this.files[C]),I&&!I.dir)delete this.files[C];else for(var P=this.filter(function(F,T){return T.name.slice(0,C.length)===C}),N=0;N<P.length;N++)delete this.files[P[N].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(C){var I,P={};try{if((P=o.extend(C||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=P.type.toLowerCase(),P.compression=P.compression.toUpperCase(),P.type==="binarystring"&&(P.type="string"),!P.type)throw new Error("No output type specified.");o.checkSupport(P.type),P.platform!=="darwin"&&P.platform!=="freebsd"&&P.platform!=="linux"&&P.platform!=="sunos"||(P.platform="UNIX"),P.platform==="win32"&&(P.platform="DOS");var N=P.comment||this.comment||"";I=p.generateWorker(this,P,N)}catch(F){(I=new l("error")).error(F)}return new c(I,P.type||"string",P.mimeType)},generateAsync:function(C,I){return this.generateInternalStream(C).accumulate(I)},generateNodeStream:function(C,I){return(C=C||{}).type||(C.type="nodebuffer"),this.generateInternalStream(C).toNodejsStream(I)}};s.exports=S},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,s,r){s.exports=t("stream")},{stream:void 0}],17:[function(t,s,r){var n=t("./DataReader");function a(o){n.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}t("../utils").inherits(a,n),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),c=o.charCodeAt(1),h=o.charCodeAt(2),d=o.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===l&&this.data[f+1]===c&&this.data[f+2]===h&&this.data[f+3]===d)return f-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),c=o.charCodeAt(1),h=o.charCodeAt(2),d=o.charCodeAt(3),f=this.readData(4);return l===f[0]&&c===f[1]&&h===f[2]&&d===f[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},s.exports=a},{"../utils":32,"./DataReader":18}],18:[function(t,s,r){var n=t("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,c=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=o,c},readString:function(o){return n.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},s.exports=a},{"../utils":32}],19:[function(t,s,r){var n=t("./Uint8ArrayReader");function a(o){n.call(this,o)}t("../utils").inherits(a,n),a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},s.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,s,r){var n=t("./DataReader");function a(o){n.call(this,o)}t("../utils").inherits(a,n),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},s.exports=a},{"../utils":32,"./DataReader":18}],21:[function(t,s,r){var n=t("./ArrayReader");function a(o){n.call(this,o)}t("../utils").inherits(a,n),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},s.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(t,s,r){var n=t("../utils"),a=t("../support"),o=t("./ArrayReader"),l=t("./StringReader"),c=t("./NodeBufferReader"),h=t("./Uint8ArrayReader");s.exports=function(d){var f=n.getTypeOf(d);return n.checkSupport(f),f!=="string"||a.uint8array?f==="nodebuffer"?new c(d):a.uint8array?new h(n.transformTo("uint8array",d)):new o(n.transformTo("array",d)):new l(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,s,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,s,r){var n=t("./GenericWorker"),a=t("../utils");function o(l){n.call(this,"ConvertWorker to "+l),this.destType=l}a.inherits(o,n),o.prototype.processChunk=function(l){this.push({data:a.transformTo(this.destType,l.data),meta:l.meta})},s.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,s,r){var n=t("./GenericWorker"),a=t("../crc32");function o(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,n),o.prototype.processChunk=function(l){this.streamInfo.crc32=a(l.data,this.streamInfo.crc32||0),this.push(l)},s.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,s,r){var n=t("../utils"),a=t("./GenericWorker");function o(l){a.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}n.inherits(o,a),o.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}a.prototype.processChunk.call(this,l)},s.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,s,r){var n=t("../utils"),a=t("./GenericWorker");function o(l){a.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(h){c.dataIsReady=!0,c.data=h,c.max=h&&h.length||0,c.type=n.getTypeOf(h),c.isPaused||c._tickAndRepeat()},function(h){c.error(h)})}n.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},s.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,s,r){function n(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var l=0;l<this._listeners[a].length;l++)this._listeners[a][l].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(l){o.processChunk(l)}),a.on("end",function(){o.end()}),a.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},s.exports=n},{}],29:[function(t,s,r){var n=t("../utils"),a=t("./ConvertWorker"),o=t("./GenericWorker"),l=t("../base64"),c=t("../support"),h=t("../external"),d=null;if(c.nodestream)try{d=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(v,m){return new h.Promise(function(y,g){var b=[],w=v._internalType,S=v._outputType,C=v._mimeType;v.on("data",function(I,P){b.push(I),m&&m(P)}).on("error",function(I){b=[],g(I)}).on("end",function(){try{var I=function(P,N,F){switch(P){case"blob":return n.newBlob(n.transformTo("arraybuffer",N),F);case"base64":return l.encode(N);default:return n.transformTo(P,N)}}(S,function(P,N){var F,T=0,V=null,L=0;for(F=0;F<N.length;F++)L+=N[F].length;switch(P){case"string":return N.join("");case"array":return Array.prototype.concat.apply([],N);case"uint8array":for(V=new Uint8Array(L),F=0;F<N.length;F++)V.set(N[F],T),T+=N[F].length;return V;case"nodebuffer":return Buffer.concat(N);default:throw new Error("concat : unsupported type '"+P+"'")}}(w,b),C);y(I)}catch(P){g(P)}b=[]}).resume()})}function p(v,m,y){var g=m;switch(m){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string"}try{this._internalType=g,this._outputType=m,this._mimeType=y,n.checkSupport(g),this._worker=v.pipe(new a(g)),v.lock()}catch(b){this._worker=new o("error"),this._worker.error(b)}}p.prototype={accumulate:function(v){return f(this,v)},on:function(v,m){var y=this;return v==="data"?this._worker.on(v,function(g){m.call(y,g.data,g.meta)}):this._worker.on(v,function(){n.delay(m,arguments,y)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},v)}},s.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,s,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var n=new ArrayBuffer(0);try{r.blob=new Blob([n],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(n),r.blob=a.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(t,s,r){for(var n=t("./utils"),a=t("./support"),o=t("./nodejsUtils"),l=t("./stream/GenericWorker"),c=new Array(256),h=0;h<256;h++)c[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;c[254]=c[254]=1;function d(){l.call(this,"utf-8 decode"),this.leftOver=null}function f(){l.call(this,"utf-8 encode")}r.utf8encode=function(p){return a.nodebuffer?o.newBufferFrom(p,"utf-8"):function(v){var m,y,g,b,w,S=v.length,C=0;for(b=0;b<S;b++)(64512&(y=v.charCodeAt(b)))==55296&&b+1<S&&(64512&(g=v.charCodeAt(b+1)))==56320&&(y=65536+(y-55296<<10)+(g-56320),b++),C+=y<128?1:y<2048?2:y<65536?3:4;for(m=a.uint8array?new Uint8Array(C):new Array(C),b=w=0;w<C;b++)(64512&(y=v.charCodeAt(b)))==55296&&b+1<S&&(64512&(g=v.charCodeAt(b+1)))==56320&&(y=65536+(y-55296<<10)+(g-56320),b++),y<128?m[w++]=y:(y<2048?m[w++]=192|y>>>6:(y<65536?m[w++]=224|y>>>12:(m[w++]=240|y>>>18,m[w++]=128|y>>>12&63),m[w++]=128|y>>>6&63),m[w++]=128|63&y);return m}(p)},r.utf8decode=function(p){return a.nodebuffer?n.transformTo("nodebuffer",p).toString("utf-8"):function(v){var m,y,g,b,w=v.length,S=new Array(2*w);for(m=y=0;m<w;)if((g=v[m++])<128)S[y++]=g;else if(4<(b=c[g]))S[y++]=65533,m+=b-1;else{for(g&=b===2?31:b===3?15:7;1<b&&m<w;)g=g<<6|63&v[m++],b--;1<b?S[y++]=65533:g<65536?S[y++]=g:(g-=65536,S[y++]=55296|g>>10&1023,S[y++]=56320|1023&g)}return S.length!==y&&(S.subarray?S=S.subarray(0,y):S.length=y),n.applyFromCharCode(S)}(p=n.transformTo(a.uint8array?"uint8array":"array",p))},n.inherits(d,l),d.prototype.processChunk=function(p){var v=n.transformTo(a.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var m=v;(v=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),v.set(m,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var y=function(b,w){var S;for((w=w||b.length)>b.length&&(w=b.length),S=w-1;0<=S&&(192&b[S])==128;)S--;return S<0||S===0?w:S+c[b[S]]>w?S:w}(v),g=v;y!==v.length&&(a.uint8array?(g=v.subarray(0,y),this.leftOver=v.subarray(y,v.length)):(g=v.slice(0,y),this.leftOver=v.slice(y,v.length))),this.push({data:r.utf8decode(g),meta:p.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=d,n.inherits(f,l),f.prototype.processChunk=function(p){this.push({data:r.utf8encode(p.data),meta:p.meta})},r.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,s,r){var n=t("./support"),a=t("./base64"),o=t("./nodejsUtils"),l=t("./external");function c(m){return m}function h(m,y){for(var g=0;g<m.length;++g)y[g]=255&m.charCodeAt(g);return y}t("setimmediate"),r.newBlob=function(m,y){r.checkSupport("blob");try{return new Blob([m],{type:y})}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(m),g.getBlob(y)}catch{throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(m,y,g){var b=[],w=0,S=m.length;if(S<=g)return String.fromCharCode.apply(null,m);for(;w<S;)y==="array"||y==="nodebuffer"?b.push(String.fromCharCode.apply(null,m.slice(w,Math.min(w+g,S)))):b.push(String.fromCharCode.apply(null,m.subarray(w,Math.min(w+g,S)))),w+=g;return b.join("")},stringifyByChar:function(m){for(var y="",g=0;g<m.length;g++)y+=String.fromCharCode(m[g]);return y},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function f(m){var y=65536,g=r.getTypeOf(m),b=!0;if(g==="uint8array"?b=d.applyCanBeUsed.uint8array:g==="nodebuffer"&&(b=d.applyCanBeUsed.nodebuffer),b)for(;1<y;)try{return d.stringifyByChunk(m,g,y)}catch{y=Math.floor(y/2)}return d.stringifyByChar(m)}function p(m,y){for(var g=0;g<m.length;g++)y[g]=m[g];return y}r.applyFromCharCode=f;var v={};v.string={string:c,array:function(m){return h(m,new Array(m.length))},arraybuffer:function(m){return v.string.uint8array(m).buffer},uint8array:function(m){return h(m,new Uint8Array(m.length))},nodebuffer:function(m){return h(m,o.allocBuffer(m.length))}},v.array={string:f,array:c,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return o.newBufferFrom(m)}},v.arraybuffer={string:function(m){return f(new Uint8Array(m))},array:function(m){return p(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:c,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return o.newBufferFrom(new Uint8Array(m))}},v.uint8array={string:f,array:function(m){return p(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:c,nodebuffer:function(m){return o.newBufferFrom(m)}},v.nodebuffer={string:f,array:function(m){return p(m,new Array(m.length))},arraybuffer:function(m){return v.nodebuffer.uint8array(m).buffer},uint8array:function(m){return p(m,new Uint8Array(m.length))},nodebuffer:c},r.transformTo=function(m,y){if(y=y||"",!m)return y;r.checkSupport(m);var g=r.getTypeOf(y);return v[g][m](y)},r.resolve=function(m){for(var y=m.split("/"),g=[],b=0;b<y.length;b++){var w=y[b];w==="."||w===""&&b!==0&&b!==y.length-1||(w===".."?g.pop():g.push(w))}return g.join("/")},r.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":n.nodebuffer&&o.isBuffer(m)?"nodebuffer":n.uint8array&&m instanceof Uint8Array?"uint8array":n.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(m){if(!n[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(m){var y,g,b="";for(g=0;g<(m||"").length;g++)b+="\\x"+((y=m.charCodeAt(g))<16?"0":"")+y.toString(16).toUpperCase();return b},r.delay=function(m,y,g){setImmediate(function(){m.apply(g||null,y||[])})},r.inherits=function(m,y){function g(){}g.prototype=y.prototype,m.prototype=new g},r.extend=function(){var m,y,g={};for(m=0;m<arguments.length;m++)for(y in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],y)&&g[y]===void 0&&(g[y]=arguments[m][y]);return g},r.prepareContent=function(m,y,g,b,w){return l.Promise.resolve(y).then(function(S){return n.blob&&(S instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(S))!==-1)&&typeof FileReader<"u"?new l.Promise(function(C,I){var P=new FileReader;P.onload=function(N){C(N.target.result)},P.onerror=function(N){I(N.target.error)},P.readAsArrayBuffer(S)}):S}).then(function(S){var C=r.getTypeOf(S);return C?(C==="arraybuffer"?S=r.transformTo("uint8array",S):C==="string"&&(w?S=a.decode(S):g&&b!==!0&&(S=function(I){return h(I,n.uint8array?new Uint8Array(I.length):new Array(I.length))}(S))),S):l.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,s,r){var n=t("./reader/readerFor"),a=t("./utils"),o=t("./signature"),l=t("./zipEntry"),c=t("./support");function h(d){this.files=[],this.loadOptions=d}h.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(f)+", expected "+a.pretty(d)+")")}},isSignature:function(d,f){var p=this.reader.index;this.reader.setIndex(d);var v=this.reader.readString(4)===f;return this.reader.setIndex(p),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),f=c.uint8array?"uint8array":"array",p=a.transformTo(f,d);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,f,p,v=this.zip64EndOfCentralSize-44;0<v;)d=this.reader.readInt(2),f=this.reader.readInt(4),p=this.reader.readData(f),this.zip64ExtensibleData[d]={id:d,length:f,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,f;for(d=0;d<this.files.length;d++)f=this.files[d],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(d=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var f=d;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var v=f-p;if(0<v)this.isSignature(f,o.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(d){this.reader=n(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},s.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,s,r){var n=t("./reader/readerFor"),a=t("./utils"),o=t("./compressedObject"),l=t("./crc32"),c=t("./utf8"),h=t("./compressions"),d=t("./support");function f(p,v){this.options=p,this.loadOptions=v}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var v,m;if(p.skip(22),this.fileNameLength=p.readInt(2),m=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(y){for(var g in h)if(Object.prototype.hasOwnProperty.call(h,g)&&h[g].magic===y)return h[g];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,v,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var v=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(v),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=n(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var v,m,y,g=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<g;)v=p.readInt(2),m=p.readInt(2),y=p.readData(m),this.extraFields[v]={id:v,length:m,value:y};p.setIndex(g)},handleUTF8:function(){var p=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var m=a.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var g=a.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(g)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var v=n(p.value);return v.readInt(1)!==1||l(this.fileName)!==v.readInt(4)?null:c.utf8decode(v.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var v=n(p.value);return v.readInt(1)!==1||l(this.fileComment)!==v.readInt(4)?null:c.utf8decode(v.readData(p.length-5))}return null}},s.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,s,r){function n(v,m,y){this.name=v,this.dir=y.dir,this.date=y.date,this.comment=y.comment,this.unixPermissions=y.unixPermissions,this.dosPermissions=y.dosPermissions,this._data=m,this._dataBinary=y.binary,this.options={compression:y.compression,compressionOptions:y.compressionOptions}}var a=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),l=t("./utf8"),c=t("./compressedObject"),h=t("./stream/GenericWorker");n.prototype={internalStream:function(v){var m=null,y="string";try{if(!v)throw new Error("No output type specified.");var g=(y=v.toLowerCase())==="string"||y==="text";y!=="binarystring"&&y!=="text"||(y="string"),m=this._decompressWorker();var b=!this._dataBinary;b&&!g&&(m=m.pipe(new l.Utf8EncodeWorker)),!b&&g&&(m=m.pipe(new l.Utf8DecodeWorker))}catch(w){(m=new h("error")).error(w)}return new a(m,y,"")},async:function(v,m){return this.internalStream(v).accumulate(m)},nodeStream:function(v,m){return this.internalStream(v||"nodebuffer").toNodejsStream(m)},_compressWorker:function(v,m){if(this._data instanceof c&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var y=this._decompressWorker();return this._dataBinary||(y=y.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(y,v,m)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof h?this._data:new o(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<d.length;p++)n.prototype[d[p]]=f;s.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,s,r){(function(n){var a,o,l=n.MutationObserver||n.WebKitMutationObserver;if(l){var c=0,h=new l(v),d=n.document.createTextNode("");h.observe(d,{characterData:!0}),a=function(){d.data=c=++c%2}}else if(n.setImmediate||n.MessageChannel===void 0)a="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var m=n.document.createElement("script");m.onreadystatechange=function(){v(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},n.document.documentElement.appendChild(m)}:function(){setTimeout(v,0)};else{var f=new n.MessageChannel;f.port1.onmessage=v,a=function(){f.port2.postMessage(0)}}var p=[];function v(){var m,y;o=!0;for(var g=p.length;g;){for(y=p,p=[],m=-1;++m<g;)y[m]();g=p.length}o=!1}s.exports=function(m){p.push(m)!==1||o||a()}}).call(this,typeof Zu<"u"?Zu:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,s,r){var n=t("immediate");function a(){}var o={},l=["REJECTED"],c=["FULFILLED"],h=["PENDING"];function d(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,g!==a&&m(this,g)}function f(g,b,w){this.promise=g,typeof b=="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function p(g,b,w){n(function(){var S;try{S=b(w)}catch(C){return o.reject(g,C)}S===g?o.reject(g,new TypeError("Cannot resolve promise with itself")):o.resolve(g,S)})}function v(g){var b=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof b=="function")return function(){b.apply(g,arguments)}}function m(g,b){var w=!1;function S(P){w||(w=!0,o.reject(g,P))}function C(P){w||(w=!0,o.resolve(g,P))}var I=y(function(){b(C,S)});I.status==="error"&&S(I.value)}function y(g,b){var w={};try{w.value=g(b),w.status="success"}catch(S){w.status="error",w.value=S}return w}(s.exports=d).prototype.finally=function(g){if(typeof g!="function")return this;var b=this.constructor;return this.then(function(w){return b.resolve(g()).then(function(){return w})},function(w){return b.resolve(g()).then(function(){throw w})})},d.prototype.catch=function(g){return this.then(null,g)},d.prototype.then=function(g,b){if(typeof g!="function"&&this.state===c||typeof b!="function"&&this.state===l)return this;var w=new this.constructor(a);return this.state!==h?p(w,this.state===c?g:b,this.outcome):this.queue.push(new f(w,g,b)),w},f.prototype.callFulfilled=function(g){o.resolve(this.promise,g)},f.prototype.otherCallFulfilled=function(g){p(this.promise,this.onFulfilled,g)},f.prototype.callRejected=function(g){o.reject(this.promise,g)},f.prototype.otherCallRejected=function(g){p(this.promise,this.onRejected,g)},o.resolve=function(g,b){var w=y(v,b);if(w.status==="error")return o.reject(g,w.value);var S=w.value;if(S)m(g,S);else{g.state=c,g.outcome=b;for(var C=-1,I=g.queue.length;++C<I;)g.queue[C].callFulfilled(b)}return g},o.reject=function(g,b){g.state=l,g.outcome=b;for(var w=-1,S=g.queue.length;++w<S;)g.queue[w].callRejected(b);return g},d.resolve=function(g){return g instanceof this?g:o.resolve(new this(a),g)},d.reject=function(g){var b=new this(a);return o.reject(b,g)},d.all=function(g){var b=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=g.length,S=!1;if(!w)return this.resolve([]);for(var C=new Array(w),I=0,P=-1,N=new this(a);++P<w;)F(g[P],P);return N;function F(T,V){b.resolve(T).then(function(L){C[V]=L,++I!==w||S||(S=!0,o.resolve(N,C))},function(L){S||(S=!0,o.reject(N,L))})}},d.race=function(g){var b=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=g.length,S=!1;if(!w)return this.resolve([]);for(var C=-1,I=new this(a);++C<w;)P=g[C],b.resolve(P).then(function(N){S||(S=!0,o.resolve(I,N))},function(N){S||(S=!0,o.reject(I,N))});var P;return I}},{immediate:36}],38:[function(t,s,r){var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),s.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,s,r){var n=t("./zlib/deflate"),a=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/messages"),c=t("./zlib/zstream"),h=Object.prototype.toString,d=0,f=-1,p=0,v=8;function m(g){if(!(this instanceof m))return new m(g);this.options=a.assign({level:f,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},g||{});var b=this.options;b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var w=n.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(w!==d)throw new Error(l[w]);if(b.header&&n.deflateSetHeader(this.strm,b.header),b.dictionary){var S;if(S=typeof b.dictionary=="string"?o.string2buf(b.dictionary):h.call(b.dictionary)==="[object ArrayBuffer]"?new Uint8Array(b.dictionary):b.dictionary,(w=n.deflateSetDictionary(this.strm,S))!==d)throw new Error(l[w]);this._dict_set=!0}}function y(g,b){var w=new m(b);if(w.push(g,!0),w.err)throw w.msg||l[w.err];return w.result}m.prototype.push=function(g,b){var w,S,C=this.strm,I=this.options.chunkSize;if(this.ended)return!1;S=b===~~b?b:b===!0?4:0,typeof g=="string"?C.input=o.string2buf(g):h.call(g)==="[object ArrayBuffer]"?C.input=new Uint8Array(g):C.input=g,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new a.Buf8(I),C.next_out=0,C.avail_out=I),(w=n.deflate(C,S))!==1&&w!==d)return this.onEnd(w),!(this.ended=!0);C.avail_out!==0&&(C.avail_in!==0||S!==4&&S!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(C.output,C.next_out))):this.onData(a.shrinkBuf(C.output,C.next_out)))}while((0<C.avail_in||C.avail_out===0)&&w!==1);return S===4?(w=n.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===d):S!==2||(this.onEnd(d),!(C.avail_out=0))},m.prototype.onData=function(g){this.chunks.push(g)},m.prototype.onEnd=function(g){g===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},r.Deflate=m,r.deflate=y,r.deflateRaw=function(g,b){return(b=b||{}).raw=!0,y(g,b)},r.gzip=function(g,b){return(b=b||{}).gzip=!0,y(g,b)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,s,r){var n=t("./zlib/inflate"),a=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/constants"),c=t("./zlib/messages"),h=t("./zlib/zstream"),d=t("./zlib/gzheader"),f=Object.prototype.toString;function p(m){if(!(this instanceof p))return new p(m);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},m||{});var y=this.options;y.raw&&0<=y.windowBits&&y.windowBits<16&&(y.windowBits=-y.windowBits,y.windowBits===0&&(y.windowBits=-15)),!(0<=y.windowBits&&y.windowBits<16)||m&&m.windowBits||(y.windowBits+=32),15<y.windowBits&&y.windowBits<48&&!(15&y.windowBits)&&(y.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var g=n.inflateInit2(this.strm,y.windowBits);if(g!==l.Z_OK)throw new Error(c[g]);this.header=new d,n.inflateGetHeader(this.strm,this.header)}function v(m,y){var g=new p(y);if(g.push(m,!0),g.err)throw g.msg||c[g.err];return g.result}p.prototype.push=function(m,y){var g,b,w,S,C,I,P=this.strm,N=this.options.chunkSize,F=this.options.dictionary,T=!1;if(this.ended)return!1;b=y===~~y?y:y===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof m=="string"?P.input=o.binstring2buf(m):f.call(m)==="[object ArrayBuffer]"?P.input=new Uint8Array(m):P.input=m,P.next_in=0,P.avail_in=P.input.length;do{if(P.avail_out===0&&(P.output=new a.Buf8(N),P.next_out=0,P.avail_out=N),(g=n.inflate(P,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&F&&(I=typeof F=="string"?o.string2buf(F):f.call(F)==="[object ArrayBuffer]"?new Uint8Array(F):F,g=n.inflateSetDictionary(this.strm,I)),g===l.Z_BUF_ERROR&&T===!0&&(g=l.Z_OK,T=!1),g!==l.Z_STREAM_END&&g!==l.Z_OK)return this.onEnd(g),!(this.ended=!0);P.next_out&&(P.avail_out!==0&&g!==l.Z_STREAM_END&&(P.avail_in!==0||b!==l.Z_FINISH&&b!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(w=o.utf8border(P.output,P.next_out),S=P.next_out-w,C=o.buf2string(P.output,w),P.next_out=S,P.avail_out=N-S,S&&a.arraySet(P.output,P.output,w,S,0),this.onData(C)):this.onData(a.shrinkBuf(P.output,P.next_out)))),P.avail_in===0&&P.avail_out===0&&(T=!0)}while((0<P.avail_in||P.avail_out===0)&&g!==l.Z_STREAM_END);return g===l.Z_STREAM_END&&(b=l.Z_FINISH),b===l.Z_FINISH?(g=n.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===l.Z_OK):b!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(P.avail_out=0))},p.prototype.onData=function(m){this.chunks.push(m)},p.prototype.onEnd=function(m){m===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},r.Inflate=p,r.inflate=v,r.inflateRaw=function(m,y){return(y=y||{}).raw=!0,v(m,y)},r.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,s,r){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var h=c.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var d in h)h.hasOwnProperty(d)&&(l[d]=h[d])}}return l},r.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var a={arraySet:function(l,c,h,d,f){if(c.subarray&&l.subarray)l.set(c.subarray(h,h+d),f);else for(var p=0;p<d;p++)l[f+p]=c[h+p]},flattenChunks:function(l){var c,h,d,f,p,v;for(c=d=0,h=l.length;c<h;c++)d+=l[c].length;for(v=new Uint8Array(d),c=f=0,h=l.length;c<h;c++)p=l[c],v.set(p,f),f+=p.length;return v}},o={arraySet:function(l,c,h,d,f){for(var p=0;p<d;p++)l[f+p]=c[h+p]},flattenChunks:function(l){return[].concat.apply([],l)}};r.setTyped=function(l){l?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,a)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(n)},{}],42:[function(t,s,r){var n=t("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new n.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function h(d,f){if(f<65537&&(d.subarray&&o||!d.subarray&&a))return String.fromCharCode.apply(null,n.shrinkBuf(d,f));for(var p="",v=0;v<f;v++)p+=String.fromCharCode(d[v]);return p}l[254]=l[254]=1,r.string2buf=function(d){var f,p,v,m,y,g=d.length,b=0;for(m=0;m<g;m++)(64512&(p=d.charCodeAt(m)))==55296&&m+1<g&&(64512&(v=d.charCodeAt(m+1)))==56320&&(p=65536+(p-55296<<10)+(v-56320),m++),b+=p<128?1:p<2048?2:p<65536?3:4;for(f=new n.Buf8(b),m=y=0;y<b;m++)(64512&(p=d.charCodeAt(m)))==55296&&m+1<g&&(64512&(v=d.charCodeAt(m+1)))==56320&&(p=65536+(p-55296<<10)+(v-56320),m++),p<128?f[y++]=p:(p<2048?f[y++]=192|p>>>6:(p<65536?f[y++]=224|p>>>12:(f[y++]=240|p>>>18,f[y++]=128|p>>>12&63),f[y++]=128|p>>>6&63),f[y++]=128|63&p);return f},r.buf2binstring=function(d){return h(d,d.length)},r.binstring2buf=function(d){for(var f=new n.Buf8(d.length),p=0,v=f.length;p<v;p++)f[p]=d.charCodeAt(p);return f},r.buf2string=function(d,f){var p,v,m,y,g=f||d.length,b=new Array(2*g);for(p=v=0;p<g;)if((m=d[p++])<128)b[v++]=m;else if(4<(y=l[m]))b[v++]=65533,p+=y-1;else{for(m&=y===2?31:y===3?15:7;1<y&&p<g;)m=m<<6|63&d[p++],y--;1<y?b[v++]=65533:m<65536?b[v++]=m:(m-=65536,b[v++]=55296|m>>10&1023,b[v++]=56320|1023&m)}return h(b,v)},r.utf8border=function(d,f){var p;for((f=f||d.length)>d.length&&(f=d.length),p=f-1;0<=p&&(192&d[p])==128;)p--;return p<0||p===0?f:p+l[d[p]]>f?p:f}},{"./common":41}],43:[function(t,s,r){s.exports=function(n,a,o,l){for(var c=65535&n|0,h=n>>>16&65535|0,d=0;o!==0;){for(o-=d=2e3<o?2e3:o;h=h+(c=c+a[l++]|0)|0,--d;);c%=65521,h%=65521}return c|h<<16|0}},{}],44:[function(t,s,r){s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,s,r){var n=function(){for(var a,o=[],l=0;l<256;l++){a=l;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;o[l]=a}return o}();s.exports=function(a,o,l,c){var h=n,d=c+l;a^=-1;for(var f=c;f<d;f++)a=a>>>8^h[255&(a^o[f])];return-1^a}},{}],46:[function(t,s,r){var n,a=t("../utils/common"),o=t("./trees"),l=t("./adler32"),c=t("./crc32"),h=t("./messages"),d=0,f=4,p=0,v=-2,m=-1,y=4,g=2,b=8,w=9,S=286,C=30,I=19,P=2*S+1,N=15,F=3,T=258,V=T+F+1,L=42,W=113,k=1,U=2,K=3,j=4;function G(_,q){return _.msg=h[q],q}function H(_){return(_<<1)-(4<_?9:0)}function Q(_){for(var q=_.length;0<=--q;)_[q]=0}function z(_){var q=_.state,$=q.pending;$>_.avail_out&&($=_.avail_out),$!==0&&(a.arraySet(_.output,q.pending_buf,q.pending_out,$,_.next_out),_.next_out+=$,q.pending_out+=$,_.total_out+=$,_.avail_out-=$,q.pending-=$,q.pending===0&&(q.pending_out=0))}function D(_,q){o._tr_flush_block(_,0<=_.block_start?_.block_start:-1,_.strstart-_.block_start,q),_.block_start=_.strstart,z(_.strm)}function se(_,q){_.pending_buf[_.pending++]=q}function ie(_,q){_.pending_buf[_.pending++]=q>>>8&255,_.pending_buf[_.pending++]=255&q}function J(_,q){var $,R,M=_.max_chain_length,O=_.strstart,X=_.prev_length,Y=_.nice_match,B=_.strstart>_.w_size-V?_.strstart-(_.w_size-V):0,ee=_.window,re=_.w_mask,te=_.prev,ce=_.strstart+T,Ie=ee[O+X-1],_e=ee[O+X];_.prev_length>=_.good_match&&(M>>=2),Y>_.lookahead&&(Y=_.lookahead);do if(ee[($=q)+X]===_e&&ee[$+X-1]===Ie&&ee[$]===ee[O]&&ee[++$]===ee[O+1]){O+=2,$++;do;while(ee[++O]===ee[++$]&&ee[++O]===ee[++$]&&ee[++O]===ee[++$]&&ee[++O]===ee[++$]&&ee[++O]===ee[++$]&&ee[++O]===ee[++$]&&ee[++O]===ee[++$]&&ee[++O]===ee[++$]&&O<ce);if(R=T-(ce-O),O=ce-T,X<R){if(_.match_start=q,Y<=(X=R))break;Ie=ee[O+X-1],_e=ee[O+X]}}while((q=te[q&re])>B&&--M!=0);return X<=_.lookahead?X:_.lookahead}function ve(_){var q,$,R,M,O,X,Y,B,ee,re,te=_.w_size;do{if(M=_.window_size-_.lookahead-_.strstart,_.strstart>=te+(te-V)){for(a.arraySet(_.window,_.window,te,te,0),_.match_start-=te,_.strstart-=te,_.block_start-=te,q=$=_.hash_size;R=_.head[--q],_.head[q]=te<=R?R-te:0,--$;);for(q=$=te;R=_.prev[--q],_.prev[q]=te<=R?R-te:0,--$;);M+=te}if(_.strm.avail_in===0)break;if(X=_.strm,Y=_.window,B=_.strstart+_.lookahead,ee=M,re=void 0,re=X.avail_in,ee<re&&(re=ee),$=re===0?0:(X.avail_in-=re,a.arraySet(Y,X.input,X.next_in,re,B),X.state.wrap===1?X.adler=l(X.adler,Y,re,B):X.state.wrap===2&&(X.adler=c(X.adler,Y,re,B)),X.next_in+=re,X.total_in+=re,re),_.lookahead+=$,_.lookahead+_.insert>=F)for(O=_.strstart-_.insert,_.ins_h=_.window[O],_.ins_h=(_.ins_h<<_.hash_shift^_.window[O+1])&_.hash_mask;_.insert&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[O+F-1])&_.hash_mask,_.prev[O&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=O,O++,_.insert--,!(_.lookahead+_.insert<F)););}while(_.lookahead<V&&_.strm.avail_in!==0)}function fe(_,q){for(var $,R;;){if(_.lookahead<V){if(ve(_),_.lookahead<V&&q===d)return k;if(_.lookahead===0)break}if($=0,_.lookahead>=F&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+F-1])&_.hash_mask,$=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),$!==0&&_.strstart-$<=_.w_size-V&&(_.match_length=J(_,$)),_.match_length>=F)if(R=o._tr_tally(_,_.strstart-_.match_start,_.match_length-F),_.lookahead-=_.match_length,_.match_length<=_.max_lazy_match&&_.lookahead>=F){for(_.match_length--;_.strstart++,_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+F-1])&_.hash_mask,$=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart,--_.match_length!=0;);_.strstart++}else _.strstart+=_.match_length,_.match_length=0,_.ins_h=_.window[_.strstart],_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+1])&_.hash_mask;else R=o._tr_tally(_,0,_.window[_.strstart]),_.lookahead--,_.strstart++;if(R&&(D(_,!1),_.strm.avail_out===0))return k}return _.insert=_.strstart<F-1?_.strstart:F-1,q===f?(D(_,!0),_.strm.avail_out===0?K:j):_.last_lit&&(D(_,!1),_.strm.avail_out===0)?k:U}function ye(_,q){for(var $,R,M;;){if(_.lookahead<V){if(ve(_),_.lookahead<V&&q===d)return k;if(_.lookahead===0)break}if($=0,_.lookahead>=F&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+F-1])&_.hash_mask,$=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),_.prev_length=_.match_length,_.prev_match=_.match_start,_.match_length=F-1,$!==0&&_.prev_length<_.max_lazy_match&&_.strstart-$<=_.w_size-V&&(_.match_length=J(_,$),_.match_length<=5&&(_.strategy===1||_.match_length===F&&4096<_.strstart-_.match_start)&&(_.match_length=F-1)),_.prev_length>=F&&_.match_length<=_.prev_length){for(M=_.strstart+_.lookahead-F,R=o._tr_tally(_,_.strstart-1-_.prev_match,_.prev_length-F),_.lookahead-=_.prev_length-1,_.prev_length-=2;++_.strstart<=M&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+F-1])&_.hash_mask,$=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),--_.prev_length!=0;);if(_.match_available=0,_.match_length=F-1,_.strstart++,R&&(D(_,!1),_.strm.avail_out===0))return k}else if(_.match_available){if((R=o._tr_tally(_,0,_.window[_.strstart-1]))&&D(_,!1),_.strstart++,_.lookahead--,_.strm.avail_out===0)return k}else _.match_available=1,_.strstart++,_.lookahead--}return _.match_available&&(R=o._tr_tally(_,0,_.window[_.strstart-1]),_.match_available=0),_.insert=_.strstart<F-1?_.strstart:F-1,q===f?(D(_,!0),_.strm.avail_out===0?K:j):_.last_lit&&(D(_,!1),_.strm.avail_out===0)?k:U}function Ee(_,q,$,R,M){this.good_length=_,this.max_lazy=q,this.nice_length=$,this.max_chain=R,this.func=M}function at(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*P),this.dyn_dtree=new a.Buf16(2*(2*C+1)),this.bl_tree=new a.Buf16(2*(2*I+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(N+1),this.heap=new a.Buf16(2*S+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*S+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ve(_){var q;return _&&_.state?(_.total_in=_.total_out=0,_.data_type=g,(q=_.state).pending=0,q.pending_out=0,q.wrap<0&&(q.wrap=-q.wrap),q.status=q.wrap?L:W,_.adler=q.wrap===2?0:1,q.last_flush=d,o._tr_init(q),p):G(_,v)}function qi(_){var q=Ve(_);return q===p&&function($){$.window_size=2*$.w_size,Q($.head),$.max_lazy_match=n[$.level].max_lazy,$.good_match=n[$.level].good_length,$.nice_match=n[$.level].nice_length,$.max_chain_length=n[$.level].max_chain,$.strstart=0,$.block_start=0,$.lookahead=0,$.insert=0,$.match_length=$.prev_length=F-1,$.match_available=0,$.ins_h=0}(_.state),q}function Ii(_,q,$,R,M,O){if(!_)return v;var X=1;if(q===m&&(q=6),R<0?(X=0,R=-R):15<R&&(X=2,R-=16),M<1||w<M||$!==b||R<8||15<R||q<0||9<q||O<0||y<O)return G(_,v);R===8&&(R=9);var Y=new at;return(_.state=Y).strm=_,Y.wrap=X,Y.gzhead=null,Y.w_bits=R,Y.w_size=1<<Y.w_bits,Y.w_mask=Y.w_size-1,Y.hash_bits=M+7,Y.hash_size=1<<Y.hash_bits,Y.hash_mask=Y.hash_size-1,Y.hash_shift=~~((Y.hash_bits+F-1)/F),Y.window=new a.Buf8(2*Y.w_size),Y.head=new a.Buf16(Y.hash_size),Y.prev=new a.Buf16(Y.w_size),Y.lit_bufsize=1<<M+6,Y.pending_buf_size=4*Y.lit_bufsize,Y.pending_buf=new a.Buf8(Y.pending_buf_size),Y.d_buf=1*Y.lit_bufsize,Y.l_buf=3*Y.lit_bufsize,Y.level=q,Y.strategy=O,Y.method=$,qi(_)}n=[new Ee(0,0,0,0,function(_,q){var $=65535;for($>_.pending_buf_size-5&&($=_.pending_buf_size-5);;){if(_.lookahead<=1){if(ve(_),_.lookahead===0&&q===d)return k;if(_.lookahead===0)break}_.strstart+=_.lookahead,_.lookahead=0;var R=_.block_start+$;if((_.strstart===0||_.strstart>=R)&&(_.lookahead=_.strstart-R,_.strstart=R,D(_,!1),_.strm.avail_out===0)||_.strstart-_.block_start>=_.w_size-V&&(D(_,!1),_.strm.avail_out===0))return k}return _.insert=0,q===f?(D(_,!0),_.strm.avail_out===0?K:j):(_.strstart>_.block_start&&(D(_,!1),_.strm.avail_out),k)}),new Ee(4,4,8,4,fe),new Ee(4,5,16,8,fe),new Ee(4,6,32,32,fe),new Ee(4,4,16,16,ye),new Ee(8,16,32,32,ye),new Ee(8,16,128,128,ye),new Ee(8,32,128,256,ye),new Ee(32,128,258,1024,ye),new Ee(32,258,258,4096,ye)],r.deflateInit=function(_,q){return Ii(_,q,b,15,8,0)},r.deflateInit2=Ii,r.deflateReset=qi,r.deflateResetKeep=Ve,r.deflateSetHeader=function(_,q){return _&&_.state?_.state.wrap!==2?v:(_.state.gzhead=q,p):v},r.deflate=function(_,q){var $,R,M,O;if(!_||!_.state||5<q||q<0)return _?G(_,v):v;if(R=_.state,!_.output||!_.input&&_.avail_in!==0||R.status===666&&q!==f)return G(_,_.avail_out===0?-5:v);if(R.strm=_,$=R.last_flush,R.last_flush=q,R.status===L)if(R.wrap===2)_.adler=0,se(R,31),se(R,139),se(R,8),R.gzhead?(se(R,(R.gzhead.text?1:0)+(R.gzhead.hcrc?2:0)+(R.gzhead.extra?4:0)+(R.gzhead.name?8:0)+(R.gzhead.comment?16:0)),se(R,255&R.gzhead.time),se(R,R.gzhead.time>>8&255),se(R,R.gzhead.time>>16&255),se(R,R.gzhead.time>>24&255),se(R,R.level===9?2:2<=R.strategy||R.level<2?4:0),se(R,255&R.gzhead.os),R.gzhead.extra&&R.gzhead.extra.length&&(se(R,255&R.gzhead.extra.length),se(R,R.gzhead.extra.length>>8&255)),R.gzhead.hcrc&&(_.adler=c(_.adler,R.pending_buf,R.pending,0)),R.gzindex=0,R.status=69):(se(R,0),se(R,0),se(R,0),se(R,0),se(R,0),se(R,R.level===9?2:2<=R.strategy||R.level<2?4:0),se(R,3),R.status=W);else{var X=b+(R.w_bits-8<<4)<<8;X|=(2<=R.strategy||R.level<2?0:R.level<6?1:R.level===6?2:3)<<6,R.strstart!==0&&(X|=32),X+=31-X%31,R.status=W,ie(R,X),R.strstart!==0&&(ie(R,_.adler>>>16),ie(R,65535&_.adler)),_.adler=1}if(R.status===69)if(R.gzhead.extra){for(M=R.pending;R.gzindex<(65535&R.gzhead.extra.length)&&(R.pending!==R.pending_buf_size||(R.gzhead.hcrc&&R.pending>M&&(_.adler=c(_.adler,R.pending_buf,R.pending-M,M)),z(_),M=R.pending,R.pending!==R.pending_buf_size));)se(R,255&R.gzhead.extra[R.gzindex]),R.gzindex++;R.gzhead.hcrc&&R.pending>M&&(_.adler=c(_.adler,R.pending_buf,R.pending-M,M)),R.gzindex===R.gzhead.extra.length&&(R.gzindex=0,R.status=73)}else R.status=73;if(R.status===73)if(R.gzhead.name){M=R.pending;do{if(R.pending===R.pending_buf_size&&(R.gzhead.hcrc&&R.pending>M&&(_.adler=c(_.adler,R.pending_buf,R.pending-M,M)),z(_),M=R.pending,R.pending===R.pending_buf_size)){O=1;break}O=R.gzindex<R.gzhead.name.length?255&R.gzhead.name.charCodeAt(R.gzindex++):0,se(R,O)}while(O!==0);R.gzhead.hcrc&&R.pending>M&&(_.adler=c(_.adler,R.pending_buf,R.pending-M,M)),O===0&&(R.gzindex=0,R.status=91)}else R.status=91;if(R.status===91)if(R.gzhead.comment){M=R.pending;do{if(R.pending===R.pending_buf_size&&(R.gzhead.hcrc&&R.pending>M&&(_.adler=c(_.adler,R.pending_buf,R.pending-M,M)),z(_),M=R.pending,R.pending===R.pending_buf_size)){O=1;break}O=R.gzindex<R.gzhead.comment.length?255&R.gzhead.comment.charCodeAt(R.gzindex++):0,se(R,O)}while(O!==0);R.gzhead.hcrc&&R.pending>M&&(_.adler=c(_.adler,R.pending_buf,R.pending-M,M)),O===0&&(R.status=103)}else R.status=103;if(R.status===103&&(R.gzhead.hcrc?(R.pending+2>R.pending_buf_size&&z(_),R.pending+2<=R.pending_buf_size&&(se(R,255&_.adler),se(R,_.adler>>8&255),_.adler=0,R.status=W)):R.status=W),R.pending!==0){if(z(_),_.avail_out===0)return R.last_flush=-1,p}else if(_.avail_in===0&&H(q)<=H($)&&q!==f)return G(_,-5);if(R.status===666&&_.avail_in!==0)return G(_,-5);if(_.avail_in!==0||R.lookahead!==0||q!==d&&R.status!==666){var Y=R.strategy===2?function(B,ee){for(var re;;){if(B.lookahead===0&&(ve(B),B.lookahead===0)){if(ee===d)return k;break}if(B.match_length=0,re=o._tr_tally(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++,re&&(D(B,!1),B.strm.avail_out===0))return k}return B.insert=0,ee===f?(D(B,!0),B.strm.avail_out===0?K:j):B.last_lit&&(D(B,!1),B.strm.avail_out===0)?k:U}(R,q):R.strategy===3?function(B,ee){for(var re,te,ce,Ie,_e=B.window;;){if(B.lookahead<=T){if(ve(B),B.lookahead<=T&&ee===d)return k;if(B.lookahead===0)break}if(B.match_length=0,B.lookahead>=F&&0<B.strstart&&(te=_e[ce=B.strstart-1])===_e[++ce]&&te===_e[++ce]&&te===_e[++ce]){Ie=B.strstart+T;do;while(te===_e[++ce]&&te===_e[++ce]&&te===_e[++ce]&&te===_e[++ce]&&te===_e[++ce]&&te===_e[++ce]&&te===_e[++ce]&&te===_e[++ce]&&ce<Ie);B.match_length=T-(Ie-ce),B.match_length>B.lookahead&&(B.match_length=B.lookahead)}if(B.match_length>=F?(re=o._tr_tally(B,1,B.match_length-F),B.lookahead-=B.match_length,B.strstart+=B.match_length,B.match_length=0):(re=o._tr_tally(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++),re&&(D(B,!1),B.strm.avail_out===0))return k}return B.insert=0,ee===f?(D(B,!0),B.strm.avail_out===0?K:j):B.last_lit&&(D(B,!1),B.strm.avail_out===0)?k:U}(R,q):n[R.level].func(R,q);if(Y!==K&&Y!==j||(R.status=666),Y===k||Y===K)return _.avail_out===0&&(R.last_flush=-1),p;if(Y===U&&(q===1?o._tr_align(R):q!==5&&(o._tr_stored_block(R,0,0,!1),q===3&&(Q(R.head),R.lookahead===0&&(R.strstart=0,R.block_start=0,R.insert=0))),z(_),_.avail_out===0))return R.last_flush=-1,p}return q!==f?p:R.wrap<=0?1:(R.wrap===2?(se(R,255&_.adler),se(R,_.adler>>8&255),se(R,_.adler>>16&255),se(R,_.adler>>24&255),se(R,255&_.total_in),se(R,_.total_in>>8&255),se(R,_.total_in>>16&255),se(R,_.total_in>>24&255)):(ie(R,_.adler>>>16),ie(R,65535&_.adler)),z(_),0<R.wrap&&(R.wrap=-R.wrap),R.pending!==0?p:1)},r.deflateEnd=function(_){var q;return _&&_.state?(q=_.state.status)!==L&&q!==69&&q!==73&&q!==91&&q!==103&&q!==W&&q!==666?G(_,v):(_.state=null,q===W?G(_,-3):p):v},r.deflateSetDictionary=function(_,q){var $,R,M,O,X,Y,B,ee,re=q.length;if(!_||!_.state||(O=($=_.state).wrap)===2||O===1&&$.status!==L||$.lookahead)return v;for(O===1&&(_.adler=l(_.adler,q,re,0)),$.wrap=0,re>=$.w_size&&(O===0&&(Q($.head),$.strstart=0,$.block_start=0,$.insert=0),ee=new a.Buf8($.w_size),a.arraySet(ee,q,re-$.w_size,$.w_size,0),q=ee,re=$.w_size),X=_.avail_in,Y=_.next_in,B=_.input,_.avail_in=re,_.next_in=0,_.input=q,ve($);$.lookahead>=F;){for(R=$.strstart,M=$.lookahead-(F-1);$.ins_h=($.ins_h<<$.hash_shift^$.window[R+F-1])&$.hash_mask,$.prev[R&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=R,R++,--M;);$.strstart=R,$.lookahead=F-1,ve($)}return $.strstart+=$.lookahead,$.block_start=$.strstart,$.insert=$.lookahead,$.lookahead=0,$.match_length=$.prev_length=F-1,$.match_available=0,_.next_in=Y,_.input=B,_.avail_in=X,$.wrap=O,p},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,s,r){s.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,s,r){s.exports=function(n,a){var o,l,c,h,d,f,p,v,m,y,g,b,w,S,C,I,P,N,F,T,V,L,W,k,U;o=n.state,l=n.next_in,k=n.input,c=l+(n.avail_in-5),h=n.next_out,U=n.output,d=h-(a-n.avail_out),f=h+(n.avail_out-257),p=o.dmax,v=o.wsize,m=o.whave,y=o.wnext,g=o.window,b=o.hold,w=o.bits,S=o.lencode,C=o.distcode,I=(1<<o.lenbits)-1,P=(1<<o.distbits)-1;e:do{w<15&&(b+=k[l++]<<w,w+=8,b+=k[l++]<<w,w+=8),N=S[b&I];t:for(;;){if(b>>>=F=N>>>24,w-=F,(F=N>>>16&255)===0)U[h++]=65535&N;else{if(!(16&F)){if(!(64&F)){N=S[(65535&N)+(b&(1<<F)-1)];continue t}if(32&F){o.mode=12;break e}n.msg="invalid literal/length code",o.mode=30;break e}T=65535&N,(F&=15)&&(w<F&&(b+=k[l++]<<w,w+=8),T+=b&(1<<F)-1,b>>>=F,w-=F),w<15&&(b+=k[l++]<<w,w+=8,b+=k[l++]<<w,w+=8),N=C[b&P];i:for(;;){if(b>>>=F=N>>>24,w-=F,!(16&(F=N>>>16&255))){if(!(64&F)){N=C[(65535&N)+(b&(1<<F)-1)];continue i}n.msg="invalid distance code",o.mode=30;break e}if(V=65535&N,w<(F&=15)&&(b+=k[l++]<<w,(w+=8)<F&&(b+=k[l++]<<w,w+=8)),p<(V+=b&(1<<F)-1)){n.msg="invalid distance too far back",o.mode=30;break e}if(b>>>=F,w-=F,(F=h-d)<V){if(m<(F=V-F)&&o.sane){n.msg="invalid distance too far back",o.mode=30;break e}if(W=g,(L=0)===y){if(L+=v-F,F<T){for(T-=F;U[h++]=g[L++],--F;);L=h-V,W=U}}else if(y<F){if(L+=v+y-F,(F-=y)<T){for(T-=F;U[h++]=g[L++],--F;);if(L=0,y<T){for(T-=F=y;U[h++]=g[L++],--F;);L=h-V,W=U}}}else if(L+=y-F,F<T){for(T-=F;U[h++]=g[L++],--F;);L=h-V,W=U}for(;2<T;)U[h++]=W[L++],U[h++]=W[L++],U[h++]=W[L++],T-=3;T&&(U[h++]=W[L++],1<T&&(U[h++]=W[L++]))}else{for(L=h-V;U[h++]=U[L++],U[h++]=U[L++],U[h++]=U[L++],2<(T-=3););T&&(U[h++]=U[L++],1<T&&(U[h++]=U[L++]))}break}}break}}while(l<c&&h<f);l-=T=w>>3,b&=(1<<(w-=T<<3))-1,n.next_in=l,n.next_out=h,n.avail_in=l<c?c-l+5:5-(l-c),n.avail_out=h<f?f-h+257:257-(h-f),o.hold=b,o.bits=w}},{}],49:[function(t,s,r){var n=t("../utils/common"),a=t("./adler32"),o=t("./crc32"),l=t("./inffast"),c=t("./inftrees"),h=1,d=2,f=0,p=-2,v=1,m=852,y=592;function g(L){return(L>>>24&255)+(L>>>8&65280)+((65280&L)<<8)+((255&L)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(L){var W;return L&&L.state?(W=L.state,L.total_in=L.total_out=W.total=0,L.msg="",W.wrap&&(L.adler=1&W.wrap),W.mode=v,W.last=0,W.havedict=0,W.dmax=32768,W.head=null,W.hold=0,W.bits=0,W.lencode=W.lendyn=new n.Buf32(m),W.distcode=W.distdyn=new n.Buf32(y),W.sane=1,W.back=-1,f):p}function S(L){var W;return L&&L.state?((W=L.state).wsize=0,W.whave=0,W.wnext=0,w(L)):p}function C(L,W){var k,U;return L&&L.state?(U=L.state,W<0?(k=0,W=-W):(k=1+(W>>4),W<48&&(W&=15)),W&&(W<8||15<W)?p:(U.window!==null&&U.wbits!==W&&(U.window=null),U.wrap=k,U.wbits=W,S(L))):p}function I(L,W){var k,U;return L?(U=new b,(L.state=U).window=null,(k=C(L,W))!==f&&(L.state=null),k):p}var P,N,F=!0;function T(L){if(F){var W;for(P=new n.Buf32(512),N=new n.Buf32(32),W=0;W<144;)L.lens[W++]=8;for(;W<256;)L.lens[W++]=9;for(;W<280;)L.lens[W++]=7;for(;W<288;)L.lens[W++]=8;for(c(h,L.lens,0,288,P,0,L.work,{bits:9}),W=0;W<32;)L.lens[W++]=5;c(d,L.lens,0,32,N,0,L.work,{bits:5}),F=!1}L.lencode=P,L.lenbits=9,L.distcode=N,L.distbits=5}function V(L,W,k,U){var K,j=L.state;return j.window===null&&(j.wsize=1<<j.wbits,j.wnext=0,j.whave=0,j.window=new n.Buf8(j.wsize)),U>=j.wsize?(n.arraySet(j.window,W,k-j.wsize,j.wsize,0),j.wnext=0,j.whave=j.wsize):(U<(K=j.wsize-j.wnext)&&(K=U),n.arraySet(j.window,W,k-U,K,j.wnext),(U-=K)?(n.arraySet(j.window,W,k-U,U,0),j.wnext=U,j.whave=j.wsize):(j.wnext+=K,j.wnext===j.wsize&&(j.wnext=0),j.whave<j.wsize&&(j.whave+=K))),0}r.inflateReset=S,r.inflateReset2=C,r.inflateResetKeep=w,r.inflateInit=function(L){return I(L,15)},r.inflateInit2=I,r.inflate=function(L,W){var k,U,K,j,G,H,Q,z,D,se,ie,J,ve,fe,ye,Ee,at,Ve,qi,Ii,_,q,$,R,M=0,O=new n.Buf8(4),X=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!L||!L.state||!L.output||!L.input&&L.avail_in!==0)return p;(k=L.state).mode===12&&(k.mode=13),G=L.next_out,K=L.output,Q=L.avail_out,j=L.next_in,U=L.input,H=L.avail_in,z=k.hold,D=k.bits,se=H,ie=Q,q=f;e:for(;;)switch(k.mode){case v:if(k.wrap===0){k.mode=13;break}for(;D<16;){if(H===0)break e;H--,z+=U[j++]<<D,D+=8}if(2&k.wrap&&z===35615){O[k.check=0]=255&z,O[1]=z>>>8&255,k.check=o(k.check,O,2,0),D=z=0,k.mode=2;break}if(k.flags=0,k.head&&(k.head.done=!1),!(1&k.wrap)||(((255&z)<<8)+(z>>8))%31){L.msg="incorrect header check",k.mode=30;break}if((15&z)!=8){L.msg="unknown compression method",k.mode=30;break}if(D-=4,_=8+(15&(z>>>=4)),k.wbits===0)k.wbits=_;else if(_>k.wbits){L.msg="invalid window size",k.mode=30;break}k.dmax=1<<_,L.adler=k.check=1,k.mode=512&z?10:12,D=z=0;break;case 2:for(;D<16;){if(H===0)break e;H--,z+=U[j++]<<D,D+=8}if(k.flags=z,(255&k.flags)!=8){L.msg="unknown compression method",k.mode=30;break}if(57344&k.flags){L.msg="unknown header flags set",k.mode=30;break}k.head&&(k.head.text=z>>8&1),512&k.flags&&(O[0]=255&z,O[1]=z>>>8&255,k.check=o(k.check,O,2,0)),D=z=0,k.mode=3;case 3:for(;D<32;){if(H===0)break e;H--,z+=U[j++]<<D,D+=8}k.head&&(k.head.time=z),512&k.flags&&(O[0]=255&z,O[1]=z>>>8&255,O[2]=z>>>16&255,O[3]=z>>>24&255,k.check=o(k.check,O,4,0)),D=z=0,k.mode=4;case 4:for(;D<16;){if(H===0)break e;H--,z+=U[j++]<<D,D+=8}k.head&&(k.head.xflags=255&z,k.head.os=z>>8),512&k.flags&&(O[0]=255&z,O[1]=z>>>8&255,k.check=o(k.check,O,2,0)),D=z=0,k.mode=5;case 5:if(1024&k.flags){for(;D<16;){if(H===0)break e;H--,z+=U[j++]<<D,D+=8}k.length=z,k.head&&(k.head.extra_len=z),512&k.flags&&(O[0]=255&z,O[1]=z>>>8&255,k.check=o(k.check,O,2,0)),D=z=0}else k.head&&(k.head.extra=null);k.mode=6;case 6:if(1024&k.flags&&(H<(J=k.length)&&(J=H),J&&(k.head&&(_=k.head.extra_len-k.length,k.head.extra||(k.head.extra=new Array(k.head.extra_len)),n.arraySet(k.head.extra,U,j,J,_)),512&k.flags&&(k.check=o(k.check,U,J,j)),H-=J,j+=J,k.length-=J),k.length))break e;k.length=0,k.mode=7;case 7:if(2048&k.flags){if(H===0)break e;for(J=0;_=U[j+J++],k.head&&_&&k.length<65536&&(k.head.name+=String.fromCharCode(_)),_&&J<H;);if(512&k.flags&&(k.check=o(k.check,U,J,j)),H-=J,j+=J,_)break e}else k.head&&(k.head.name=null);k.length=0,k.mode=8;case 8:if(4096&k.flags){if(H===0)break e;for(J=0;_=U[j+J++],k.head&&_&&k.length<65536&&(k.head.comment+=String.fromCharCode(_)),_&&J<H;);if(512&k.flags&&(k.check=o(k.check,U,J,j)),H-=J,j+=J,_)break e}else k.head&&(k.head.comment=null);k.mode=9;case 9:if(512&k.flags){for(;D<16;){if(H===0)break e;H--,z+=U[j++]<<D,D+=8}if(z!==(65535&k.check)){L.msg="header crc mismatch",k.mode=30;break}D=z=0}k.head&&(k.head.hcrc=k.flags>>9&1,k.head.done=!0),L.adler=k.check=0,k.mode=12;break;case 10:for(;D<32;){if(H===0)break e;H--,z+=U[j++]<<D,D+=8}L.adler=k.check=g(z),D=z=0,k.mode=11;case 11:if(k.havedict===0)return L.next_out=G,L.avail_out=Q,L.next_in=j,L.avail_in=H,k.hold=z,k.bits=D,2;L.adler=k.check=1,k.mode=12;case 12:if(W===5||W===6)break e;case 13:if(k.last){z>>>=7&D,D-=7&D,k.mode=27;break}for(;D<3;){if(H===0)break e;H--,z+=U[j++]<<D,D+=8}switch(k.last=1&z,D-=1,3&(z>>>=1)){case 0:k.mode=14;break;case 1:if(T(k),k.mode=20,W!==6)break;z>>>=2,D-=2;break e;case 2:k.mode=17;break;case 3:L.msg="invalid block type",k.mode=30}z>>>=2,D-=2;break;case 14:for(z>>>=7&D,D-=7&D;D<32;){if(H===0)break e;H--,z+=U[j++]<<D,D+=8}if((65535&z)!=(z>>>16^65535)){L.msg="invalid stored block lengths",k.mode=30;break}if(k.length=65535&z,D=z=0,k.mode=15,W===6)break e;case 15:k.mode=16;case 16:if(J=k.length){if(H<J&&(J=H),Q<J&&(J=Q),J===0)break e;n.arraySet(K,U,j,J,G),H-=J,j+=J,Q-=J,G+=J,k.length-=J;break}k.mode=12;break;case 17:for(;D<14;){if(H===0)break e;H--,z+=U[j++]<<D,D+=8}if(k.nlen=257+(31&z),z>>>=5,D-=5,k.ndist=1+(31&z),z>>>=5,D-=5,k.ncode=4+(15&z),z>>>=4,D-=4,286<k.nlen||30<k.ndist){L.msg="too many length or distance symbols",k.mode=30;break}k.have=0,k.mode=18;case 18:for(;k.have<k.ncode;){for(;D<3;){if(H===0)break e;H--,z+=U[j++]<<D,D+=8}k.lens[X[k.have++]]=7&z,z>>>=3,D-=3}for(;k.have<19;)k.lens[X[k.have++]]=0;if(k.lencode=k.lendyn,k.lenbits=7,$={bits:k.lenbits},q=c(0,k.lens,0,19,k.lencode,0,k.work,$),k.lenbits=$.bits,q){L.msg="invalid code lengths set",k.mode=30;break}k.have=0,k.mode=19;case 19:for(;k.have<k.nlen+k.ndist;){for(;Ee=(M=k.lencode[z&(1<<k.lenbits)-1])>>>16&255,at=65535&M,!((ye=M>>>24)<=D);){if(H===0)break e;H--,z+=U[j++]<<D,D+=8}if(at<16)z>>>=ye,D-=ye,k.lens[k.have++]=at;else{if(at===16){for(R=ye+2;D<R;){if(H===0)break e;H--,z+=U[j++]<<D,D+=8}if(z>>>=ye,D-=ye,k.have===0){L.msg="invalid bit length repeat",k.mode=30;break}_=k.lens[k.have-1],J=3+(3&z),z>>>=2,D-=2}else if(at===17){for(R=ye+3;D<R;){if(H===0)break e;H--,z+=U[j++]<<D,D+=8}D-=ye,_=0,J=3+(7&(z>>>=ye)),z>>>=3,D-=3}else{for(R=ye+7;D<R;){if(H===0)break e;H--,z+=U[j++]<<D,D+=8}D-=ye,_=0,J=11+(127&(z>>>=ye)),z>>>=7,D-=7}if(k.have+J>k.nlen+k.ndist){L.msg="invalid bit length repeat",k.mode=30;break}for(;J--;)k.lens[k.have++]=_}}if(k.mode===30)break;if(k.lens[256]===0){L.msg="invalid code -- missing end-of-block",k.mode=30;break}if(k.lenbits=9,$={bits:k.lenbits},q=c(h,k.lens,0,k.nlen,k.lencode,0,k.work,$),k.lenbits=$.bits,q){L.msg="invalid literal/lengths set",k.mode=30;break}if(k.distbits=6,k.distcode=k.distdyn,$={bits:k.distbits},q=c(d,k.lens,k.nlen,k.ndist,k.distcode,0,k.work,$),k.distbits=$.bits,q){L.msg="invalid distances set",k.mode=30;break}if(k.mode=20,W===6)break e;case 20:k.mode=21;case 21:if(6<=H&&258<=Q){L.next_out=G,L.avail_out=Q,L.next_in=j,L.avail_in=H,k.hold=z,k.bits=D,l(L,ie),G=L.next_out,K=L.output,Q=L.avail_out,j=L.next_in,U=L.input,H=L.avail_in,z=k.hold,D=k.bits,k.mode===12&&(k.back=-1);break}for(k.back=0;Ee=(M=k.lencode[z&(1<<k.lenbits)-1])>>>16&255,at=65535&M,!((ye=M>>>24)<=D);){if(H===0)break e;H--,z+=U[j++]<<D,D+=8}if(Ee&&!(240&Ee)){for(Ve=ye,qi=Ee,Ii=at;Ee=(M=k.lencode[Ii+((z&(1<<Ve+qi)-1)>>Ve)])>>>16&255,at=65535&M,!(Ve+(ye=M>>>24)<=D);){if(H===0)break e;H--,z+=U[j++]<<D,D+=8}z>>>=Ve,D-=Ve,k.back+=Ve}if(z>>>=ye,D-=ye,k.back+=ye,k.length=at,Ee===0){k.mode=26;break}if(32&Ee){k.back=-1,k.mode=12;break}if(64&Ee){L.msg="invalid literal/length code",k.mode=30;break}k.extra=15&Ee,k.mode=22;case 22:if(k.extra){for(R=k.extra;D<R;){if(H===0)break e;H--,z+=U[j++]<<D,D+=8}k.length+=z&(1<<k.extra)-1,z>>>=k.extra,D-=k.extra,k.back+=k.extra}k.was=k.length,k.mode=23;case 23:for(;Ee=(M=k.distcode[z&(1<<k.distbits)-1])>>>16&255,at=65535&M,!((ye=M>>>24)<=D);){if(H===0)break e;H--,z+=U[j++]<<D,D+=8}if(!(240&Ee)){for(Ve=ye,qi=Ee,Ii=at;Ee=(M=k.distcode[Ii+((z&(1<<Ve+qi)-1)>>Ve)])>>>16&255,at=65535&M,!(Ve+(ye=M>>>24)<=D);){if(H===0)break e;H--,z+=U[j++]<<D,D+=8}z>>>=Ve,D-=Ve,k.back+=Ve}if(z>>>=ye,D-=ye,k.back+=ye,64&Ee){L.msg="invalid distance code",k.mode=30;break}k.offset=at,k.extra=15&Ee,k.mode=24;case 24:if(k.extra){for(R=k.extra;D<R;){if(H===0)break e;H--,z+=U[j++]<<D,D+=8}k.offset+=z&(1<<k.extra)-1,z>>>=k.extra,D-=k.extra,k.back+=k.extra}if(k.offset>k.dmax){L.msg="invalid distance too far back",k.mode=30;break}k.mode=25;case 25:if(Q===0)break e;if(J=ie-Q,k.offset>J){if((J=k.offset-J)>k.whave&&k.sane){L.msg="invalid distance too far back",k.mode=30;break}ve=J>k.wnext?(J-=k.wnext,k.wsize-J):k.wnext-J,J>k.length&&(J=k.length),fe=k.window}else fe=K,ve=G-k.offset,J=k.length;for(Q<J&&(J=Q),Q-=J,k.length-=J;K[G++]=fe[ve++],--J;);k.length===0&&(k.mode=21);break;case 26:if(Q===0)break e;K[G++]=k.length,Q--,k.mode=21;break;case 27:if(k.wrap){for(;D<32;){if(H===0)break e;H--,z|=U[j++]<<D,D+=8}if(ie-=Q,L.total_out+=ie,k.total+=ie,ie&&(L.adler=k.check=k.flags?o(k.check,K,ie,G-ie):a(k.check,K,ie,G-ie)),ie=Q,(k.flags?z:g(z))!==k.check){L.msg="incorrect data check",k.mode=30;break}D=z=0}k.mode=28;case 28:if(k.wrap&&k.flags){for(;D<32;){if(H===0)break e;H--,z+=U[j++]<<D,D+=8}if(z!==(4294967295&k.total)){L.msg="incorrect length check",k.mode=30;break}D=z=0}k.mode=29;case 29:q=1;break e;case 30:q=-3;break e;case 31:return-4;case 32:default:return p}return L.next_out=G,L.avail_out=Q,L.next_in=j,L.avail_in=H,k.hold=z,k.bits=D,(k.wsize||ie!==L.avail_out&&k.mode<30&&(k.mode<27||W!==4))&&V(L,L.output,L.next_out,ie-L.avail_out)?(k.mode=31,-4):(se-=L.avail_in,ie-=L.avail_out,L.total_in+=se,L.total_out+=ie,k.total+=ie,k.wrap&&ie&&(L.adler=k.check=k.flags?o(k.check,K,ie,L.next_out-ie):a(k.check,K,ie,L.next_out-ie)),L.data_type=k.bits+(k.last?64:0)+(k.mode===12?128:0)+(k.mode===20||k.mode===15?256:0),(se==0&&ie===0||W===4)&&q===f&&(q=-5),q)},r.inflateEnd=function(L){if(!L||!L.state)return p;var W=L.state;return W.window&&(W.window=null),L.state=null,f},r.inflateGetHeader=function(L,W){var k;return L&&L.state&&2&(k=L.state).wrap?((k.head=W).done=!1,f):p},r.inflateSetDictionary=function(L,W){var k,U=W.length;return L&&L.state?(k=L.state).wrap!==0&&k.mode!==11?p:k.mode===11&&a(1,W,U,0)!==k.check?-3:V(L,W,U,U)?(k.mode=31,-4):(k.havedict=1,f):p},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,s,r){var n=t("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(h,d,f,p,v,m,y,g){var b,w,S,C,I,P,N,F,T,V=g.bits,L=0,W=0,k=0,U=0,K=0,j=0,G=0,H=0,Q=0,z=0,D=null,se=0,ie=new n.Buf16(16),J=new n.Buf16(16),ve=null,fe=0;for(L=0;L<=15;L++)ie[L]=0;for(W=0;W<p;W++)ie[d[f+W]]++;for(K=V,U=15;1<=U&&ie[U]===0;U--);if(U<K&&(K=U),U===0)return v[m++]=20971520,v[m++]=20971520,g.bits=1,0;for(k=1;k<U&&ie[k]===0;k++);for(K<k&&(K=k),L=H=1;L<=15;L++)if(H<<=1,(H-=ie[L])<0)return-1;if(0<H&&(h===0||U!==1))return-1;for(J[1]=0,L=1;L<15;L++)J[L+1]=J[L]+ie[L];for(W=0;W<p;W++)d[f+W]!==0&&(y[J[d[f+W]]++]=W);if(P=h===0?(D=ve=y,19):h===1?(D=a,se-=257,ve=o,fe-=257,256):(D=l,ve=c,-1),L=k,I=m,G=W=z=0,S=-1,C=(Q=1<<(j=K))-1,h===1&&852<Q||h===2&&592<Q)return 1;for(;;){for(N=L-G,T=y[W]<P?(F=0,y[W]):y[W]>P?(F=ve[fe+y[W]],D[se+y[W]]):(F=96,0),b=1<<L-G,k=w=1<<j;v[I+(z>>G)+(w-=b)]=N<<24|F<<16|T|0,w!==0;);for(b=1<<L-1;z&b;)b>>=1;if(b!==0?(z&=b-1,z+=b):z=0,W++,--ie[L]==0){if(L===U)break;L=d[f+y[W]]}if(K<L&&(z&C)!==S){for(G===0&&(G=K),I+=k,H=1<<(j=L-G);j+G<U&&!((H-=ie[j+G])<=0);)j++,H<<=1;if(Q+=1<<j,h===1&&852<Q||h===2&&592<Q)return 1;v[S=z&C]=K<<24|j<<16|I-m|0}}return z!==0&&(v[I+z]=L-G<<24|64<<16|0),g.bits=K,0}},{"../utils/common":41}],51:[function(t,s,r){s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,s,r){var n=t("../utils/common"),a=0,o=1;function l(M){for(var O=M.length;0<=--O;)M[O]=0}var c=0,h=29,d=256,f=d+1+h,p=30,v=19,m=2*f+1,y=15,g=16,b=7,w=256,S=16,C=17,I=18,P=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=new Array(2*(f+2));l(V);var L=new Array(2*p);l(L);var W=new Array(512);l(W);var k=new Array(256);l(k);var U=new Array(h);l(U);var K,j,G,H=new Array(p);function Q(M,O,X,Y,B){this.static_tree=M,this.extra_bits=O,this.extra_base=X,this.elems=Y,this.max_length=B,this.has_stree=M&&M.length}function z(M,O){this.dyn_tree=M,this.max_code=0,this.stat_desc=O}function D(M){return M<256?W[M]:W[256+(M>>>7)]}function se(M,O){M.pending_buf[M.pending++]=255&O,M.pending_buf[M.pending++]=O>>>8&255}function ie(M,O,X){M.bi_valid>g-X?(M.bi_buf|=O<<M.bi_valid&65535,se(M,M.bi_buf),M.bi_buf=O>>g-M.bi_valid,M.bi_valid+=X-g):(M.bi_buf|=O<<M.bi_valid&65535,M.bi_valid+=X)}function J(M,O,X){ie(M,X[2*O],X[2*O+1])}function ve(M,O){for(var X=0;X|=1&M,M>>>=1,X<<=1,0<--O;);return X>>>1}function fe(M,O,X){var Y,B,ee=new Array(y+1),re=0;for(Y=1;Y<=y;Y++)ee[Y]=re=re+X[Y-1]<<1;for(B=0;B<=O;B++){var te=M[2*B+1];te!==0&&(M[2*B]=ve(ee[te]++,te))}}function ye(M){var O;for(O=0;O<f;O++)M.dyn_ltree[2*O]=0;for(O=0;O<p;O++)M.dyn_dtree[2*O]=0;for(O=0;O<v;O++)M.bl_tree[2*O]=0;M.dyn_ltree[2*w]=1,M.opt_len=M.static_len=0,M.last_lit=M.matches=0}function Ee(M){8<M.bi_valid?se(M,M.bi_buf):0<M.bi_valid&&(M.pending_buf[M.pending++]=M.bi_buf),M.bi_buf=0,M.bi_valid=0}function at(M,O,X,Y){var B=2*O,ee=2*X;return M[B]<M[ee]||M[B]===M[ee]&&Y[O]<=Y[X]}function Ve(M,O,X){for(var Y=M.heap[X],B=X<<1;B<=M.heap_len&&(B<M.heap_len&&at(O,M.heap[B+1],M.heap[B],M.depth)&&B++,!at(O,Y,M.heap[B],M.depth));)M.heap[X]=M.heap[B],X=B,B<<=1;M.heap[X]=Y}function qi(M,O,X){var Y,B,ee,re,te=0;if(M.last_lit!==0)for(;Y=M.pending_buf[M.d_buf+2*te]<<8|M.pending_buf[M.d_buf+2*te+1],B=M.pending_buf[M.l_buf+te],te++,Y===0?J(M,B,O):(J(M,(ee=k[B])+d+1,O),(re=P[ee])!==0&&ie(M,B-=U[ee],re),J(M,ee=D(--Y),X),(re=N[ee])!==0&&ie(M,Y-=H[ee],re)),te<M.last_lit;);J(M,w,O)}function Ii(M,O){var X,Y,B,ee=O.dyn_tree,re=O.stat_desc.static_tree,te=O.stat_desc.has_stree,ce=O.stat_desc.elems,Ie=-1;for(M.heap_len=0,M.heap_max=m,X=0;X<ce;X++)ee[2*X]!==0?(M.heap[++M.heap_len]=Ie=X,M.depth[X]=0):ee[2*X+1]=0;for(;M.heap_len<2;)ee[2*(B=M.heap[++M.heap_len]=Ie<2?++Ie:0)]=1,M.depth[B]=0,M.opt_len--,te&&(M.static_len-=re[2*B+1]);for(O.max_code=Ie,X=M.heap_len>>1;1<=X;X--)Ve(M,ee,X);for(B=ce;X=M.heap[1],M.heap[1]=M.heap[M.heap_len--],Ve(M,ee,1),Y=M.heap[1],M.heap[--M.heap_max]=X,M.heap[--M.heap_max]=Y,ee[2*B]=ee[2*X]+ee[2*Y],M.depth[B]=(M.depth[X]>=M.depth[Y]?M.depth[X]:M.depth[Y])+1,ee[2*X+1]=ee[2*Y+1]=B,M.heap[1]=B++,Ve(M,ee,1),2<=M.heap_len;);M.heap[--M.heap_max]=M.heap[1],function(_e,hi){var Io,Ki,To,Ge,Xu,Gf,ws=hi.dyn_tree,Vv=hi.max_code,ik=hi.stat_desc.static_tree,sk=hi.stat_desc.has_stree,rk=hi.stat_desc.extra_bits,Gv=hi.stat_desc.extra_base,No=hi.stat_desc.max_length,Yu=0;for(Ge=0;Ge<=y;Ge++)_e.bl_count[Ge]=0;for(ws[2*_e.heap[_e.heap_max]+1]=0,Io=_e.heap_max+1;Io<m;Io++)No<(Ge=ws[2*ws[2*(Ki=_e.heap[Io])+1]+1]+1)&&(Ge=No,Yu++),ws[2*Ki+1]=Ge,Vv<Ki||(_e.bl_count[Ge]++,Xu=0,Gv<=Ki&&(Xu=rk[Ki-Gv]),Gf=ws[2*Ki],_e.opt_len+=Gf*(Ge+Xu),sk&&(_e.static_len+=Gf*(ik[2*Ki+1]+Xu)));if(Yu!==0){do{for(Ge=No-1;_e.bl_count[Ge]===0;)Ge--;_e.bl_count[Ge]--,_e.bl_count[Ge+1]+=2,_e.bl_count[No]--,Yu-=2}while(0<Yu);for(Ge=No;Ge!==0;Ge--)for(Ki=_e.bl_count[Ge];Ki!==0;)Vv<(To=_e.heap[--Io])||(ws[2*To+1]!==Ge&&(_e.opt_len+=(Ge-ws[2*To+1])*ws[2*To],ws[2*To+1]=Ge),Ki--)}}(M,O),fe(ee,Ie,M.bl_count)}function _(M,O,X){var Y,B,ee=-1,re=O[1],te=0,ce=7,Ie=4;for(re===0&&(ce=138,Ie=3),O[2*(X+1)+1]=65535,Y=0;Y<=X;Y++)B=re,re=O[2*(Y+1)+1],++te<ce&&B===re||(te<Ie?M.bl_tree[2*B]+=te:B!==0?(B!==ee&&M.bl_tree[2*B]++,M.bl_tree[2*S]++):te<=10?M.bl_tree[2*C]++:M.bl_tree[2*I]++,ee=B,Ie=(te=0)===re?(ce=138,3):B===re?(ce=6,3):(ce=7,4))}function q(M,O,X){var Y,B,ee=-1,re=O[1],te=0,ce=7,Ie=4;for(re===0&&(ce=138,Ie=3),Y=0;Y<=X;Y++)if(B=re,re=O[2*(Y+1)+1],!(++te<ce&&B===re)){if(te<Ie)for(;J(M,B,M.bl_tree),--te!=0;);else B!==0?(B!==ee&&(J(M,B,M.bl_tree),te--),J(M,S,M.bl_tree),ie(M,te-3,2)):te<=10?(J(M,C,M.bl_tree),ie(M,te-3,3)):(J(M,I,M.bl_tree),ie(M,te-11,7));ee=B,Ie=(te=0)===re?(ce=138,3):B===re?(ce=6,3):(ce=7,4)}}l(H);var $=!1;function R(M,O,X,Y){ie(M,(c<<1)+(Y?1:0),3),function(B,ee,re,te){Ee(B),se(B,re),se(B,~re),n.arraySet(B.pending_buf,B.window,ee,re,B.pending),B.pending+=re}(M,O,X)}r._tr_init=function(M){$||(function(){var O,X,Y,B,ee,re=new Array(y+1);for(B=Y=0;B<h-1;B++)for(U[B]=Y,O=0;O<1<<P[B];O++)k[Y++]=B;for(k[Y-1]=B,B=ee=0;B<16;B++)for(H[B]=ee,O=0;O<1<<N[B];O++)W[ee++]=B;for(ee>>=7;B<p;B++)for(H[B]=ee<<7,O=0;O<1<<N[B]-7;O++)W[256+ee++]=B;for(X=0;X<=y;X++)re[X]=0;for(O=0;O<=143;)V[2*O+1]=8,O++,re[8]++;for(;O<=255;)V[2*O+1]=9,O++,re[9]++;for(;O<=279;)V[2*O+1]=7,O++,re[7]++;for(;O<=287;)V[2*O+1]=8,O++,re[8]++;for(fe(V,f+1,re),O=0;O<p;O++)L[2*O+1]=5,L[2*O]=ve(O,5);K=new Q(V,P,d+1,f,y),j=new Q(L,N,0,p,y),G=new Q(new Array(0),F,0,v,b)}(),$=!0),M.l_desc=new z(M.dyn_ltree,K),M.d_desc=new z(M.dyn_dtree,j),M.bl_desc=new z(M.bl_tree,G),M.bi_buf=0,M.bi_valid=0,ye(M)},r._tr_stored_block=R,r._tr_flush_block=function(M,O,X,Y){var B,ee,re=0;0<M.level?(M.strm.data_type===2&&(M.strm.data_type=function(te){var ce,Ie=4093624447;for(ce=0;ce<=31;ce++,Ie>>>=1)if(1&Ie&&te.dyn_ltree[2*ce]!==0)return a;if(te.dyn_ltree[18]!==0||te.dyn_ltree[20]!==0||te.dyn_ltree[26]!==0)return o;for(ce=32;ce<d;ce++)if(te.dyn_ltree[2*ce]!==0)return o;return a}(M)),Ii(M,M.l_desc),Ii(M,M.d_desc),re=function(te){var ce;for(_(te,te.dyn_ltree,te.l_desc.max_code),_(te,te.dyn_dtree,te.d_desc.max_code),Ii(te,te.bl_desc),ce=v-1;3<=ce&&te.bl_tree[2*T[ce]+1]===0;ce--);return te.opt_len+=3*(ce+1)+5+5+4,ce}(M),B=M.opt_len+3+7>>>3,(ee=M.static_len+3+7>>>3)<=B&&(B=ee)):B=ee=X+5,X+4<=B&&O!==-1?R(M,O,X,Y):M.strategy===4||ee===B?(ie(M,2+(Y?1:0),3),qi(M,V,L)):(ie(M,4+(Y?1:0),3),function(te,ce,Ie,_e){var hi;for(ie(te,ce-257,5),ie(te,Ie-1,5),ie(te,_e-4,4),hi=0;hi<_e;hi++)ie(te,te.bl_tree[2*T[hi]+1],3);q(te,te.dyn_ltree,ce-1),q(te,te.dyn_dtree,Ie-1)}(M,M.l_desc.max_code+1,M.d_desc.max_code+1,re+1),qi(M,M.dyn_ltree,M.dyn_dtree)),ye(M),Y&&Ee(M)},r._tr_tally=function(M,O,X){return M.pending_buf[M.d_buf+2*M.last_lit]=O>>>8&255,M.pending_buf[M.d_buf+2*M.last_lit+1]=255&O,M.pending_buf[M.l_buf+M.last_lit]=255&X,M.last_lit++,O===0?M.dyn_ltree[2*X]++:(M.matches++,O--,M.dyn_ltree[2*(k[X]+d+1)]++,M.dyn_dtree[2*D(O)]++),M.last_lit===M.lit_bufsize-1},r._tr_align=function(M){ie(M,2,3),J(M,w,V),function(O){O.bi_valid===16?(se(O,O.bi_buf),O.bi_buf=0,O.bi_valid=0):8<=O.bi_valid&&(O.pending_buf[O.pending++]=255&O.bi_buf,O.bi_buf>>=8,O.bi_valid-=8)}(M)}},{"../utils/common":41}],53:[function(t,s,r){s.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,s,r){(function(n){(function(a,o){if(!a.setImmediate){var l,c,h,d,f=1,p={},v=!1,m=a.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(a);y=y&&y.setTimeout?y:a,l={}.toString.call(a.process)==="[object process]"?function(S){process.nextTick(function(){b(S)})}:function(){if(a.postMessage&&!a.importScripts){var S=!0,C=a.onmessage;return a.onmessage=function(){S=!1},a.postMessage("","*"),a.onmessage=C,S}}()?(d="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",w,!1):a.attachEvent("onmessage",w),function(S){a.postMessage(d+S,"*")}):a.MessageChannel?((h=new MessageChannel).port1.onmessage=function(S){b(S.data)},function(S){h.port2.postMessage(S)}):m&&"onreadystatechange"in m.createElement("script")?(c=m.documentElement,function(S){var C=m.createElement("script");C.onreadystatechange=function(){b(S),C.onreadystatechange=null,c.removeChild(C),C=null},c.appendChild(C)}):function(S){setTimeout(b,0,S)},y.setImmediate=function(S){typeof S!="function"&&(S=new Function(""+S));for(var C=new Array(arguments.length-1),I=0;I<C.length;I++)C[I]=arguments[I+1];var P={callback:S,args:C};return p[f]=P,l(f),f++},y.clearImmediate=g}function g(S){delete p[S]}function b(S){if(v)setTimeout(b,0,S);else{var C=p[S];if(C){v=!0;try{(function(I){var P=I.callback,N=I.args;switch(N.length){case 0:P();break;case 1:P(N[0]);break;case 2:P(N[0],N[1]);break;case 3:P(N[0],N[1],N[2]);break;default:P.apply(o,N)}})(C)}finally{g(S),v=!1}}}}function w(S){S.source===a&&typeof S.data=="string"&&S.data.indexOf(d)===0&&b(+S.data.slice(d.length))}})(typeof self>"u"?n===void 0?this:n:self)}).call(this,typeof Zu<"u"?Zu:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(tk);var JE=tk.exports;const e2=G0(JE),t2=({className:i})=>ae.jsx("svg",{className:i,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:ae.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0l-3.75 3.75M12 9.75l3.75 3.75M3 17.25V21h18v-3.75M3.75 14.25c-.621 0-1.125-.504-1.125-1.125V11.25c0-.621.504-1.125 1.125-1.125h16.5c.621 0 1.125.504 1.125 1.125v1.875c0 .621-.504 1.125-1.125 1.125H3.75z"})}),i2=({className:i})=>ae.jsx("svg",{className:i,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:ae.jsx("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.06-1.06L10.5 12.94l-1.72-1.72a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.06 0l4.5-4.5z",clipRule:"evenodd"})}),H0=({className:i})=>ae.jsxs("svg",{className:i,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[ae.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),ae.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s2=({className:i})=>ae.jsxs("svg",{className:i,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:[ae.jsx("path",{d:"M5.25 2.25a.75.75 0 00-1.5 0v18a.75.75 0 001.5 0V2.25z"}),ae.jsx("path",{d:"M9.75 3.75a.75.75 0 01.75-.75h6a.75.75 0 01.75.75v16.5a.75.75 0 01-.75.75h-6a.75.75 0 01-.75-.75V3.75z"}),ae.jsx("path",{fillRule:"evenodd",d:"M12 2.25a.75.75 0 00-.75.75v.75h1.5V3a.75.75 0 00-.75-.75zM12.75 21a.75.75 0 00.75-.75v-.75h-1.5v.75a.75.75 0 00.75.75zM6 3.75a.75.75 0 01.75-.75h.75a.75.75 0 010 1.5h-.75a.75.75 0 01-.75-.75zM6 6.75a.75.75 0 01.75-.75h.75a.75.75 0 010 1.5h-.75a.75.75 0 01-.75-.75zM6 9.75a.75.75 0 01.75-.75h.75a.75.75 0 010 1.5h-.75a.75.75 0 01-.75-.75zM6 12.75a.75.75 0 01.75-.75h.75a.75.75 0 010 1.5h-.75a.75.75 0 01-.75-.75zM6 15.75a.75.75 0 01.75-.75h.75a.75.75 0 010 1.5h-.75a.75.75 0 01-.75-.75zM6 18.75a.75.75 0 01.75-.75h.75a.75.75 0 010 1.5h-.75a.75.75 0 01-.75-.75z",clipRule:"evenodd"})]}),r2=({className:i})=>ae.jsx("svg",{className:i,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:ae.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})});QE.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.4.168/pdf.worker.mjs";const n2=()=>{const[i,e]=si.useState(null),[t,s]=si.useState(null),[r,n]=si.useState([]),[a,o]=si.useState(new Set),[l,c]=si.useState("idle"),[h,d]=si.useState(null),[f,p]=si.useState("high"),v=si.useRef(null),m=si.useCallback(()=>{e(null),s(null),n([]),o(new Set),c("idle"),d(null),v.current&&(v.current.value="")},[]);si.useEffect(()=>{(async()=>{if(i){c("loading"),d(null),n([]),o(new Set);try{const T=await i.arrayBuffer(),V=await ZE(T).promise;s(V),c("processing");const L=[];for(let k=1;k<=V.numPages;k++)L.push(V.getPage(k).then(U=>{const K=U.getViewport({scale:.5}),j=document.createElement("canvas"),G=j.getContext("2d");return j.height=K.height,j.width=K.width,G?U.render({canvasContext:G,viewport:K}).promise.then(()=>j.toDataURL("image/jpeg")):Promise.reject("No se pudo obtener el contexto del canvas")}));const W=await Promise.all(L);n(W),c("idle")}catch(T){console.error(T),d("No se pudo cargar el archivo PDF. Asegrate de que sea un archivo vlido."),c("error"),e(null)}}})()},[i]);const y=T=>{T&&T[0]&&T[0].type==="application/pdf"?(m(),e(T[0])):(d("Por favor, selecciona un archivo PDF."),c("error"))},g=T=>{T.preventDefault(),T.stopPropagation(),T.currentTarget.classList.remove("border-sky-400","bg-slate-700/50"),y(T.dataTransfer.files)},b=T=>{T.preventDefault(),T.stopPropagation()},w=T=>{T.preventDefault(),T.stopPropagation(),T.currentTarget.classList.add("border-sky-400","bg-slate-700/50")},S=T=>{T.preventDefault(),T.stopPropagation(),T.currentTarget.classList.remove("border-sky-400","bg-slate-700/50")},C=T=>{o(V=>{const L=new Set(V);return L.has(T)?L.delete(T):L.add(T),L})},I=()=>{if(!t)return;const T=new Set(Array.from({length:t.numPages},(V,L)=>L));o(T)},P=()=>{o(new Set)},N=async()=>{if(!(!t||a.size===0)){c("downloading"),d(null);try{const T=new e2,V=f==="high"?2:1,L=f==="high"?.92:.75,W=Array.from(a).map(K=>new Promise(async(j,G)=>{try{const H=await t.getPage(K+1),Q=H.getViewport({scale:V}),z=document.createElement("canvas"),D=z.getContext("2d");if(z.height=Q.height,z.width=Q.width,!D)return G(new Error("No se pudo obtener el contexto del canvas"));await H.render({canvasContext:D,viewport:Q}).promise,z.toBlob(se=>{se?(T.file(`pagina_${K+1}.jpg`,se),j()):G(new Error(`No se pudo crear el blob para la pgina ${K+1}`))},"image/jpeg",L)}catch(H){G(H)}}));await Promise.all(W);const k=await T.generateAsync({type:"blob"}),U=document.createElement("a");U.href=URL.createObjectURL(k),U.download=`${i==null?void 0:i.name.replace(".pdf","")}_paginas.zip`||"paginas.zip",document.body.appendChild(U),U.click(),document.body.removeChild(U),URL.revokeObjectURL(U.href)}catch(T){console.error(T),d("Ocurri un error durante la descarga. Por favor, intntalo de nuevo."),c("error")}finally{l!=="error"&&c("idle")}}},F=()=>l==="loading"||l==="processing"&&r.length===0?ae.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[ae.jsx(H0,{className:"w-16 h-16 animate-spin text-sky-400"}),ae.jsx("p",{className:"mt-4 text-lg",children:"Cargando PDF..."})]}):r.length>0?ae.jsx("div",{className:"p-4 sm:p-6 lg:p-8 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-4",children:r.map((T,V)=>ae.jsxs("div",{onClick:()=>C(V),onKeyPress:L=>L.key==="Enter"&&C(V),role:"button",tabIndex:0,"aria-pressed":a.has(V),"aria-label":`Seleccionar pgina ${V+1}`,className:`relative group cursor-pointer rounded-lg overflow-hidden aspect-[210/297] bg-slate-800 shadow-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 focus:ring-sky-400 ${a.has(V)?"ring-2 ring-sky-400":"ring-1 ring-slate-700"}`,children:[ae.jsx("img",{src:T,alt:`Pgina ${V+1}`,className:"w-full h-full object-contain",loading:"lazy"}),ae.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity"}),ae.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 bg-slate-800/50 rounded-full flex items-center justify-center border border-slate-500",children:a.has(V)&&ae.jsx(i2,{className:"w-7 h-7 text-sky-400"})}),ae.jsx("span",{className:"absolute bottom-1 left-2 text-xs font-bold text-white bg-slate-900/60 px-1.5 py-0.5 rounded",children:V+1})]},V))}):ae.jsx("div",{className:"flex items-center justify-center h-full p-4",children:ae.jsxs("div",{onDrop:g,onDragOver:b,onDragEnter:w,onDragLeave:S,className:"w-full max-w-2xl h-80 flex flex-col items-center justify-center border-2 border-dashed border-slate-600 rounded-xl text-center transition-colors duration-300",children:[ae.jsx(t2,{className:"w-16 h-16 text-slate-500"}),ae.jsx("p",{className:"mt-4 text-xl font-semibold text-slate-300",children:"Arrastra y suelta tu PDF aqu"}),ae.jsx("p",{className:"mt-1 text-slate-400",children:"o"}),ae.jsx("button",{onClick:()=>{var T;return(T=v.current)==null?void 0:T.click()},className:"mt-2 px-6 py-2 bg-sky-600 text-white font-semibold rounded-lg hover:bg-sky-500 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 focus:ring-sky-500",children:"Seleccionar archivo"}),ae.jsx("input",{type:"file",ref:v,onChange:T=>y(T.target.files),accept:".pdf",className:"hidden"})]})});return ae.jsxs("div",{className:"min-h-screen flex flex-col",children:[ae.jsx("header",{className:"sticky top-0 z-10 bg-slate-900/80 backdrop-blur-sm shadow-md",children:ae.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:ae.jsxs("div",{className:"flex items-center justify-between h-16",children:[ae.jsxs("h1",{className:"text-xl font-bold tracking-tight flex items-center gap-2",children:[ae.jsx(s2,{className:"w-6 h-6 text-red-400"}),"PDF a JPG"]}),i&&ae.jsx("button",{onClick:m,className:"text-sm text-slate-400 hover:text-white transition-colors",children:"Cambiar archivo"})]})})}),t&&ae.jsx("div",{className:"sticky top-16 z-10 bg-slate-800 shadow-sm py-3",children:ae.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 flex flex-wrap items-center justify-between gap-4",children:[ae.jsxs("div",{className:"flex-shrink-0",children:[ae.jsxs("p",{className:"text-sm text-slate-400",children:["Archivo: ",ae.jsx("span",{className:"font-medium text-slate-200",children:i==null?void 0:i.name})]}),ae.jsxs("p",{className:"text-sm text-slate-400",children:["Pginas: ",ae.jsx("span",{className:"font-medium text-slate-200",children:t.numPages})]})]}),ae.jsxs("div",{className:"flex items-center gap-x-4 gap-y-2 flex-wrap justify-end",children:[ae.jsxs("div",{className:"flex items-center gap-2",children:[ae.jsx("button",{onClick:I,className:"px-3 py-1.5 text-sm bg-slate-700 rounded-md hover:bg-slate-600 transition-colors",children:"Seleccionar todo"}),ae.jsx("button",{onClick:P,className:"px-3 py-1.5 text-sm bg-slate-700 rounded-md hover:bg-slate-600 transition-colors",children:"Deseleccionar todo"})]}),ae.jsxs("div",{className:"flex items-center gap-2",children:[ae.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Calidad:"}),ae.jsxs("div",{role:"radiogroup",className:"flex items-center rounded-md bg-slate-700 p-0.5",children:[ae.jsx("button",{role:"radio","aria-checked":f==="low",onClick:()=>p("low"),className:`px-3 py-1 text-sm rounded-md transition-colors ${f==="low"?"bg-sky-600 text-white shadow":"text-slate-300 hover:bg-slate-600/50"}`,children:"Baja"}),ae.jsx("button",{role:"radio","aria-checked":f==="high",onClick:()=>p("high"),className:`px-3 py-1 text-sm rounded-md transition-colors ${f==="high"?"bg-sky-600 text-white shadow":"text-slate-300 hover:bg-slate-600/50"}`,children:"Alta"})]})]}),ae.jsxs("button",{onClick:N,disabled:a.size===0||l==="downloading",className:"px-4 py-1.5 text-sm font-semibold bg-sky-600 text-white rounded-md hover:bg-sky-500 transition-all disabled:bg-slate-600 disabled:cursor-not-allowed flex items-center gap-2",children:[l==="downloading"&&ae.jsx(H0,{className:"w-4 h-4 animate-spin"}),l==="downloading"?"Descargando...":`Descargar (${a.size})`]})]})]})}),ae.jsx("main",{className:"flex-grow",children:F()}),h&&ae.jsxs("div",{"aria-live":"polite",className:"fixed bottom-5 right-5 bg-red-500 text-white p-4 rounded-lg shadow-lg flex items-center gap-4",children:[ae.jsx("span",{children:h}),ae.jsx("button",{onClick:()=>d(null),"aria-label":"Cerrar error",children:ae.jsx(r2,{className:"w-6 h-6"})})]}),ae.jsx("footer",{className:"text-center py-4 text-sm text-slate-500",children:"Creado con React, Tailwind CSS y Gemini."})]})},$0=document.getElementById("root");$0&&a_($0).render(ae.jsx(Sk.StrictMode,{children:ae.jsx(n2,{})}));
